$.ajaxSetup({cache:true});$(document).ajaxError(function(event,jqxhr,settings,thrownError){if(jqxhr.status===440){console.log("Redirecting to home page.");window.location="/";}else{if(jqxhr.status===441){console.log("Redirecting to checkout steps.");window.location="/checkout/multiStep/";}}});$(document).on("click","#languageSelector",function(){$form=$('form[name="languageSelectorForm"]');$form.attr("method","post");$form.submit();});var lt=/</g,gt=/>/g,ap=/'/g,ab=/&/g,ic=/"/g;function htmlDecode(input){var doc=new DOMParser().parseFromString(input,"text/html");return doc.documentElement.innerHTML;}$("#cancelClear").click(function(){$("#firstName").val("");$("#lastName").val("");$("#email").val("");$("#confirmMail").val("");$("#promotionCheckbox").prop("checked",false);return false;});$(document).on("click","#header-deselect-store",function(){var url="/deselectDefaultStore";$.ajax({url:url,type:"POST",data:{isHeader:true,CSRFToken:ACC.config.CSRFToken},dataType:"html",success:function(data){var newhref=window.location.href.toString();if(newhref.indexOf("store=")!==-1){newhref=newhref.replace(/&?store=([^&]$|[^&]*)/i,"").replace("?&","?");newhref=newhref.indexOf("?")===newhref.length-1?newhref.replace("?",""):newhref;}window.location.href=newhref;}});});$(document).on("click","#header-make-my-store,.header-make-my-store",function(){var url=ACC.config.encodedContextPath+"/setDefaultStore";var facilityId=$(this).attr("data-store-facilityId");try{if(AAData){if(_satellite){_satellite.setVar("nSightEnabled",AAData.nSightEnabled);_satellite.setVar("findItLocation","global header");_satellite.track("makeItMyStore");}}}catch(e){}$.ajax({url:url,type:"POST",context:AAData,data:{facilityId:facilityId,isHeader:true,CSRFToken:ACC.config.CSRFToken},dataType:"html",success:function(data){var newhref=window.location.href.toString();if(newhref.indexOf("store=")!==-1){newhref=newhref.replace(/&?store=([^&]$|[^&]*)/i,"").replace("?&","?");newhref=newhref.indexOf("?")===newhref.length-1?newhref.replace("?",""):newhref;}window.location.href=newhref;},error:function(data){window.location.href="/error";}});});$(document).on("click","#confirm-my-store,.confirm-my-store",function(){var url=ACC.config.encodedContextPath+"/setDefaultStore";var facilityId=$(this).attr("data-store-facilityId");$.ajax({url:url,type:"POST",data:{facilityId:facilityId,isHeader:true,CSRFToken:ACC.config.CSRFToken},dataType:"html",success:function(data){location.reload();}});});$(document).ready(function(){var pathname=window.location.pathname;var pathArray=pathname.split("/");var pathLastSegment=pathArray[pathArray.length-1];var otSDKbtn=document.getElementById("ot-sdk-btn");if(otSDKbtn&&typeof otSDKbtn!==typeof undefined){otSDKbtn.href="javascript:void(0)";}if(pathLastSegment!="cart"){$("#cart-icon").hover(function(){var wWidth=window.innerWidth;if(wWidth>1023){$(".my-menu-icon").removeClass("no-after");$(".my-cart .my-menu-panel").css("display","block");$(".my-menu-panel").click();$("#minicart").addClass("my-menu-open");$("#minicart").attr("aria-expanded","true");var url=$("#cart-panel").attr("data-rolloverPopupUrl");$(".ajax-loader").css("display","none");$(".ajax-loader").attr("aria-busy","false");$.ajax({url:url,type:"GET",dataType:"html",cache:false,success:function(data){$(".ajax-loader").css("display","none");$(".ajax-loader").attr("aria-busy","false");$("#cart-panel").html("");var result=DOMPurify.sanitize(data);$("#cart-panel").html(result);$(".ajax-loader").css("display","none");$(".ajax-loader").attr("aria-busy","false");}});}},function(){$(".ajax-loader").css("display","none");$(".ajax-loader").attr("aria-busy","false");});}$("#miniCartOpen").focus(function(){console.log("cartOpen");$("#cart-icon").trigger("mouseenter");});$("#addNewVehicle, #napa-header-account-signin").focus(function(){console.log("cartClose");$("#cart-icon").trigger("mouseleave");});$(document).on("click","#cart-icon",function(){var wWidth=window.innerWidth;url=ACC.config.encodedContextPath+"/cart";window.location.href=url;$(".my-menu-open .my-menu-icon").addClass("no-after");$("#minicart").addClass("my-menu-open");});$(document).on("click",".my-menu-panel-close",function(){$("#minicart").removeClass("my-menu-open");$(".my-cart .my-menu-panel").css("display","none");});$(document).on("mouseleave",".my-menu.my-cart",function(){$("#minicart").removeClass("my-menu-open");$("#minicart").attr("aria-expanded","false");$(".my-cart .my-menu-panel").css("display","none");});var userDefaultStore=$("#defaultStoreVariables").attr("data-user-defaultstore");var isgeolocated=$("#defaultStoreVariables").attr("data-isgeolocated");if((isgeolocated!="true")&&(userDefaultStore==undefined||userDefaultStore=="")){if(navigator.geolocation){try{if(localStorage.getItem("dontLoad")==null){navigator.geolocation.getCurrentPosition(showPosition);localStorage.setItem("dontLoad","true");}}catch(err){console.log(err);}}}function showPosition(position){var url=$("#urlGetGeolocation").attr("data-ajax-url");$.ajax({url:url,type:"GET",data:{latitude:position.coords.latitude,longitude:position.coords.longitude},success:function(result){var defaultStorePaneldata=DOMPurify.sanitize(result);$("#defaultStorePanel").html(defaultStorePaneldata);$("#defaultStoreName").html($("#confirm-my-store").attr("data-storeheader"));var geolocatedstore=$("#confirm-my-store").attr("data-store-facilityId");$("#defaultStoreVariables").attr("data-user-defaultstore",geolocatedstore);var searchstore=$("#search-store").attr("data-searchstore");if(searchstore!=undefined&&geolocatedstore!=undefined&&geolocatedstore!=searchstore){if(navigator.cookieEnabled){location.reload();}}}});}rewards=$(".nol-rewards-value");rewardsValue=$(rewards).data("value");$(".js-rewards-value").css("width",rewardsValue+"%");});$(document).ready(function(){$(".my-store").keydown(function(event){if(event.keyCode==13){event.preventDefault();return false;}});$("#miniCartOpen").keydown(function(event){if(event.keyCode==27){$("#cart-icon").trigger("mouseleave");}});});$(document).ready(function(){$(".my-menu.my-account").on("click",function(){if($(this).hasClass("my-menu-open")){var url=ACC.config.encodedContextPath+"/rewards/rewards-meter-data";$.ajax({url:url,type:"GET",cache:false,timeout:NAPA.config.rewardsTimeout,success:function(data){if(data.status=="failed"||data.status=="undefined"){$(".rewards-container-serviceerror").css("display","block");$(".rewards-account-available").css("display","none");}else{if(data.status=="success"){$(".rewards-container-serviceerror").css("display","block");$(".rewards-account-available").css("display","none");if(data.result.member.membershipStatus=="registered"){$(".rewards-container-serviceerror").css("display","none");$(".rewards-account-available").css("display","block");$("#av-pts").text(data.result.member.currentPunchCount);$("#av-rwd").text(data.result.member.currentPendingDiscountCount);}}else{if(data.status=="NO-NR"){$(".rewards-container-serviceerror").css("display","none");}}}},error:function(request,textStatus,error){$(".rewards-container-serviceerror").css("display","block");$(".rewards-account-available").css("display","none");if($(".not-enrolled").css("display")=="block"){$(".rewards-container-serviceerror").css("display","none");}}});}});$(".my-menu-panel-list-item, .my-account-link").on("click",function(e){e.stopPropagation();});});$(document).ready(function(){$(window).scroll(function(){if($(".fixed-wrapper").css("position")=="fixed"){$(".fixed-wrapper").css("right",$(this).scrollLeft()+"px");}});});$(document).ready(function(){if($(".fixed-wrapper")[0]){Element.prototype.documentOffsetTop=function(){return this.offsetTop+(this.offsetParent?this.offsetParent.documentOffsetTop():0);};Element.prototype.scrollIntoViewCenter=function(){window.scrollTo(0,this.documentOffsetTop()-(window.innerHeight/2));};$("body").keyup(function(e){if("9"==(e.keyCode||e.which)){var eTop=$(e.target).offset().top;if((eTop-$(window).scrollTop())<$(".fixed-wrapper").height()){document.activeElement.scrollIntoViewCenter();}if($(window).scrollTop()+$(window).height()-eTop<20){document.activeElement.scrollIntoViewCenter();}}});}});$(document).mouseup(function(e){if($("geo-vehicle-conditions-panel .geo-vehicle-conditions").length>0){var container=$(".geo-vehicle-condition-items.active");var fitmentMsg=$(".may-fit .geo-fitment-type-msg");let isMayFit=false;$(fitmentMsg).each(function(i,fm){if($(fm).is(e.target)&&$(fm).has(e.target).length>0){isMayFit=true;return false;}});if(!container.is(e.target)&&container.has(e.target).length===0&&!isMayFit){container.removeClass("active");}}});$(document).ready(function(){$(".geo-overlay-item").click(function(){var $this=$(".geo-overlay-item.active");if($(this).hasClass("active")){$(this).removeClass("active");$(".geo-overly-background.header-visible").removeClass("open");$("body").css("overflow","auto");}else{$this.removeClass("active");$(this).addClass("active");$(".geo-mega-menu-wrapper").removeClass("geo-mega-menu-wrapper-open");$(".geo-overly-background.header-visible").removeClass("open");$("body").css("overflow","auto");}});});$(document).ready(function(){$(".geo-menu-item").click(function(){var $this=$(".geo-menu-item.active");if($(this).hasClass("active")){$(this).removeClass("active");$(".geo-overly-background.header-visible").removeClass("open");$("body").css("overflow","auto");}else{$this.removeClass("active");$(this).addClass("active");$(".geo-mega-menu-wrapper").removeClass("geo-mega-menu-wrapper-open");$(".geo-overly-background.header-visible").removeClass("open");$("body").css("overflow","auto");}});});$(document).mouseup(function(e){var $target=$(e.target);if(!$target.closest(".geo-menu-item").length){$(".geo-menu-item").removeClass("active");}});$(document).mouseup(function(e){var $target=$(e.target);if(!$target.closest(".geo-mega-menu-wrapper, .geo-hamburger, .geo-select-vehicle-wrapper, .geo-mega-menu-hamburger-proxy").length){$(".geo-mega-menu-wrapper").removeClass("geo-mega-menu-wrapper-open");$(".geo-hamburger.geo-hamburger-txt p").removeClass("active");$(".geo-overly-background.header-visible").removeClass("open");$(".geo-overly-background.header-visible").css("opacity","0");$("body").css("overflow","auto");$("body").css("padding-right","0");$("#geo-mega-menu").css("margin-left","-100%");$(".geo-hamburger").removeClass("geo-hamburger-close");}});