var testRegex=/^(?=(.*[0-9]){1})(?=(.*[A-Z]){1})(?=(.*[a-z]){1}).+$/;var ccSeparator="  ";var dateSeparator="/";var debug=true;var totalRecords;var storeSet=1;var isUsingZip=false;var changedZip="";var cartItemsObj;var globalSearchValue="";var sortByApplied={defalutSortBy:"Yes",appliedSortBy:"No",sortByValue:"Sort By Relevance"};var lt=/</g,gt=/>/g,ap=/'/g,ab=/&/g,ic=/"/g;function htmlDecode(input){var doc=new DOMParser().parseFromString(input,"text/html");return doc.documentElement.textContent;}var regex=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;$(document).on("geo_newcatergorycarouseldate",function(e){var catergorycarousel=e.originalEvent.detail.id;if(e.keyCode==13){$("#"+catergorycarousel)[0].children[0].click();}});$("shopallcategorybackurl").on("keypress",function(e){if(e.keyCode==13){$("#shopallcategorybackurl")[0].children[0].click();}});function newNavMenu(){let navMenutopHeight=0;let visibleElements=$(".smsContainer.nol-ui.sms-responsive").filter(function(){return $(this).css("display")==="block";});if(visibleElements.length&&visibleElements.length>0&&visibleElements[0]&&visibleElements.find(".smsWraper")[0].role&&visibleElements.find(".smsWraper")[0].role=="banner"){navMenutopHeight=visibleElements.find(".smsWraper").height()+$(".fixed-header").height();}else{navMenutopHeight=$(".fixed-header").height();}const propBanner=document.querySelector(".nol-ui.ways");if(propBanner){if(propBanner.childNodes&&propBanner.childNodes.length){const propContainer=propBanner.childNodes[0];if(propContainer){navMenutopHeight+=$(".nol-ui.ways").height();}}}if($(".geo-sub-menu")[0]!=undefined){$(".geo-sub-menu")[0].style.top=navMenutopHeight+"px";}if($(".geo-sub-menu")[1]!=undefined){$(".geo-sub-menu")[1].style.top=navMenutopHeight+"px";}if($(".geo-sub-menu")[2]!=undefined){$(".geo-sub-menu")[2].style.top=navMenutopHeight+"px";}if($(".geo-sub-menu")[3]!=undefined){$(".geo-sub-menu")[3].style.top=navMenutopHeight+"px";}if($(".geo-sub-menu")[4]!=undefined){$(".geo-sub-menu")[4].style.top=navMenutopHeight+"px";}}$(document).ready(function(){if($_gmRestrictions=="US"&&window._geo_service_config.enableNewMenuNavigation==="true"){newNavMenu();window.setInterval(function(){newNavMenu();},60);}});function trackAnalyticsNavMenu(tab,section,selectedItem){var vClicksTrackEvent={eventInfo:{eventName:"menuItemClicked",tab:tab.replace("&amp;","&"),section:section,text:selectedItem,timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(vClicksTrackEvent);try{analytics.sendCustomEvent("menuItemClicked");}catch(error){console.error("trackAnalyticsNavMenu ",error);}}$(document).ready(function(){let section="";let tab="";let selectedItem="";$(".geo-sub-menu img").click(function(e){try{if(window._geo_service_config.enableNavigationMenuAnalytics==="true"){if($(".nav-ribbon-header.active").length>0){tab=$(".nav-ribbon-header.active").find("strong")[0].innerText.toLowerCase();}if($(this).closest("div").length>0&&(($(this).closest("div").length>0&&$(this).closest("div")[0].classList.value.indexOf("img-container")!==-1)||($(this).closest("div")[0].classList&&$(this).closest("div")[0].classList[0].indexOf("img")!==-1))){section="shop now";selectedItem=e.target.alt;}trackAnalyticsNavMenu(tab,section,selectedItem);}}catch(error){console.error("trackAnalyticsNavMenu img's",error);}});$(".geo-sub-menu h4").click(function(e){try{if(window._geo_service_config.enableNavigationMenuAnalytics==="true"){if($(".nav-ribbon-header.active").length>0){tab=$(".nav-ribbon-header.active").find("strong")[0].innerText.toLowerCase();}if($(this).closest("div").length>0&&(($(this).closest("div")[0].classList.value.includes("shop"))||($(this).closest("div")[0].classList.length>0&&$(this).closest("div")[0].classList[0].value.includes("shop")))){section="shop now";selectedItem=e.target.innerText;}trackAnalyticsNavMenu(tab,section,selectedItem);}}catch(error){console.error("trackAnalyticsNavMenu h4",error);}});$(".geo-sub-menu a").click(function(e){try{if(window._geo_service_config.enableNavigationMenuAnalytics==="true"){if($(".nav-ribbon-header.active").length>0){tab=$(".nav-ribbon-header.active").find("strong")[0].innerText.toLowerCase();}if($(this).closest("div").length>0&&$(this).closest("div")[0].classList.value==="nav-popular-section"){section=$(this).closest("div").find("strong")[0].innerText.toLowerCase();}if($(this).closest("div.nav-row-group").length>0&&$(this).closest("div.nav-row-group")[0].classList.value==="nav-row-group"){section="popular category";}if(e.target.href&&e.target.href.includes("/replacement-parts")&&section==="popular category"){let menuNavText=e.target.href.split("/replacement-parts")[1].split("/").reverse();if(e.target.innerText.toLowerCase()==="more"){selectedItem=menuNavText[1].charAt(0).toUpperCase()+menuNavText[1].slice(1)+" > "+e.target.innerText.toLowerCase();}else{if(e.target.innerText.toLowerCase().includes("show all")){selectedItem=tab+" > show all categories";}else{if(menuNavText[2]!==undefined&&menuNavText[2]!==""){selectedItem=menuNavText[2].charAt(0).toUpperCase()+menuNavText[2].slice(1)+" > "+e.target.innerText;}else{selectedItem=e.target.innerText;}}}}else{if(e.target.href&&e.target.href.includes("/accessories")&&section==="popular category"){let menuNavText="";if($(this).closest("ul")[0]&&$(this).closest("ul")[0].previousElementSibling!==null&&$(this).closest("ul")[0].previousElementSibling.innerText){menuNavText=$(this).closest("ul")[0].previousElementSibling.innerText;}if(e.target.innerText.toLowerCase()==="more"){selectedItem=menuNavText[1].charAt(0).toUpperCase()+menuNavText[1].slice(1)+" > "+e.target.innerText.toLowerCase();}else{if(e.target.innerText.toLowerCase().includes("show all")){selectedItem=tab+" > show all categories";}else{if(menuNavText.length>0){selectedItem=menuNavText.charAt(0).toUpperCase()+menuNavText.slice(1)+" > "+e.target.innerText;}else{selectedItem=e.target.innerText;}}}}else{selectedItem=e.target.innerText;}}if(tab!==""&&section!==""&&selectedItem!==""){trackAnalyticsNavMenu(tab,section,selectedItem);}}}catch(error){console.error("trackAnalyticsNavMenu links",error);}});});$(document).ready(function(){if($(".geo-nav-bar:first").length>0){$(".geo-nav-bar:first").addClass("geo-nav-bar-scroll");}$("body.nol-ui .modal-dialog.md, body .nol-ui .modal-dialog").click(function(e){if(e.target.id==="regulated-restricted"){let closeRestrictedModal=document.getElementById("regulated-restricted");if(closeRestrictedModal.classList.length>0){$("#checkoutCancel").click();}}});$("#bopisOrderSmsupdates").on("change",function(e){let isCheckedOrderUpdateSms=document.getElementById("bopis-text-me-order-updates").checked;document.getElementById("bopis-text-me-order-updates").checked=!isCheckedOrderUpdateSms;});$("#skipContent").click(function(){document.getElementById("mainContent").focus();});$("#checkactivebox").on("click",function(){$(".geo-sort-dropdown-content").hide();});$("#skipContent").focusout(function(){$("div.geo-hamburger-icon").focus();});$("div").on("focusout",".geo-hamburger-icon",function(){$("a.geo-logo-attr").focus();});$("div").on("keydown",".geo-logo-attr",function(e){var keyCode=e.keyCode||e.which;let isTabPressed=e.key==="Tab"||keyCode===9;if(!isTabPressed){return;}if(e.shiftKey){$("div.geo-hamburger-icon").focus();e.preventDefault();}});$("div").on("keydown","#backToCart",function(e){if(window._geo_service_config.enableCheckoutPageRegulationAndRestrictionsModal==="true"){var keyCode=e.keyCode||e.which;let isTabPressed=e.key==="Tab"||keyCode===9;if(!isTabPressed){return;}if(e.shiftKey||isTabPressed){$("#regulated-restricted").focus();e.preventDefault();}}});$("div").on("keydown",".geo-hamburger-icon",function(e){var keyCode=e.keyCode||e.which;let isTabPressed=e.key==="Tab"||keyCode===9;if(!isTabPressed){return;}if(e.shiftKey){$("#skipContent").focus();e.preventDefault();}});$("div").on("keydown",".napa-lang-hdrsection",function(e){var keyCode=e.keyCode||e.which;let isTabPressed=e.key==="Tab"||keyCode===9;if(!isTabPressed){return;}if(e.shiftKey){$(".geo-localization-link").removeClass("open");$(".geo-localization-link").attr("aria-expanded","false");return;}});$("div").on("focusout",".geo-localizedlang-list-item",function(e){if(e.target.attributes&&e.target.attributes[2].value==="ca-fr"){$(".napa-lang-hdrsection").attr("aria-expanded","false");$(".geo-localization-link").removeClass("open");$(".geo-localization-link").attr("aria-expanded","false");}});$("div").on("keydown","#myStoreSection",function(e){var keyCode=e.keyCode||e.which;let isTabPressed=e.key==="Tab"||keyCode===9;if(!isTabPressed){return;}if(e.shiftKey){$(".my-menu-a").removeClass("my-menu-open");$(".my-menu-a").attr("aria-expanded","false");$(".napa-lang-hdrsection").attr("aria-expanded","false");return;}});$("body").on("click",".my-menu",function(){if($(this).parents(".my-menu")){$(".my-menu-a").attr("aria-expanded","true");}});$("div").on("focusout","#adaAutoCare",function(){$(".my-menu-a").attr("aria-expanded","false");$(".napa-store-hdrsection").removeClass("my-menu-open");});});$(document).ready(function(){if(window.location.href.includes("giftcards")){$("meta[name=robots]").attr("content","NoIndex,nofollow");}$("body").on("blur","#store-search-input",function(e){globalSearchValue=$(this).val();});$("body").on("click",".featherlight-close-icon",function(){if($(this).parents("#napaStoreLocator").length>0){globalSearchValue="";}});$("body").on("click",".listing-more-toggle",function(e){$(this).siblings("div.listing-more-detail-content").toggle(200);});var priceBlock=0;var promoBlock=0;var detailBlock=0;var msgBlock=0;$(".compare-item .listing-price-block").each(function(){priceBlock=$(this).outerHeight()>priceBlock?$(this).outerHeight():priceBlock;});$(".compare-item .listing-price-block").height(priceBlock);$(".compare-item .listing-price-promos").each(function(){promoBlock=$(this).outerHeight()>promoBlock?$(this).outerHeight():promoBlock;});$(".compare-item .listing-price-promos").height(promoBlock);$(".compare-item .listing-detail").each(function(){detailBlock=$(this).outerHeight()>detailBlock?$(this).outerHeight():detailBlock;});$(".compare-item .listing-detail").height(detailBlock);$(".compare-item .msg-block").each(function(){msgBlock=$(this).outerHeight()>msgBlock?$(this).outerHeight():msgBlock;});$(".compare-item .msg-block").height(msgBlock);$(".estimated-delivery").on("click",function(e){var deliveryValue=$(this).data("displaydeliverydate");$(this).closest(".shipping-options-container").find(".delivery-date").text(deliveryValue);});cartItemsObj=setCartItemsMessages();const universalCartFlag=$("#universalCartFlag").val();var aagCartRedirectUrl;const emptyCartFlag=$("#nol-empty-cart").val();if(universalCartFlag||emptyCartFlag){populateAccessoriesCartData();}updateCcpaStyling();compareCartItemMessages();if($("#vehConditions").size()>0&&window.location.href.indexOf("isBackButtonEnabled")<0){var paramSeparator=getParamSeparator();var newUrl=window.location.href+paramSeparator+"isBackButtonEnabled=true";history.replaceState({},"",newUrl);}if(typeof Parsley!="undefined"){Parsley.on("field:validated",function(fieldInstance){if(fieldInstance.$element.is(":hidden")){fieldInstance._ui.$errorsWrapper.css("display","none");fieldInstance.validationResult=true;return true;}if(fieldInstance.$element.closest("form").attr("id")==="gift-card-form"){return false;}if($("#checkoutPageAttr").val()&&!($("body").hasClass("modal-fixed"))){if(fieldInstance.$element.closest("form").parsley().isValid()){fieldInstance.$element.closest("form").find("button").removeClass("dark-grey").attr("disabled",false);}else{fieldInstance.$element.closest("form").find("button").addClass("dark-grey").attr("disabled",true);}updateReviewOrderButtonStatus();}});$("form[data-parsley-validate='true'] button[type='submit']").click(function(e){$(".error-messages").each(function(){var isVisibleCheckbox=$(this).prev().find("input[type='checkbox'] + label").is(":visible");var isVisibleRadio=$(this).prev().find("input[type='radio'] + label").is(":visible");if($(this).prev("input[data-parsley-id]").is(":visible")||isVisibleCheckbox||isVisibleRadio){$(this).show();}});if(!$(this).closest("form").parsley().validate()){e.stopPropagation();}});window.Parsley.addValidator("noPoBox",{validateString:function(value){var poBoxTest=!/^ *((#\d+)|((box|bin)[-. \/\\]?\d+)|(.*p[ \.]? ?(o|0)[-. \/\\]? *-?((box|bin)|b|(#|num)?\d+))|(p(ost)? *(o(ff(ice)?)?)? *((box|bin)|b)? *\d+)|(p *-?\/?(o)? *-?box)|post office box|((box|bin)|b) *(number|num|#)? *\d+|(num|number|#) *\d+)/i.test(value);return poBoxTest;},messages:{en:"Please enter a street address. We do not ship to P.O. boxes.",es:"Por favor introduce una dirección con calle. No enviamos a apartados de correos.",fr:"Please enter a street address. We do not ship to P.O. Boxes."}});if(navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)){window.Parsley.on("form:validate",function(form){if(!form.isValid()){for(var n=0;n<form.fields.length;n++){if(form.fields[n].validationResult!==true){if(window.navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)){window.setTimeout(function(){var adjustment_ht=0;if($(".header-fixed .nol-header").outerHeight()>0){adjustment_ht=$(".header-fixed .nol-header").outerHeight();}$("html,body").animate({scrollTop:($(form.fields[n].$element[0]).offset().top-adjustment_ht)});},0);}break;}}}});}}initModals();displayHoverText();initCcMask();initPhoneMask();initCcExpDateMask();function updateReviewOrderButtonStatus(){var $ccPaymentForm=$("form#creditCardFormPayment.nol-form.creditcardform");if($ccPaymentForm.length===0){$ccPaymentForm=$("form#creditCardFormPayment.nol-form.creditCardForm");}var $ccBillingForm=$("form#guestAddNewAddressPaymentForm.nol-form");if($ccPaymentForm.is(":visible")){var ccFormvalid;if($ccBillingForm.is(":visible")){ccFormvalid=$ccBillingForm.parsley().isValid()&&$ccPaymentForm.parsley().isValid();}else{ccFormvalid=$ccPaymentForm.parsley().isValid();}if(ccFormvalid){$(".btn-checkout-next-payment").removeClass("dark-grey").attr("disabled",false).addClass("yellow");}else{$(".btn-checkout-next-payment").addClass("dark-grey").attr("disabled",true).removeClass("yellow");}}}window.Parsley.addValidator("birthday",{validateString:function(value){var month=$("#birthMonth").val();var day=$("#birthDay").val();if((month===""&&day==="")||(month!==""&&day!=="")){return true;}else{return false;}},messages:{en:"Invalid"}});$(".nol-ui .nol-button").on("click",function(){var btn=this;setTimeout(function(){btn.disabled=true;if($.active==0){setTimeout(function(){btn.disabled=false;},1900);}else{$(document).on("ajaxStop.enableBtn",function(){btn.disabled=false;$(document).off("ajaxStop.enableBtn");});}},100);});$(".nol-ui .nol-form input").on("keypress",function(e){if(e.keyCode==13){e.preventDefault();$(this).closest("form").find('button[type="submit"]').click();}});$("#btn-rewards-activation-code").click(function(e){e.preventDefault();if(!$(this).closest("form").parsley().validate()){return false;}else{e.preventDefault();$(this).closest("form").submit();}});$(document).ready(function(){window.Parsley.on("field:error",function(){var adaID=this.$element.attr("data-parsley-id");this.$element.attr("aria-describedby","parsley-id-ada-"+adaID);this.$element.attr("aria-required","true");this.$element.attr("aria-invalid","true");this.$element.next().find("p").attr("id","parsley-id-ada-"+adaID);setTimeout(function(){$(".error-message.parsley-required").first().click();},4000);});window.Parsley.on("field:success",function(){if(this.$element.attr("aria-invalid")){this.$element.removeAttr("aria-invalid");}});});$("#rightRail .checkout-promo-heading").keypress(function(e){if((e.keycode||e.which)==13){$(this).click();}});$("#rightRail, .box,.order-summary-wrap").on("click",".checkout-promo",function(e){e.preventDefault();e.stopPropagation();if(!$(this).hasClass("aaaApplied")){$(".promo-input-field-container").toggleClass("hidden-elem");$(this).toggleClass("open");$("#cartPagePromo").attr("aria-expanded",$("#cartPagePromo").attr("aria-expanded")==="true"?"false":"true");}$('[rel="removed-coupon"]').hide();});$("#rightRail, .box,.order-summary-wrap").on("click",".change-zip, .zip-cancel",function(e){e.preventDefault();e.stopPropagation();$(".zip-input-field-container").toggleClass("hidden-elem");});$("#rightRail, .box,.order-summary-wrap").on("click",".aaa-promo",function(e){e.preventDefault();e.stopPropagation();$(".aaa-input-field-container").toggleClass("hidden-elem");$(this).toggleClass("open");$("#cartPageAAAMembership").attr("aria-expanded",$("#cartPageAAAMembership").attr("aria-expanded")==="true"?"false":"true");$('[rel="removed-aaa"]').hide();});$("#cartPagePromoDiv,#cartPagePromo").keydown(function(e){var code=e.keyCode||e.which;if(code==13){$("#cartPagePromoDiv").click();}});$("#cartPageAAAMembershipDiv,#cartPageAAAMembership").keydown(function(e){var code=e.keyCode||e.which;if(code==13){$("#cartPageAAAMembershipDiv").click();}});$('[rel="apply_coupon"]').on("click",function(){alert("aplly coupon here");});var cartUrl=NAPA.config.encodedContextPath+"/cart";$(" #redirectToCart").attr("href",cartUrl);$(".missingConditions").click(function(){var elm=$(".veh-select-field .input-dropdown .vcautocomplete:first, .veh-condition:first");if(elm.size()>0){elm.attr("id","firstSelect");setTimeout(function(){document.getElementById("firstSelect").focus();},300);}});$(".cancel-edit").on("click",function(evt){evt.preventDefault();$(this).parents(".form-margin-top").find(".editing").removeClass("editing");$(this).parents(".form-margin-top").find(".user-info-data").removeClass("hidden-elem");$(this).parents(".form-margin-top").find(".user-data-fields").addClass("hidden-elem");$(this).parents(".form-margin-top").find(".edit-link").removeClass("hidden-elem");});$(".edit-link").on("click",function(evt){evt.preventDefault();$(this).parents(".form-margin-top").find(".editing").addClass("editing");$(this).parents(".form-margin-top").find(".user-info-data").addClass("hidden-elem");$(this).parents(".form-margin-top").find(".user-data-fields").removeClass("hidden-elem");$(this).addClass("hidden-elem");});$(".saveProfile").on("click",function(evt){var idSelected=$("input[name=skillLevel]:checked").val();var skillLevelVal=$("label[for='"+idSelected+"']").text();$("#skillLevelVal").val(skillLevelVal);});$(".radio-tagger-mobile, #promoEmailCheckbox, .radio-tagger").on("change",function(){$(".ajax-loader.hide").css({display:"block",top:"10%"});setTimeout(function(){$("#formSubmit").click();$(".ajax-loader.hide").css({display:"none",top:"10%"});},100);});$(".showHidePassword").click(function(){$(this).find(".showPassW").toggleClass("hidden-elem");$(this).find(".hidePassW").toggleClass("hidden-elem");var passwordFild=$(this).siblings("input").length>0?$(this).siblings("input"):$(".passwordElement");if(passwordFild.attr("type")=="password"){passwordFild.attr("type","text");}else{passwordFild.attr("type","password");}});var urlParams=new URLSearchParams(window.location.search);if(urlParams.get("change-store")){setTimeout(function(){$(".bopis-link").trigger("click");},1000);}$("#cart-change-store-link").click(function(){$(".bopis-link").trigger("click");});if($_gmRestrictions!="CA"){window.addEventListener("scroll",function perform(){if(window.innerWidth<897&&$(".nol-block-shipping-options").length&&$(".nol-block-shipping-options").hasClass("active")){var elements=document.getElementsByClassName("shipping-section");for(var i=0;i<elements.length;i++){var startPoint=elements[i].parentElement.offsetTop;var currentPoint=window.scrollY;var parent=elements[i].parentElement.parentElement;var next=elements[i+1]?elements[i+1].offsetHeight:50;var breakPoint=parent.offsetTop+parent.offsetHeight-next;if(parent.classList.contains("checkout-shipping-section")&&document.getElementsByClassName("checkout-shipping-section").length>1){if(currentPoint>startPoint&&currentPoint<breakPoint){elements[i].classList.add("section-sticky");elements[i].classList.remove("hidden-elem");}else{elements[i].classList.add("hidden-elem");elements[i].classList.remove("section-sticky");}}if($(".nol-block-shipping-options").next()&&$(".checkout-shipping-section").length){if(currentPoint>$(".nol-block-shipping-options").next().offset().top||currentPoint<$(".checkout-shipping-section")[i].offsetTop){elements[i].classList.remove("hidden-elem");}}}}});}});function initModals(selector){if(selector==null){selector="";}$(selector+" .modal-open").on("click",function(e){var modal=new NolModal($(this).data("modal"));modal.init(e);});}function formatUsPhoneNumber(phoneInput){if(phoneInput==null){return"";}var strippedVal=phoneInput.replace(/[^0-9]/g,"");strippedVal=strippedVal.substring(0,10);var formatted="";if(strippedVal.length>0){formatted="("+strippedVal.substring(0,3);}if(strippedVal.length>3){formatted+=") "+strippedVal.substring(3,6);}if(strippedVal.length>6){formatted+="-"+strippedVal.substring(6,10);}return formatted;}function insertSeparators(ccInputVal,maxLen,groupLengthsArr,separatorStr){var ccVal=ccInputVal.replace(/[^0-9]/g,"");var newCcVal="";ccVal=ccVal.substring(0,maxLen);var sepsIdxesArr=[],tempSum=0;for(var i=0,len=groupLengthsArr.length-1;i<len;i++){tempSum+=groupLengthsArr[i];sepsIdxesArr.push(tempSum);}sepsIdxesArr.splice(0,0,0);for(var i=1,len=sepsIdxesArr.length;i<len;i++){if(ccVal.length>=sepsIdxesArr[i]){newCcVal+=(i>1?separatorStr:"")+ccVal.substring(sepsIdxesArr[i-1],sepsIdxesArr[i]);}}if(ccVal.length<sepsIdxesArr[1]){newCcVal=ccVal;}else{if(jQuery.inArray(ccVal.length,sepsIdxesArr)==-1){var closestChunk;for(var i=0,len=sepsIdxesArr.length;i<len;i++){if(sepsIdxesArr[i]<ccVal.length){closestChunk=i;}}newCcVal+=separatorStr+ccVal.substring(sepsIdxesArr[closestChunk],ccVal.length);}}return newCcVal;}function initPhoneMask(selector){phoneinputmask=new function(){if(selector==null){selector="";}var $phoneInput=$(selector+" [data-nol-phone]");var self=this;var init=function(){$phoneInput.each(function(){$(this).val(formatUsPhoneNumber($(this).val()));});$phoneInput.off("input.phonemask");$phoneInput.on("input.phonemask",function(e){var jsElem=document.activeElement;var start=GetCaretPosition(jsElem);setTimeout(function(){repositionCaret(jsElem,/[^0-9]/,start,e.which);},0);var newVal=formatUsPhoneNumber($(this).val());if(newVal.replace(/[^0-9() -]/g,"")!=$(this).val()){$(this).val(newVal);}});};return{init:init};};phoneinputmask.init();}function initCcExpDateMask(){expdateinputmask=new function(){var expDateInput=$("[data-ccexp-date]");var self=this;var init=function(){};return{init:init};};expdateinputmask.init();}function initCcMask(){ccinputmask=new function(){var ccInput=$("[data-cc]");var self=this;var acceptedcards=["visa","mastercard","discover","amex","diners_club_carte_blanche","diners_club_international"];if($_gmRestrictions=="CA"){acceptedcards=["visa","mastercard"];}var init=function(){ccInput.on("input",function(e){ccInput.validateCreditCard(function(result){if($(this).data("cb").length){var callbackFn=window[$(this).data("cb")];if(typeof callbackFn==="function"){callbackFn(result);}}if(result.card_type!=null&&result.card_type!="uatp"){var maxLength=0;var i;for(i=0;i<result.card_type.valid_length.length;i++){if(result.card_type.valid_length[i]>maxLength){maxLength=result.card_type.valid_length[i];}}ccInput.attr("maxlength",maxLength);}else{ccInput.attr("maxlength",20);}},{accept:acceptedcards,territory:$_gmRestrictions});ccInput.off("input");});};return{init:init};};ccinputmask.init();}function repositionCaret(targetElem,allowedCharsRegex,previousCaret,keyPressed){if(keyPressed==37||keyPressed==39){return;}var caretPos=previousCaret;var textVal=targetElem.value;while(allowedCharsRegex.test(textVal.substring(caretPos-1,caretPos))){caretPos++;}targetElem.selectionStart=caretPos;targetElem.selectionEnd=caretPos;}function GetCaretPosition(ctrl){var CaretPos=0;if(document.selection){ctrl.focus();var Sel=document.selection.createRange();Sel.moveStart("character",-ctrl.value.length);CaretPos=Sel.text.length;}else{if(ctrl.selectionStart||ctrl.selectionStart=="0"){CaretPos=ctrl.selectionStart;}}return(CaretPos);}function displayHoverText(){$(".icon").on("touchstart",function(e){e.preventDefault();$(this).find(".hover-text").toggleClass("visible");});$("body").on("touchstart",debounce(function(e){if(!$(e.target).hasClass("icon")){$(this).find(".hover-text").removeClass("visible");}else{$(".icon .hover-text").not($(e.target).find(".hover-text")).removeClass("visible");}},50));}function logger(logtype,logmessage,file,method){var apiurl="/api/log/event",debug=true;var beaconHeader={type:"application/json"};var logMsg="";if(typeof logmessage==="object"){if(debug!=="true"&&debug!==true&&logtype!="E"){delete logmessage.request;delete logmessage.response;}logMsg=Object.entries(logmessage).map(function(x){return x.join(":");}).join(" | ");}else{logMsg=logmessage.toString();}if(apiurl){var data={Log:[{level:logtype,event:"ClassName="+file+" | FunctionName="+method+" | RequestResponse="+logMsg}]};var beaconInfo=new Blob([JSON.stringify(data)],beaconHeader);if(typeof navigator.sendBeacon==="function"){navigator.sendBeacon(apiurl,beaconInfo);}else{fetch(apiurl,{headers:headers,body:JSON.stringify(data),method:"post"});}return;}}function NolModal(modalId){var self=this;this.$modal=$("#"+modalId);this.init=function(e){$("body").addClass("modal-fixed");this.open(e);this.$modal.find(".modal-wrap").on("click",function(e){e.stopPropagation();});this.$modal.find(".modal-close").on("click",function(e){self.close(e);});this.$modal.on("click",function(e){self.close(e);});};this.open=function(e){e.preventDefault();this.$modal.addClass("open");this.toggleDisabled(false);function setMobileModalHeight(){if(isUserOnMobile()){self.$modal.find(".modal-wrap").css("height",window.innerHeight);}else{self.$modal.find(".modal-wrap").css("height","");}}setMobileModalHeight();$(window).on("resize",debounce(function(){setMobileModalHeight();},250));var inputs=this.$modal.find("select, input, textarea, button, a").filter(":visible");var firstInput=inputs.first();var lastInput=inputs.last();setTimeout(function(){lastInput.focus();},100);lastInput.off("keydown.tabhelp").on("keydown.tabhelp",function(e){if((e.which===9&&!e.shiftKey)){e.preventDefault();firstInput.focus();}});firstInput.off("keydown.tabhelp").on("keydown.tabhelp",function(e){if((e.which===9&&e.shiftKey)){e.preventDefault();lastInput.focus();}});};this.close=function(e){e.preventDefault();this.$modal.removeClass("open");$("body").removeClass("modal-fixed");this.$modal.find('input[type="text"],input[type="tel"],input[type="email"],input[type="password"]').each(function(){$(this).val("");});this.$modal.find('input[type="checkbox"]').each(function(){$(this).attr("checked",false);});this.$modal.find("select").each(function(){$(this).find("option")[0].selected=true;});this.$modal.find("input:radio").prop("checked",false);try{this.$modal.find("form").parsley().reset();}catch(e){}this.$modal.find(".modal-hide-on-close").hide();};this.toggleDisabled=function(isEnabled){this.$modal.find(".nol-button").each(function(){this.disabled=isEnabled;});};}function animateToNextBlock($currBlock,$nextBlock,callbackFn,callbackParamsArr,mainColumnClass,contentClass,summaryViewClass,editViewClass,staticContentClass){var $staticContent=$nextBlock.find(staticContentClass);if($staticContent.length>0&&$staticContent.hasClass("hidden-elem")){showHideElement($staticContent,null,null,null,animateHelper,[$currBlock,$nextBlock,callbackFn,callbackParamsArr,mainColumnClass,contentClass,summaryViewClass,editViewClass]);}else{animateHelper($currBlock,$nextBlock,callbackFn,callbackParamsArr,mainColumnClass,contentClass,summaryViewClass,editViewClass);}}function animateHelper($currBlock,$nextBlock,callbackFn,callbackParamsArr,mainColumnClass,contentClass,summaryViewClass,editViewClass){var animLength=500;if(callbackFn==null){callbackFn=function(){};}var $mainCol=$(mainColumnClass);$mainCol.css("height","");var $content=$currBlock.find(contentClass).first();var $summary=$currBlock.find(summaryViewClass).first();var editHeightTotal=calcHeight($content);var summaryHeightTotal=calcHeight($content)+calcHeight($summary)-calcHeight($content.find(editViewClass));var $nextContent=$nextBlock.find(contentClass).first();var $nextSummary=$nextBlock.find(summaryViewClass).first();var nextSummaryHeight=calcHeight($nextSummary);var nextContentHeight=calcHeight($nextContent);var nextEditHeightTotal=nextContentHeight+calcHeight($nextContent.find(editViewClass));if($nextSummary.is(":visible")){nextEditHeightTotal-=nextSummaryHeight;}var newMainColHeight=calcHeight($mainCol);newMainColHeight+=(summaryHeightTotal-editHeightTotal);newMainColHeight+=nextEditHeightTotal-nextContentHeight;$content.css("height",calcHeight($content));$mainCol.animate({height:newMainColHeight},animLength);setTimeout(function(){try{$content.removeAttr("style");$nextContent.removeAttr("style");$mainCol.removeAttr("style");}catch(e){}},animLength*2);$currBlock.find(editViewClass).first().slideUp(animLength);$content.animate({height:summaryHeightTotal},animLength);$summary.slideDown(animLength);if($nextBlock.length>0){$nextContent.css("height",calcHeight($nextContent));$nextSummary.slideUp(animLength);$nextContent.animate({height:nextEditHeightTotal},animLength);$nextBlock.find(editViewClass).first().slideDown(animLength,function(){$("body").animate({scrollTop:$nextBlock.offset().top});callbackFn.apply(this,callbackParamsArr);});$currBlock.removeClass("active");$nextBlock.addClass("active");if($nextSummary.length==0&&$nextContent.length==0){callbackFn.apply(this,callbackParamsArr);}}else{callbackFn.apply(this,callbackParamsArr);}}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args);}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};}function calcHeight($elem){var previousCss=$elem.attr("style");$elem.css({visibility:"hidden",display:"block"});var optionHeight=$elem.outerHeight();$elem.attr("style",previousCss?previousCss:"");return optionHeight;}function showHideElement($elem,e,$clickedElemToHide,doShow,callback,callbackArgs){$elem.finish();function applyCallback(isClickedElem){var clickedElemProvided=true;if(!isClickedElem){clickedElemProvided=$clickedElemToHide!=null;}if(!clickedElemProvided&&callback!=null){callback.apply(this,callbackArgs);}}if(e!=null){e.preventDefault();}if((doShow||doShow==null)&&$elem.hasClass("hidden-elem")){$elem.css("display","none");$elem.removeClass("hidden-elem");$elem.slideDown(function(){applyCallback(false);});}else{if((!doShow||doShow==null)&&!$elem.hasClass("hidden-elem")){$elem.css("display","block");$elem.slideUp(function(){applyCallback(false);$elem.addClass("hidden-elem");});}}if($clickedElemToHide!=null){$clickedElemToHide.slideUp(function(){applyCallback(true);});}}function checkPassword(pwInputSelector,lengthSelector,reqsSelector){var $pwInput=$(pwInputSelector);var pwInputLength=$pwInput.val().length;var $lengthCheck=$(lengthSelector);var $reqsCheck=$(reqsSelector);if(pwInputLength<2){$lengthCheck.addClass("grey");$reqsCheck.addClass("grey");$lengthCheck.removeClass("red");$lengthCheck.removeClass("green");$reqsCheck.removeClass("red");$reqsCheck.removeClass("green");}else{$lengthCheck.removeClass("grey");$reqsCheck.removeClass("grey");if(pwInputLength>=8){$lengthCheck.removeClass("red");$lengthCheck.addClass("green");}else{$lengthCheck.removeClass("green");$lengthCheck.addClass("red");}if(testRegex.test($pwInput.val())){$reqsCheck.removeClass("red");$reqsCheck.addClass("green");}else{$reqsCheck.removeClass("green");$reqsCheck.addClass("red");}}}function isUserOnMobile(){return $(window).width()<=414;}$(document).ready(function(){$("body").on("keyup","#forgot-password-input",function(e){e.preventDefault();if(e.keyCode==13){e.preventDefault();recoverPassword();}});$("#forgot-password-submit").click(function(e){e.preventDefault();recoverPassword();});var lt=/</g,gt=/>/g,ap=/'/g,ab=/&/g,ic=/"/g;function htmlDecode(input){var doc=new DOMParser().parseFromString(input,"text/html");return doc.documentElement.innerHTML;}var recoverPassword=function(){if($("#forgot-password-form").parsley().validate()==true){var divForgotPassword=$("#forgot-password-confirmation").find(".modal-content");var url=NAPA.config.encodedContextPath+"/login/pw/requestValidate";var queryValue=$("#forgot-password-input").val();$.ajax({url:url,type:"GET",data:{q:queryValue},dataType:"html",timeout:NAPA.config.globalAjaxTimeout,success:function(data){var result=DOMPurify.sanitize(data);$(divForgotPassword).html(result);$("#forgot-password").find(".modal-close").click();$("#forgot-pwd-confirm").click();},error:function(request,textStatus,error){if(textStatus==="timeout"){}}});}else{return false;}};if($(".nol-pod-wrapper").children(".yCmsContentSlot").length){var filterByParam=[];var sortByParam;var $availablebanners=[];var $allBannerPods=[];var $originalPods=[];var $allPromoPods=[];var podLimitCounter=[];$(".nol-pod-wrapper").each(function(myIndex){$(this).children(".yCmsContentSlot, .dealspromo").css("display","none");$(this).data("js-deals-id",myIndex);tmpWrapper=$(this);$bannerPod=$(".content>.deals-pod-banner");if($bannerPod.length){$bannerPod.each(function(){var tmpfilterby=$(this).data("filter-by");$(this).closest(".yCmsContentSlot").remove();var tmpPosition=parseInt($(this).data("banner-position"))||0;insertAfterObj=tmpWrapper.children(".yCmsContentSlot:eq("+(tmpPosition-2)+")");if(insertAfterObj.length&&tmpPosition>0){$("<div>",{"class":"banner-pod-container ncol-xs-12","data-filter-by":tmpfilterby}).append($(this)).insertAfter(insertAfterObj);}else{$(".nol-pod-wrapper").prepend($("<div>",{"class":"banner-pod-container ncol-xs-12","data-filter-by":tmpfilterby}).append($(this)));}});}$allBannerPods[myIndex]=$(this).children(".banner-pod-container");$originalPods[myIndex]=$(this).children(".yCmsContentSlot");$allPromoPods[myIndex]=$(this).children(".dealspromo");if($(this).hasClass("js-homepage-carousel")){podLimit=100;}else{podLimit=$(this).siblings('input[name="dealsPerPage"]').val();}if(podLimit&&podLimit<3){podLimit=3;}podLimitCounter[myIndex]=0;showMorePods=function(wrapperobj){var totalPod=wrapperobj.children(".yCmsContentSlot").length;$availablebanners[wrapperobj.data("js-deals-id")]=$("div.deals-pod-banner");wrapperobj.children(".yCmsContentSlot:lt("+((1+podLimitCounter[wrapperobj.data("js-deals-id")])*podLimit)+")").css("display","");if($availablebanners[wrapperobj.data("js-deals-id")].length){$availablebanners[wrapperobj.data("js-deals-id")].each(function(){var tmpPosition=parseInt($(this).data("banner-position"))||0;if(tmpPosition<(1+podLimitCounter[wrapperobj.data("js-deals-id")])*podLimit){$(this).parent(".banner-pod-container").show();}else{$(this).parent(".banner-pod-container").hide();}});}podLimitCounter[wrapperobj.data("js-deals-id")]++;if((podLimitCounter[wrapperobj.data("js-deals-id")]*podLimit)>totalPod){wrapperobj.children(".dealspromo").css("display","");$(".nol-showmore-deals>a.nol-button").hide();}else{wrapperobj.children(".dealspromo").css("display","none");$(".nol-showmore-deals>a.nol-button").show();}};$(".nol-showmore-deals>a.nol-button").on("click touchstart",function(e){e.preventDefault();showMorePods($(this).closest(".nol-showmore-deals").siblings(".nol-pod-wrapper"));});showMorePods($(this));nolGroupItemsWrapperClass="nol-group-items-wrapper";nolGroupItemsClass="nol-group-items";var $subCatWrapper=$("<div>",{"class":nolGroupItemsWrapperClass,"data-js-deals-id":myIndex});var $subCatItem=$("<div>",{"class":nolGroupItemsClass+" active",text:$("#dealsAllText").text(),"data-cat":"all"}).append($("<span>",{text:($(this).children(".yCmsContentSlot").length+$(this).children(".dealspromo").length)}));$subCatItem.click(function(){filterDealsBy("all",$(this));});$subCatWrapper.append($subCatItem);var filterArray=[];var buildFilters=function(){if($(this).data("filter-by")){var tmpArr001=$(this).data("filter-by").split("|");for(var i=0;i<tmpArr001.length;i++){var tmp0002=$.trim(tmpArr001[i]);if(tmp0002!=""&&tmp0002!=" "&&tmp0002!=null){if(filterArray[tmp0002]){filterArray[tmp0002]=filterArray[tmp0002]+1;}else{filterArray[tmp0002]=1;}}}}};$originalPods[myIndex].each(buildFilters);$allPromoPods[myIndex].each(buildFilters);for(var y in filterArray){$subCatWrapper.append($("<div>",{"class":nolGroupItemsClass,text:y,"data-cat":y,click:function(){filterDealsBy($(this).data("cat"),$(this));}}).append($("<span>",{text:filterArray[y]})));}if($("#deals-filter-by").length){$("#deals-filter-by").append($subCatWrapper);}else{if($(".nol-groups>.nol-group-heading").length){$(".nol-groups>.nol-group-heading.active").after($subCatWrapper);}else{$(this).prepend($("<div>",{"class":"mobile-carousel-filter ncol-xs-12"}).append($subCatWrapper));var additionalLink=$(".js-hc-all-link.deals-all-link");if(additionalLink.length>0){$(additionalLink).insertAfter($(this).find(".mobile-carousel-filter"));$(additionalLink).addClass("shop-more-link");}}}});sortDealsBy=function(param,wrapperObj){if(!param||param==""){}if(wrapperObj){var $wrapper=wrapperObj,$pods=$wrapper.find(".yCmsContentSlot");}else{var $wrapper=$(".nol-pod-wrapper"),$pods=$wrapper.find(".yCmsContentSlot");}$wrapper.children(".yCmsContentSlot, .dealspromo").css("display","none");if(param=="PLTH"){[].sort.call($pods,function(a,b){return +$(a).find(".nol-product-price-usd").text().replace("$","").replace(" ","").replace(",",".")-+$(b).find(".nol-product-price-usd").text().replace("$","").replace(" ","").replace(",",".");});}else{if(param=="PHTL"){[].sort.call($pods,function(a,b){return +$(b).find(".nol-product-price-usd").text().replace("$","").replace(" ","").replace(",",".")-+$(a).find(".nol-product-price-usd").text().replace("$","").replace(" ","").replace(",",".");});}else{if(param=="AZ"){[].sort.call($pods,function(a,b){return $(a).find(".nol-product-title").text().toUpperCase()<$(b).find(".nol-product-title").text().toUpperCase()?-1:1;});}}}$wrapper.detach(".yCmsContentSlot");$pods.each(function(){$wrapper.append(this);});$availablebanners[$wrapper.data("js-deals-id")]=$("div.deals-pod-banner");if(filterByParam[$wrapper.data("js-deals-id")]=="all"||filterByParam[$wrapper.data("js-deals-id")]==""){if(param=="PLTH"||param=="PHTL"||param=="AZ"){$wrapper.find(".banner-pod-container").remove();}else{if($availablebanners[$wrapper.data("js-deals-id")].length){$availablebanners[$wrapper.data("js-deals-id")].each(function(){var tmpPosition=parseInt($(this).data("banner-position"))||0;insertAfterObj=$wrapper.children(".yCmsContentSlot:eq("+(tmpPosition-2)+")");if(insertAfterObj.length&&tmpPosition>0){$(this).parent(".banner-pod-container").insertAfter(insertAfterObj);}else{$wrapper.prepend($(this).parent(".banner-pod-container"));}});}}}else{if($availablebanners[$wrapper.data("js-deals-id")].length){$availablebanners[$wrapper.data("js-deals-id")].each(function(){$wrapper.prepend($(this).parent(".banner-pod-container"));});}}$wrapper.prepend($wrapper.children(".dealspromo"));if(podLimitCounter[$wrapper.data("js-deals-id")]){podLimitCounter[$wrapper.data("js-deals-id")]--;}showMorePods($wrapper);return true;};filterDealsBy=function(param,thisObj){if(thisObj.closest(".nol-pod-wrapper").length){var $wrapper=thisObj.closest(".nol-pod-wrapper");}else{var $wrapper=$(".nol-pod-wrapper");}if(!param){filterByParam[$wrapper.data("js-deals-id")]="";return;}filterByParam[$wrapper.data("js-deals-id")]=param;$wrapper.children(".yCmsContentSlot, .dealspromo").css("display","none");if($wrapper.hasClass("owl-loaded")){$wrapper.owlCarousel("destroy");}$wrapper.find(".yCmsContentSlot").remove();$wrapper.find(".banner-pod-container").remove();$wrapper.find(".dealspromo").remove();filterAndAppend=function(){if(param=="all"){$wrapper.append($(this));}else{if($(this).data("filter-by")){if($(this).data("filter-by")==param){$wrapper.append($(this));}else{if($(this).data("filter-by").indexOf(param+"|")>=0||$(this).data("filter-by").indexOf("|"+param)>=0){$wrapper.append($(this));}}}}};$originalPods[$wrapper.data("js-deals-id")].each(filterAndAppend);if($allBannerPods[$wrapper.data("js-deals-id")].length){$allBannerPods[$wrapper.data("js-deals-id")].each(filterAndAppend);}if($allPromoPods[$wrapper.data("js-deals-id")].length){$allPromoPods[$wrapper.data("js-deals-id")].each(filterAndAppend);}$('[data-js-deals-id="'+$wrapper.data("js-deals-id")+'"] [data-cat]').removeClass("active");$('[data-js-deals-id="'+$wrapper.data("js-deals-id")+'"] [data-cat="'+param+'"]').addClass("active");sortDealsBy($("#deals-sortby").val(),$wrapper);if($wrapper.hasClass("js-homepage-carousel")){$wrapper.owlCarousel(homePageCarouselOptions);}return true;};$("#deals-sortby").on("change",function(){sortDealsBy(this.value);});$("#filter-by-button").on("click",function(){if($(".deals-filterby").hasClass("ncol-xs-6")){$(".deals-filterby").removeClass("ncol-xs-6").addClass("ncol-xs-12");$(this).css({width:"100%","background-color":"#FFF","text-align":"left",padding:"0 0 0 42px",border:"1px solid #ECEBE7"});$(".deals-sortby").hide();$("#deals-filter-by").show();}else{$("#deals-filter-by").hide();$(".deals-sortby").show();$(this).css({width:"","background-color":"","text-align":"",padding:"",border:""});$(".deals-filterby").removeClass("ncol-xs-12").addClass("ncol-xs-6");}});$(".nol-pod-wrapper").on("click",".nol-deals-pod:not(.soldout)",function(e){window.location=$(this).find(".nol-product-view-details>a").attr("href")||"";return false;});}if($("#countdown-wrapper").length){var dl_date=document.getElementById("countdown-wrapper").getAttribute("data-deadline");var deadline=new Date(Date.parse(dl_date));function getTimeRemaining(endtime){var t=Date.parse(endtime)-Date.parse(new Date());var seconds=Math.floor((t/1000)%60);var minutes=Math.floor((t/1000/60)%60);var hours=Math.floor((t/(1000*60*60)));return{total:t,hours:hours,minutes:minutes,seconds:seconds};}function initializeClock(id,endtime){var clock=document.getElementById(id);var hoursSpan=clock.querySelector(".hours");var minutesSpan=clock.querySelector(".minutes");var secondsSpan=clock.querySelector(".seconds");function updateClock(){var t=getTimeRemaining(endtime);if(t.hours>99){hoursSpan.innerHTML=("0"+t.hours).slice(-3);}else{hoursSpan.innerHTML=("0"+t.hours).slice(-2);}minutesSpan.innerHTML=("0"+t.minutes).slice(-2);secondsSpan.innerHTML=("0"+t.seconds).slice(-2);$("#countdown-wrapper").css("opacity","1");if(t.total<=0){clearInterval(timeinterval);}}updateClock();var timeinterval=setInterval(updateClock,1000);}initializeClock("clockdiv",deadline);}homePageCarouselOptions={loop:false,margin:10,slideBy:"page",navText:["",""],navClass:["owl-prev icon-napa-arrow-left","owl-next icon-napa-arrow-right"],itemSelector:".yCmsContentSlot",autoplay:true,autoplayTimeout:5000,autoplayHoverPause:true,responsive:{0:{items:2,stagePadding:60,nav:false,dots:false},600:{items:3,stagePadding:60,nav:false,dots:false},1000:{items:4,nav:true}},callbacks:true,onInitialize:function(){this.$element.css("visibility","hidden");},onInitialized:function(){if(this.$element.find(".owl-nav.disabled").length==0){this.$element.find(".owl-prev, .owl-next").appendTo(this.$element);}if($(".js-homecarousel-header").length){var caroselTitle=$("<div>",{"class":"ncol-xs-12"});caroselTitle.append(this.$element.find(".js-homecarousel-header"));caroselTitle.prependTo(this.$element).css("display","");}this.$element.css("visibility","visible");}};function moveNav(){$(".owl-prev, .owl-next").appendTo(".owl-stage-outer");}if($(".js-homepage-carousel").length){if($(".js-homepage-carousel.category").length){var longDesc=0;$(".category .nol-product-title").each(function(){$(this).html($(this).html().split("&nbsp;")[0]);if($(this).html().length>55){longDesc=1;}});if(longDesc){$(".js-homepage-carousel.category .nol-pod-fixed-height").css({height:"4rem"});$(".js-homepage-carousel.category .nol-products-details").css({"padding-left":"0","padding-right":"0"});}}if(!$(".js-homepage-carousel").closest(".nol-ui").length){$(".js-homepage-carousel").parent().addClass("nol-ui");}$(".js-homepage-carousel").each(function(){$(this).owlCarousel(homePageCarouselOptions);});if($("div.icon-napa-arrow-right").length>0){$("div.icon-napa-arrow-right").attr("role","button");$("div.icon-napa-arrow-right").attr("tabindex","0");$("div.icon-napa-arrow-right").attr("aria-label","Go to Next slide");}if($("div.icon-napa-arrow-left").length>0){$("div.icon-napa-arrow-left").attr("role","button");$("div.icon-napa-arrow-left").attr("tabindex","0");$("div.icon-napa-arrow-left").attr("aria-label","Go to Previous slide");}}if($("[data-content-target]").length){$("[data-content-target] .toggle-block").addClass("icon-napa-arrow-up");$("[data-content-target] .icon-napa-arrow-up").attr("aria-label","Button Expanded");if(isUserOnMobile()){document.querySelectorAll("[data-content-target]").forEach(function(button){button.addEventListener("keydown",function(evt){if(evt.keyCode==13||evt.keyCode==32){evt.preventDefault();button.querySelector(".toggle-block").click();}});});}$("[data-content-target]").on("click",".toggle-block",function(e){e.preventDefault();var c_selector=$(this).parent("[data-content-target]").data("content-target");var toggle_arrow=$(this);if(isUserOnMobile()){var label=$(this)[0].classList.value.includes("down")?"Button Expanded":"Button Collapsed";toggle_arrow.attr("aria-label",label);isAriaExp=toggle_arrow.attr("aria-expanded");newAriaExp=(isAriaExp=="false")?"true":"false";toggle_arrow.attr("aria-expanded",newAriaExp);}$("."+c_selector+",#"+c_selector).slideToggle(200,function(){if($(this).is(":hidden")){toggle_arrow.removeClass().addClass("icon-napa-arrow-down toggle-block");if(isUserOnMobile()){toggle_arrow.attr("aria-label","Button Collapsed");$(this).attr("aria-hidden","true");}}else{toggle_arrow.removeClass().addClass("icon-napa-arrow-up toggle-block");if(isUserOnMobile()){toggle_arrow.attr("aria-label","Button Expanded");$(this).attr("aria-hidden","false");}}});});$("[data-content-target] .toggle-block").each(function(){if(!$(this).is(":hidden")){if($(this).parent().data("content-target")!="js-product-safety"){$(this).click();}}});}$('#napa-localization,[rel="napa-localization"]').click(function(){if($(this).hasClass("active")){$(this).removeClass("active");}else{$(this).addClass("active");}});$(".discoverNapaLink, ul.localized-lang-list a:last").keydown(function(e){if(e.which===9&&!e.shiftKey){$("#napa-localization .localized-lang-list").toggle();$("#napa-localization").toggleClass("active");}});$(".trackOrderLink, ul.localized-lang-list a:first").keydown(function(e){if(e.which===9&&e.shiftKey){$("#napa-localization .localized-lang-list").toggle();$("#napa-localization").toggleClass("active");}});$(".track-order").click(function(){$(".track-order-desktop a").trigger("click");});$(".bold-chat-mobile").click(function(){$(".bold-chat-desktop a").trigger("click");});$(".mobile-language").click(function(){$(".mobile-language").toggleClass("mobile-language-open");});$('[rel="hamburger"]').click("nol-navigation-contain",function(){$(".navigation-items").toggleClass("active");if($(".icon-napa-list-view").length<1){$(".mobile-menu-icon").addClass("icon-napa-close");$(".mobile-menu-icon").toggleClass("icon-napa-list-view");}else{$(".mobile-menu-icon").addClass("icon-napa-close");$(".icon-napa-list-view").toggleClass("icon-napa-list-view");}});$(".icon-nav-mobile").click(function(){$(".icon-nav-mobile").toggleClass("active-nav");});$(".toggle").click(function(e){e.preventDefault();var $this=$(this);if($this.next().hasClass("show")){$(".inner").removeClass("show");$this.next().removeClass("show");$this.removeClass("active");}else{$(".inner").removeClass("show");$this.next().toggleClass("show");$this.toggleClass("active");}});$(".icon-nav-mobile").click(function(){if($(window).width()<1025){$(".navigation-item.navigation-parts").click(function(){if($(".navigation-panel-group-active").css("display")=="none"){$(".navigation-panel-selector").removeClass("navigation-panel-selector-active");}});$(".nav-panel_level2").on("click",function(event){event.preventDefault();$(this).find(".navigation-panel-group-active").toggle();event.preventDefault();$(".nav-panel_level3").find(".navigation-panel-group").css("display","none");$(".nav-panel_level4").find(".navigation-panel-group").css("display","none");});$(".nav-panel_level3").on("click",function(event){event.preventDefault();$(this).find(".navigation-panel-group-active").toggle();$(".nav-panel_level2").find(".navigation-panel-group").css("display","none");$(".nav-panel_level4").find(".navigation-panel-group").css("display","none");});$(".nav-panel_level4").on("click",function(event){event.preventDefault();$(this).find(".navigation-panel-group-active").toggle();$(".nav-panel_level3").find(".navigation-panel-group").css("display","none");$(".nav-panel_level2").find(".navigation-panel-group").css("display","none");});$(".track-order-mobile").on("click",function(event){event.preventDefault();setTimeout(function(){$(".track-order-desktop a")[0].click();},50);});$(".bold-chat-mobile").on("click",function(event){event.preventDefault();$(".bold-chat-desktop a").trigger("click");setTimeout(function(){var windowWidth=$(window).width();$("#bc-chat-container").width(windowWidth);$(window).scrollTop(0);},2500);});}});$("#rightRail, .box-,.order-summary-wrap").on("click","#btn-apply-voucher",function(e){e.preventDefault();formdata=$(this).closest('form[name="form-apply-voucher"]');$phone=$(formdata).find('input[name="voucherCode"]').val();$.ajax({url:NAPA.config.encodedContextPath+"/cart/voucher/apply",type:"POST",data:formdata.serialize(),success:function(data){if(data.message){window.location.reload(true);}else{$(".promo-error").css("display","block");adaAlertError(".promo-error:first");$("input.promo-input-field").addClass("error");}},error:function(request,textStatus,error){$("#promo-error").css("display","block");$("input.promo-input-field").addClass("error");}});});$("#rightRail, .box-,.order-summary-wrap").on("click","#removeVoucher",function(e){e.preventDefault();formdata=$(this).closest('form[name="form-remove-voucher"]');$couponCode=$(formdata).find('input[name="voucherCode"]').val();$.ajax({url:NAPA.config.encodedContextPath+"/cart/voucher/remove",type:"POST",data:formdata.serialize(),success:function(data){if(data.message){window.location.reload(true);}else{$(".promo-error").css("display","block");}},error:function(request,textStatus,error){$("#promo-error").css("display","block");}});});fnSetCookie=function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else{var expires="";}document.cookie=name+"="+value+expires+"; path=/";};var hideCAprompt=(document.cookie.indexOf("caprompt")!=-1)?true:false;setTimeout(function(){if(!hideCAprompt&&$('[rel="ip2-prompt-wrapper"]').length){$('[rel="ip2-prompt-wrapper"]').slideDown(600);}},2000);$('[rel="ip2-prompt__link"]').on("click",function(){document.cookie="caprompt";});$('[rel="ip2-prompt__close"]').on("click",function(){fnSetCookie("caprompt","caprompt",365);$('[rel="ip2-prompt-wrapper"]').detach();});localized_msgs={};using_currentlocation=0;$(document).on("click",'[rel="checkNearbyStores"]',function(){var postalCode=$(this).parents("td,.listing-item").find("span.postalCode").text();if(postalCode!=""){$(document).find("span[rel='nearByStoreSearchText']").text(postalCode);$(document).find("span[rel='nearByStoreSearchText']").data("defaultpos-postal-code",postalCode);}var myDataAtt=$(this).data();if(myDataAtt.nearbyPagetype=="PRODUCT"){try{if(_satellite){_satellite.setVar("findItLocation","product details");_satellite.track("findItNearbyStores");}}catch(e){}}if(myDataAtt.nearbyPagetype=="CART"){try{if(_satellite){_satellite.setVar("findItLocation","shopping cart");_satellite.track("findItNearbyStores");}}catch(e){}}gmPlacesSelector="checkmodal_zip";var quantity="1";var products=new Array();if($(".page-cartPage").is(":visible")||$(".page-mobile-cartPage").is(":visible")){$(".pod-wrapper").each(function(){var part;var partArr;if($(this).find(".pod-fulfilment .rol-message-wrapper .cart-fulfilment").is(":checked")||$_gmRestrictions=="CA"){part=$(this).find(".part-no").text();partArr=(part.split(/(\s+|\(|\)|\!)/)).filter(function(n){return n.trim();});}if(partArr){var partNo=partArr[1];var lineAbbrev=partArr[0];}var productUrl=$(this).find(".pod-image>img").attr("src");var productDescription=$(this).find(".product-title>a").text();var _eRecSpec=$(this).find(".part-no").attr("data-nearby-erecspecs");var data={partNumber:partNo,lineAbbrv:lineAbbrev,eRecSpecs:_eRecSpec,quantity:$(this).find(".productQty").val(),primaryImageUrl:productUrl,description:productDescription};if(data.partNumber!=undefined){products.push(data);}});}else{if($('[rel="plp-qty_'+myDataAtt.nearbyErecspecs+'"]').length){quantity=$('[rel="plp-qty_'+myDataAtt.nearbyErecspecs+'"]').val();}else{if($("#quantity"+myDataAtt.nearbyQtyentrynum).length){quantity=$("#quantity"+myDataAtt.nearbyQtyentrynum).val();}}quantity=$.isNumeric(quantity)?quantity:"1";var data={partNumber:myDataAtt.nearbyPartnumber,description:myDataAtt.nearbyDescription,primaryImageUrl:myDataAtt.nearbyImageurl,lineAbbrv:myDataAtt.nearbyLineabbr,eRecSpecs:myDataAtt.nearbyErecspecs,quantity:quantity};if(data.partNumber!=undefined){products.push(data);}}if($('.featherlight [rel="nearByStoreSearchText"]').data("defaultposPostalCode")!=""){$('.featherlight [rel="nearByStoreSearchText"]').html($('.featherlight [rel="nearByStoreSearchText"]').data("defaultposPostalCode"));}var nearByStoreRequest={nearByStores:myDataAtt.nearbyStore,eRecSpecs:myDataAtt.nearbyErecspecs,pageType:myDataAtt.nearbyPagetype,products:products,rolProductCount:products.length,totalQuantity:myDataAtt.nearbyTotalitems,loadNearByStoresUsingZipcode:false,storeSearch:{q:"",lat:myDataAtt.nearbyLat,lang:myDataAtt.nearbyLong,radius:""},storeNum:myDataAtt.nearbyFullstorenumber,startPage:storeSet,rowsPerPage:FinditNoofRows};var url=NAPA.config.encodedContextPath+"/p/nearbystores";localized_msgs={nearbySeemoredetails:myDataAtt.nearbySeemoredetails,nearbySearch:myDataAtt.nearbySearch,nearbyShopstore:myDataAtt.nearbyShopstore,nearbyUsecurrentlocation:myDataAtt.nearbyUsecurrentlocation,nearbyMystore:myDataAtt.nearbyMystore,nearbyMiaway:checkIfDefined(myDataAtt.nearbyMiaway),nearbyMi:checkIfDefined(myDataAtt.nearbyMi),nearbyChange:checkIfDefined(myDataAtt.nearbyChange),nearbyLocalInventory:checkIfDefined(myDataAtt.nearbyLocalInventory)};var $def_findStore=findNearByStore({qtyentrynum:myDataAtt.nearbyQtyentrynum,oldPrice:myDataAtt.nearbyOldprice,nearbyPagetype:myDataAtt.nearbyPagetype,AAData:AAData,req:nearByStoreRequest});$def_findStore.always(function(){$(".check-nearby-store ."+gmPlacesSelector).attr("id",gmPlacesSelector);$('[rel="checkmodal_zip-error"]').removeClass("pad-xsv-bot-sm").html("");if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(){$('[rel="user-location-near-me"], [data-rel="user-location-near-me"]').css("display","block");},function(error){$('[rel="user-location-near-me"], [data-rel="user-location-near-me"]').css("display","none");});}else{$('[rel="user-location-near-me"], [data-rel="user-location-near-me"]').css("display","none");}initializeMapAPI("initAutocomplete",gmPlacesSelector);var srhBtnData={nearbyErecspecs:myDataAtt.nearbyErecspecs,nearbyFullstorenumber:myDataAtt.nearbyFullstorenumber,nearbyLat:myDataAtt.nearbyLat,nearbyLineabbr:myDataAtt.nearbyLineabbr,nearbyLong:myDataAtt.nearbyLong,nearbyPartnumber:myDataAtt.nearbyPartnumber,nearbyQtyentrynum:myDataAtt.nearbyQtyentrynum,nearbyStore:myDataAtt.nearbyStore,nearbyTotalitems:myDataAtt.nearbyTotalitems,nearbyOldprice:myDataAtt.nearbyOldprice,nearbyPagetype:myDataAtt.nearbyPagetype,nearbyQty:quantity};$('.featherlight [rel="seachNearby"], .featherlight [rel="user-location-near-me"], .featherlight [data-rel="user-location-near-me"]').data(srhBtnData);var st_selector=".check-nearby-store .store-container",k=0;while(k<3&&($(st_selector).get(0).scrollHeight-10)<=$(st_selector).get(0).clientHeight){onScrollitems();k++;}});});findNearByStore=function(reqData){var defferedStatus=$.ajax({url:NAPA.config.encodedContextPath+"/p/nearbystores",dataType:"json",async:false,data:JSON.stringify(reqData.req),contentType:"application/json; charset=utf-8",timeout:NAPA.config.globalAjaxTimeout,method:"post",success:function(result){if(reqData.req.loadNearByStoresUsingZipcode&&reqData.req.action=="click"){$(".featherlight .available-stores-list").html("");$(".check-nearby-store .store-container ").scrollTop(0);}$(".skeleton-wrapper").remove();totalRecords=result.totalRecords;storeSet=storeSet+1;if(result.errorStatus!=null){if($(".featherlight .available-stores-list .store-items").is(":visible")){if(result.errorStatus.errMsgDesc!=null){$(".featherlight .available-stores-list .store-items").last().after($("<div>",{"class":"pad-xsv-md center-xs red-error"}).text(result.errorStatus.errMsgDesc).html());}else{$(".featherlight .available-stores-list .store-items").last().after($("<div>",{"class":"pad-xsv-md center-xs red-error"}).text(result.errorStatus.errMsg).html());}}else{$(".featherlight .available-stores-list").html("").append($("<div>",{"class":"pad-xsv-md center-xs red-error"}).text(result.errorStatus.errMsg).html());}}else{$(".store_count").text(result.totalRecords);if(!result.errorStatus&&result.nearByStoresStockStatusData.length){if(checkIfDefined(using_currentlocation,0)){$("span[rel='nearByStoreSearchText']").text(checkIfDefined(result.nearByStoresStockStatusData[0].zipcode));}if($(".featherlight .available-stores-list").children().length===0){for(var k=0;k<result.nearByStoresStockStatusData.length;k++){$(".featherlight .available-stores-list").append(drawStore(result.nearByStoresStockStatusData[k],reqData.qtyentrynum,reqData.oldPrice,reqData.req.eRecSpecs,reqData.nearbyPagetype,AAData));}}else{if($(".featherlight .store-items").length){for(var k=0;k<result.nearByStoresStockStatusData.length;k++){$(".featherlight .available-stores-list .store-items").last().after(drawStore(result.nearByStoresStockStatusData[k],reqData.qtyentrynum,reqData.oldPrice,reqData.req.eRecSpecs,reqData.nearbyPagetype,AAData));}}}$(".search-form").slideUp(400);}}skeletonTemplate();var totalProducts=0;if(result.products!=null){var totalProducts=result.products.length;}var totalItemsonPage=$(".product-slider-wrapper .owl-item").length;if(totalItemsonPage<=totalProducts){if($(".product-slider-wrapper .owl-item").length==0){$(".featherlight .available-stores-list").ready(function(){$(".product-slider-wrapper .product-slider").addClass("owl-carousel");for(count=0;count<totalProducts;count++){imageSliderTemplate(result.products[count],totalProducts);}if($(".check-nearby-store .product-slider-wrapper .item").length==1){var drag=false;}$(".product-slider-wrapper .owl-carousel").owlCarousel({loop:true,margin:10,responsiveClass:true,responsive:{0:{items:2,nav:true,dots:false,margin:20,touchDrag:drag,navText:['<i class="icon-napa-arrow-left" aria-hidden="true"></i>','<i class="icon-napa-arrow-right" aria-hidden="true"></i>'],loop:false},600:{items:3,nav:true,dots:false,margin:20,touchDrag:drag,navText:['<i class="icon-napa-arrow-left" aria-hidden="true"></i>','<i class="icon-napa-arrow-right" aria-hidden="true"></i>'],loop:false},1000:{items:5,nav:true,loop:false,dots:false,mouseDrag:drag,touchDrag:drag,margin:20,navText:['<i class="icon-napa-arrow-left" aria-hidden="true"></i>','<i class="icon-napa-arrow-right" aria-hidden="true"></i>']}}});$(".change-store-form-container,.search-form-container").show();if(result.invWarningMsg&&reqData.nearbyPagetype!=undefined&&((reqData.nearbyPagetype=="PRODUCT")||(reqData.nearbyPagetype=="PRODUCTCOMPARE"))){$(".change-store-message").css("display","flex");}var storeContainerHeight=$(".check-nearby-store .store-container ").height();$(".check-nearby-store .available-stores-list").css("max-height",storeContainerHeight);});}}},error:function(request,textStatus,error){$(".check-nearby-store .available-stores-list").html("<div class='red-error'>"+$("#nearByStoreTimeOutError").val()+"</div>");$(".nearby-header").css("height","auto");console.log(error);},complete:function(){}});return defferedStatus;};drawStore=function(storeObj,entryNum,oldPrice,erecSpecs,nearbyPagetype,AAData){if(!storeObj.facilityId){return;}if(!entryNum&&entryNum!="0"){entryNum=-1;}var leftView=$("<div>",{"class":"ncol-xs-6 ncol-md-7 store-items__leftcol"});var rightView=$("<div>",{"class":"ncol-xs-6 ncol-md-5 store-items__rightcol center-xs nol-row"});var seeStoreDetails=$("#seeStoreDetails").val();var myStoreCls="";var milesAway=localized_msgs.nearbyMiaway;var btnShopStore="";if(storeObj.isUserSelectedStore){myStoreCls="mystore";milesAway=localized_msgs.nearbyMi;btnShopStore=$("<div>").html(localized_msgs.nearbyMystore);}else{if(!storeObj.isRolParticipant){btnShopStore="";}else{btnShopStore=$("<button>",{"class":"nol-button blue marg-xsv-top-md mobile-fullWidth font-normal-text pad-xsv-sm standard-text shop-this-store nol-border-radius font-style-normal",id:"shopThisStoreId",type:"button","data-old-price":oldPrice,"data-product-code":erecSpecs,"data-entry-number":entryNum,"data-store-id":storeObj.facilityId,"data-nearby-Pagetype":nearbyPagetype,click:function(){shopThisStore($(this));}}).html(localized_msgs.nearbyShopstore);}}leftView.append($("<div>",{"class":"store-items__addressline1"}).html(storeObj.addressLine1)).append($("<div>",{"class":"store-items__addressline2"}).html(storeObj.addressLine2?(storeObj.addressLine2+storeObj.city+", "+storeObj.state+" "+storeObj.zipcode):(storeObj.city+", "+storeObj.state+" "+storeObj.zipcode))).append($("<div>",{"class":"store-items__distance"}).html(storeObj.distance+" "+milesAway)).append($("<div>",{"class":"store-items__distance fnt-xsv-green"}).html(storeObj.storeHoursMSG)).append($("<div>",{"class":"store-items__seemore"}).append('<a href="'+NAPA.config.encodedContextPath+storeObj.seeMoreDetails+'" target="_blank">'+localized_msgs.nearbySeemoredetails+"</a>"));var btnShopStoreWrap=$("<div>",{"class":"flex-box store-items__shop-store pad-xsv-none mobile-fullWidth "+myStoreCls}).append(btnShopStore);var finditmsgclass=" delete-finditmsg--green";var formatedMsg=storeObj.inventoryStatusMSG;formatedMsg='<div class="availability-msg">';formatedMsg+='<span class="text-bold fnt-xsv-green">'+storeObj.inventoryStatusMSG+"</span>";if(storeObj.payInStoreMSG!=null&&storeObj.payInStoreMSG!=undefined){formatedMsg+=' <div class="pay-in-store">'+storeObj.payInStoreMSG+"</div>";}formatedMsg+="</div>";if(!storeObj.isRolParticipant){formatedMsg=storeObj.inventoryStatusMSG;finditmsgclass="no-rol-participant";var formatedMsgFragment=formatedMsg.split("|");if(formatedMsgFragment.length&&formatedMsgFragment.length>1){formatedMsg='<span class="fnt-xsv-blue callout-text">'+formatedMsgFragment[0]+"</span>";formatedMsg+='<div class="">'+formatedMsgFragment[2]+"</div>";}}else{if(!storeObj.stock){finditmsgclass=" ";formatedMsg='<div class="availability-msg nol-ui call-ca">';if(storeObj.pickupDateVaries!=null){formatedMsg+='<div class="fnt-xsv-blue text-bold">'+storeObj.pickupDateVaries+"</div>";}formatedMsg+='<span class="fnt-xsv-black secondary-text"> <span class="fnt-xsv-black secondary-text">'+storeObj.inventoryStatusMSG+'<span class="fnt-xsv-black"> <br><a href="tel:'+storeObj.phoneNo+'">'+storeObj.phoneNo+"</a></span>";if(storeObj.payInStoreMSG!=null&&storeObj.payInStoreMSG!=undefined){formatedMsg+=' <div class="pay-in-store">'+storeObj.payInStoreMSG+"</div>";}formatedMsg+="</div>";}}if(storeObj.isUserSelectedStore&&!ifEmptyString(localized_msgs.nearbyLocalInventory)&&storeObj.stock){formatedMsg='<div class="availability-msg">';formatedMsg+='<span class="text-bold fnt-xsv-green">'+localized_msgs.nearbyLocalInventory+"</span>";if(storeObj.payInStoreMSG!=null&&storeObj.payInStoreMSG!=undefined){formatedMsg+=' <div class="pay-in-store">'+storeObj.payInStoreMSG+"</div>";}formatedMsg+="</div>";}rightView.css({position:"relative"}).append($("<div>",{"class":"pickupdate flex-direction-col center-xs  "+finditmsgclass}).html(formatedMsg)).append($("<div>",{"class":"pickuptime"})).append($("<div>",{"class":""})).append(btnShopStoreWrap);return $("<div>",{"class":myStoreCls+" store-items marg-xsv-vrt-md pad-xsv-md","data-erecspecs":erecSpecs?erecSpecs:"0"}).append($("<div>",{"class":"nol-row"}).append(leftView).append(rightView));};shopThisStore=function(btn){var dataAttr=$(btn).data();if(dataAttr.nearbyPagetype=="PRODUCT"){try{if(AAData){if(_satellite){_satellite.setVar("nSightEnabled",AAData.nSightEnabled);_satellite.setVar("findItLocation","check nearby stores - product details");_satellite.track("MakeItMyStore");}}}catch(e){}}if(dataAttr.nearbyPagetype=="CART"){try{if(AAData){if(_satellite){_satellite.setVar("nSightEnabled",AAData.nSightEnabled);_satellite.setVar("findItLocation","shopping cart");_satellite.track("MakeItMyStore");}}}catch(e){}}var $tmpForm;if(btn.data("oldPrice")!=""){$tmpForm=$("<form>",{action:NAPA.config.encodedContextPath+"/p/update-store",method:"post"}).append($("<input>",{type:"hidden",name:"oldPrice",value:btn.data("oldPrice")})).append($("<input>",{type:"hidden",name:"productCode",value:btn.data("productCode")})).append($("<input>",{type:"hidden",name:"storeId",value:btn.data("storeId")})).append($("<input>",{type:"hidden",name:"CSRFToken",value:NAPA.config.CSRFToken}));}else{$tmpForm=$("<form>",{action:NAPA.config.encodedContextPath+"/cart/update-store",method:"post"}).append($("<input>",{type:"hidden",name:"entryNumber",value:btn.data("entryNumber")})).append($("<input>",{type:"hidden",name:"storeId",value:btn.data("storeId")})).append($("<input>",{type:"hidden",name:"CSRFToken",value:NAPA.config.CSRFToken})).append($("<input>",{type:"hidden",name:"cartItemsObj",value:JSON.stringify(cartItemsObj)}));}$tmpForm.appendTo("body").submit();};$("body").on("click",'.checkNearbyStores [rel="change_zip"], .checkNearbyStores [data-rel="change_zip"]',function(e){$(".search-form").slideToggle(400);e.stopPropagation();});$("body").on("click",'.featherlight [rel="seachNearby"]',function(e){using_currentlocation=0;if($("#checkmodal_zip").length){if(!/\S/.test($("#checkmodal_zip").val())){$("#checkmodal_zip").val("").focus();$('[rel="checkmodal_zip-error"]').addClass("pad-xsv-bot-sm").html($("#checkmodal_zip").data("error"));e.stopPropagation();return false;}else{$('[rel="checkmodal_zip-error"]').removeClass("pad-xsv-bot-sm").html("");}}else{e.stopPropagation();return false;}var dataAttr=$(this).data();if(dataAttr.nearbyPagetype=="PRODUCT"){try{if(_satellite){_satellite.setVar("findItLocation","check nearby stores - product details");_satellite.track("retailerSearch");}}catch(e){}}if(dataAttr.nearbyPagetype=="CART"){try{if(_satellite){_satellite.setVar("findItLocation","check nearby stores - shopping cart");_satellite.track("retailerSearch");}}catch(e){}}var productsChangeZip=new Array();if($(".page-cartPage").is(":visible")||$(".page-mobile-cartPage").is(":visible")){$(".pod-wrapper").each(function(){var part;var partArr;if($(this).find(".pod-fulfilment .rol-message-wrapper .cart-fulfilment").is(":checked")||$_gmRestrictions=="CA"){part=$(this).find(".part-no").text();partArr=(part.split(/(\s+|\(|\)|\!)/)).filter(function(n){return n.trim();});}if(partArr){var partNo=partArr[1];var lineAbbrev=partArr[0];}var productUrl=$(this).find(".pod-image>img").attr("src");var productDescription=$(this).find(".product-title>a").text();var _eRecSpec=$(this).find(".part-no").attr("data-nearby-erecspecs");var data={partNumber:partNo,lineAbbrv:lineAbbrev,eRecSpecs:_eRecSpec,quantity:$(this).find(".productQty").val(),primaryImageUrl:productUrl,description:productDescription};if(data.partNumber!=undefined){productsChangeZip.push(data);}});}else{var data={partNumber:dataAttr.nearbyPartnumber,lineAbbrv:dataAttr.nearbyLineabbr,description:dataAttr.nearbyDescription,primaryImageUrl:dataAttr.nearbyImageurl,eRecSpecs:dataAttr.nearbyErecspecs,quantity:checkIfDefined(dataAttr.nearbyQty,1)};if(data.partNumber!=undefined){productsChangeZip.push(data);}}storeSet=1;isUsingZip=true;changedZip=$("#checkmodal_zip").val();var req_params={nearByStores:dataAttr.nearbyStore,action:"click",eRecSpecs:dataAttr.nearbyErecspecs,pageType:dataAttr.nearbyPagetype,rolProductCount:productsChangeZip.length,products:productsChangeZip,totalQuantity:dataAttr.nearbyTotalitems,loadNearByStoresUsingZipcode:isUsingZip,storeSearch:{q:$("#checkmodal_zip").val(),lat:"",lang:"",radius:""},storeNum:dataAttr.nearbyFullstorenumber,startPage:storeSet,rowsPerPage:FinditNoofRows};$.when(findNearByStore({qtyentrynum:dataAttr.nearbyQtyentrynum,oldPrice:dataAttr.nearbyOldprice,nearbyPagetype:dataAttr.nearbyPagetype,AAData:AAData,req:req_params})).then(function(){});$('.featherlight [rel="nearByStoreSearchText"]').html($("#checkmodal_zip").val());});$("body").on("click",'.featherlight [rel="user-location-near-me"], .featherlight [data-rel="user-location-near-me"]',function(){NAPA.storefinder={coords:{}};using_currentlocation=1;$(".change_zip").val("");$(".search-form").slideUp(400);var dataAttr=$(this).data();storeSet=1;var productsUserLocation=new Array();if($(".page-cartPage").is(":visible")||$(".page-mobile-cartPage").is(":visible")){$(".pod-wrapper").each(function(){var part;var partArr;if($(this).find(".pod-fulfilment .rol-message-wrapper .cart-fulfilment").is(":checked")||$_gmRestrictions=="CA"){part=$(this).find(".part-no").text();partArr=(part.split(/(\s+|\(|\)|\!)/)).filter(function(n){return n.trim();});}if(partArr){var partNo=partArr[1];var lineAbbrev=partArr[0];}var productUrl=$(this).find(".pod-image>img").attr("src");var productDescription=$(this).find(".product-title>a").text();var _eRecSpec=$(this).find(".part-no").attr("data-nearby-erecspecs");var data={partNumber:partNo,lineAbbrv:lineAbbrev,eRecSpecs:_eRecSpec,quantity:$(this).find(".productQty").val(),primaryImageUrl:productUrl,description:productDescription};if(data.partNumber!=undefined){productsUserLocation.push(data);}});}else{var data={partNumber:dataAttr.nearbyPartnumber,lineAbbrv:dataAttr.nearbyLineabbr,description:dataAttr.nearbyDescription,primaryImageUrl:dataAttr.nearbyImageurl,eRecSpecs:dataAttr.nearbyErecspecs,quantity:1};if(data.partNumber!=undefined){productsUserLocation.push(data);}}var searchStoreByPosition=function(){var req_params={nearByStores:dataAttr.nearbyStore,products:productsUserLocation,rolProductCount:productsUserLocation.length,pageType:dataAttr.nearbyPagetype,eRecSpecs:dataAttr.nearbyErecspecs,totalQuantity:dataAttr.nearbyTotalitems,loadNearByStoresUsingZipcode:true,storeSearch:{q:"",lat:NAPA.storefinder.coords.latitude,lang:NAPA.storefinder.coords.longitude,radius:""},storeNum:dataAttr.nearbyFullstorenumber,startPage:storeSet,rowsPerPage:FinditNoofRows};$.when(findNearByStore({qtyentrynum:dataAttr.nearbyQtyentrynum,oldPrice:dataAttr.nearbyOldprice,nearbyPagetype:dataAttr.nearbyPagetype,AAData:AAData,req:req_params})).always(function(){using_currentlocation=0;console.log("current location finished");}).then(function(){});};if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){NAPA.storefinder.coords=position.coords;searchStoreByPosition();},function(error){console.log(error);console.log("User denied location info");});}});});var gmPlacesSelector="store-search-input";var placeSearch,autocomplete;var componentForm={locality:"long_name",administrative_area_level_1:"short_name",postal_code:"short_name"};var placesPredictionService;var SearchUsingAutoComplete=checkIfDefined(SearchUsingAutoComplete,false);var sessionToken;var googleListeners={};var goodgleAutocompleteEnabled=NAPA.config.google;$("#"+gmPlacesSelector).attr("data-isautocomplete","false");initAutocomplete=function(){if($("body").attr("data-ismapsloaded")=="true"&&goodgleAutocompleteEnabled==="true"&&$("#"+gmPlacesSelector).length&&$("#"+gmPlacesSelector).attr("data-isautocomplete")!="true"){sessionToken=new google.maps.places.AutocompleteSessionToken();if(document.getElementById(gmPlacesSelector)){autocomplete=new google.maps.places.Autocomplete((document.getElementById(gmPlacesSelector)),{sessionToken:sessionToken,types:["(regions)"]});autocomplete.setFields(["address_component","adr_address","formatted_address"]);autocomplete.setComponentRestrictions({country:[$_gmRestrictions]});$("#"+gmPlacesSelector).keypress(function(e){if(e.which==13){e.preventDefault();}});if(googleListeners[gmPlacesSelector]){google.maps.event.removeListener(googleListeners[gmPlacesSelector]);}googleListeners[gmPlacesSelector]=autocomplete.addListener("place_changed",function(){SearchUsingAutoComplete=true;fillInAddress();});if($("#"+gmPlacesSelector).length){$("#"+gmPlacesSelector).attr("data-isautocomplete","true");}}}else{$("#store-search-input").keypress(function(e){if(e.which==13){e.preventDefault();$("#store-search-button").trigger("click");}});}};function fillInAddress(){var place=autocomplete.getPlace();if($("#"+gmPlacesSelector).data("trigger-button")){$('[rel="'+$("#"+gmPlacesSelector).data("trigger-button")+'"]').click();}for(var component in componentForm){if(document.getElementById(component)){document.getElementById(component).value="";document.getElementById(component).disabled=false;}}}function geolocate(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var geolocation={lat:position.coords.latitude,lng:position.coords.longitude};var circle=new google.maps.Circle({center:geolocation,radius:position.coords.accuracy});autocomplete.setBounds(circle.getBounds());});}}function initializeMapAPI(callback,autocomplete_selector){if(!autocomplete_selector){autocomplete_selector="store-search-input";}gmPlacesSelector=autocomplete_selector;isMapsLoaded=$("body").attr("data-ismapsloaded");if(typeof isMapsLoaded===typeof undefined||isMapsLoaded=="false"){var script=document.createElement("script");script.type="text/javascript";if($_gmClient!=""){script.src=$_gmUrl+"&callback="+callback;}else{script.src=$_gmUrl+"&callback="+callback+"&key="+$_gmPlaces;}document.body.appendChild(script);$("body").attr("data-ismapsloaded","true");}else{window[callback]();}placesPredictionService=function(searchInput,callback){callback();return;var service=new google.maps.places.AutocompleteService();service.getPlacePredictions({input:searchInput.val(),types:["(regions)"],componentRestrictions:{country:[$_gmRestrictions]}},function(predictions,status){if(status!=google.maps.places.PlacesServiceStatus.OK){callback();}else{searchInput.val(predictions[0].description);callback();}});};}var radioValue=false;$(document).on("focusout","#productQty_u",function(){var nsightData=dataStorage.get(this,"inv");var nsightEnabled=nsightData.nsightEnabled;var newQty=$("#productQty_u").val();var oldQty=$("#productUpdatedQty").val();radioValue=$("input[name='choose-fulfilment']:checked").length?$("input[name='choose-fulfilment']:checked").val():radioValue;$("#productUpdatedQty").val($("#productQty_u").val());var rolprice=$(".rolAddtocart").val();if(nsightEnabled){if(newQty&&newQty>0&&newQty!=oldQty){var inventoryData=dataStorage.get(this,"inv");var isplustwodays=false;if(window.dcInventoryDetailsForPlus2Days&&"array"==jQuery.type(window.dcInventoryDetailsForPlus2Days)){$.each(window.dcInventoryDetailsForPlus2Days,function(i,invplustd){if((invplustd.quantity&&Number(invplustd.quantity))?(newQty<=invplustd.quantity):false){isplustwodays=true;return false;}});}if(newQty<=inventoryData.nsightInventory&&(rolprice=="true")){var rolEnable=true;$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append('<span class="text-bold fnt-xsv-green">'+inventoryData.nsightInventorymessagecode+"</span>").append('<span class="">'+inventoryData.nsightInventorystoreaddress+"</span>"));if(inventoryData.nsightInventorymessagecode.indexOf("pickupNotifyClass")==-1){$(".rol-pickup-notify").addClass("hidden-elem");}else{$(".rol-pickup-notify").removeClass("hidden-elem");}$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append('<span class="nol-pdp-dfsContent">'+inventoryData.nsightDfsinventorymessagecode+"</span>"));$(".nol-dfs-Label").html(inventoryData.nsightDfsinventorymessagecode);$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",inventoryData.nsightInventorymessagecode);$("#rol-message,#dfs-message").prop("disabled",false);$("#dfs-message").prop("disabled",false);$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");if(radioValue=="rol"){$("#rol-message").prop("checked",true);$("#bol-message").prop("checked",false);}else{if(radioValue=="dfs"){$("#dfs-message").prop("checked",true);}else{$("#rol-message").prop("checked",false);$("#bol-message").prop("checked",true);}}}else{if(newQty<=inventoryData.nsightDcinventory&&(rolprice=="true")){var rolEnable=true;$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("");$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"text-bold fnt-xsv-green"}).html(inventoryData.nsightDcinventorymessagecode)).append($("<span>",{"class":""}).html(inventoryData.nsightInventorystoreaddress)));$(".rol-pickup-notify").removeClass("hidden-elem");$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"nol-pdp-dfsContent"}).html(inventoryData.nsightDcdfsinventorymessagecode)));$(".nol-dfs-Label").html(inventoryData.nsightDcdfsinventorymessagecode);$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",inventoryData.nsightDcinventorymessagecode);$("#rol-message,#dfs-message").prop("disabled",false);$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");if(radioValue=="rol"){$("#rol-message").prop("checked",true);$("#bol-message").prop("checked",false);}else{if(radioValue=="dfs"){$("#dfs-message").prop("checked",true);}else{$("#rol-message").prop("checked",false);$("#bol-message").prop("checked",true);}}}else{if(newQty<=inventoryData.nsightDcinventoryfortoday&&(rolprice=="true")){var rolEnable=true;$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("");$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"text-bold fnt-xsv-green"}).html(inventoryData.nsightDcinventorymessagecodefortoday)).append($("<span>",{"class":""}).html(inventoryData.nsightInventorystoreaddress)));$(".rol-pickup-notify").removeClass("hidden-elem");$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"nol-pdp-dfsContent"}).html(inventoryData.nsightDcdfsinventorymessagecodefortoday)));$(".nol-dfs-Label").html(inventoryData.nsightDcdfsinventorymessagecodefortoday);$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",inventoryData.nsightDcinventorymessagecodefortoday);$("#rol-message,#dfs-message").prop("disabled",false);$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");if(radioValue=="rol"){$("#rol-message").prop("checked",true);$("#bol-message").prop("checked",false);}else{if(radioValue=="dfs"){$("#dfs-message").prop("checked",true);}else{$("#rol-message").prop("checked",false);$("#bol-message").prop("checked",true);}}}else{if(newQty<=inventoryData.nsightDcinventoryfortomorrow&&(rolprice=="true")){var rolEnable=true;$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("");$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"text-bold fnt-xsv-green"}).html(inventoryData.nsightDcinventorymessagecodefortomorrow)).append($("<span>",{"class":""}).html(inventoryData.nsightInventorystoreaddress)));$(".rol-pickup-notify").removeClass("hidden-elem");$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"nol-pdp-dfsContent"}).html(inventoryData.nsightDcdfsinventorymessagecodefortomorrow)));$(".nol-dfs-Label").html(inventoryData.nsightDcdfsinventorymessagecodefortomorrow);$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",inventoryData.nsightDcinventorymessagecodefortomorrow);$("#rol-message,#dfs-message").prop("disabled",false);$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");if(radioValue=="rol"){$("#rol-message").prop("checked",true);$("#bol-message").prop("checked",false);}else{if(radioValue=="dfs"){$("#dfs-message").prop("checked",true);}else{$("#rol-message").prop("checked",false);$("#bol-message").prop("checked",true);}}}else{if(isplustwodays&&(rolprice=="true")){window.dcInventoryDetailsForPlus2Days=window.dcInventoryDetailsForPlus2Days.sort(function(a,b){return((a.quantity&&Number(a.quantity))?Number(a.quantity):0)-((a.quantity&&Number(b.quantity))?Number(b.quantity):0);});var plus2daysdata={};$.each(window.dcInventoryDetailsForPlus2Days,function(i,invplustd){if(newQty<=parseInt(invplustd.quantity)){plus2daysdata=invplustd;return false;}});var rolEnable=true;$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("");$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"text-bold fnt-xsv-green"}).html(plus2daysdata.inventoryMessageCode)).append($("<span>",{"class":""}).html(inventoryData.nsightInventorystoreaddress)));$(".rol-pickup-notify").removeClass("hidden-elem");$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append($("<span>",{"class":"nol-pdp-dfsContent"}).html(plus2daysdata.dfsInventoryMessageCode)));$(".nol-dfs-Label").html(plus2daysdata.dfsInventoryMessageCode);$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",plus2daysdata.inventoryMessageCode);$("#rol-message,#dfs-message").prop("disabled",false);$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");if(radioValue=="rol"){$("#rol-message").prop("checked",true);$("#bol-message").prop("checked",false);}else{if(radioValue=="dfs"){$("#dfs-message").prop("checked",true);}else{$("#rol-message").prop("checked",false);$("#bol-message").prop("checked",true);}}}else{rolEnable=false;var tooltip1=$(".whytooltip").html();var rolUnavailable=inventoryData.nsightrolMsgnotavailable+"  <span>"+tooltip1+"</span>";var callStoreAvailability=inventoryData.nsightMsgnotavailable;var callStoreAvailabilityFragment=callStoreAvailability.split(".");if(callStoreAvailabilityFragment.length&&callStoreAvailabilityFragment.length>1){callStoreAvailability='<span class="unavailable-text-rol">'+callStoreAvailabilityFragment[0]+" </span>";callStoreAvailability+='<span class="secondary-text "><a href="tel:'+callStoreAvailabilityFragment[1]+'">'+callStoreAvailabilityFragment[1]+"</a></span>";callStoreAvailability+="<span>"+tooltip1+"</span>";}$(".nol-dfs-Label").html(inventoryData.nsightdfsMsgnotavailable);$(' [rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<span>",{"class":"availability-msg nol-ui"}).html(callStoreAvailability));$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("").append($("<span>",{"class":"availability-msg nol-ui"}).html(rolUnavailable));$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",inventoryData.nsightMsgnotavailable);$("#rol-message,#dfs-message").prop("disabled",true);$("#rol-message,#dfs-message").prop("checked",false);if(($("#bolFlagEnabled").val())==="disabled"){$(".pdp-panel__rolbtn").addClass("button-disabled dark-grey");}else{$("#bol-message").prop("checked",true);}$(".rol-pickup-notify").addClass("hidden-elem");}}}}}if(newQty<=inventoryData.nsightNearbystoresinventory){var formattedNearbyMsg=inventoryData.nsightNearbystoresinventorymsgcode;if(formattedNearbyMsg.length&&formattedNearbyMsg.length>1){var formattedNearbyMsgFragment=formattedNearbyMsg.split("|");}else{var formattedNearbyMsgFragment="";}if(formattedNearbyMsgFragment.length&&formattedNearbyMsgFragment.length>1){formattedNearbyMsg='<span class="text-bold fnt-xsv-green">'+formattedNearbyMsgFragment[0]+"</span>";formattedNearbyMsg+='<span class="fnt-xsv-black">&nbsp;'+formattedNearbyMsgFragment[1]+"</span>";}$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').append($("<div class='availability-msg nol-ui'>").html(formattedNearbyMsg));}var sthOutofstock=inventoryData.nsightOutofstockmsg+"  <span>"+tooltip1+"</span>";if(!(newQty<=inventoryData.nsightNolsupporteddcinventory)){$("#bolMessage").html(sthOutofstock);$("#bol-message").prop("checked",false);$("#bol-message").prop("disabled",true);if(rolEnable){$("#rol-message").prop("checked",true);}else{$(".pdp-panel__rolbtn").addClass("button-disabled dark-grey");}}else{if(($("#shippableFlagEnabled").val())==="disabled"){$("#bol-message").prop("checked",false);$("#bol-message").prop("disabled",true);}else{var bolMessage=$(".pdp-promowrapper").length?$(".pdp-promowrapper").html():"";if(bolMessage.length){bolMessage="<span class='pdp-promowrapper'>"+bolMessage+"</span> ";}bolMessage+="<span class='pdp-sth-message'>"+inventoryData.nsightBolmessage+"</span> ";$("#bolMessage").html(bolMessage);$("#bol-message").prop("disabled",false);if(!rolEnable){$("#bol-message").prop("checked",true);$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");}}}}else{return false;}}else{if(nsightData.bopisEnabled){if(newQty&&newQty>0&&newQty!=oldQty){if(newQty<=parseInt(nsightData.rolstockStoreInventory)){rolEnable=true;$('input[name="rolStockStatus"]').val("inStock");$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append('<span class="text-bold fnt-xsv-green">'+nsightData.rolstockStorePickupMsg+"</span>").append('<span class="">'+nsightData.rolstockStoreAddress+"</span>"));if(nsightData.rolstockStorePickupMsg.indexOf("pickupNotifyClass")==-1){$(".rol-pickup-notify").addClass("hidden-elem");}else{$(".rol-pickup-notify").removeClass("hidden-elem");}$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append('<span class="text-bold fnt-xsv-green">'+nsightData.rolstockStoreDfsMsg+"</span>"));$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",nsightData.rolstockStorePickupMsg);}else{if(newQty<=(parseInt(nsightData.rolstockStoreInventory)+parseInt(nsightData.rolstockDcInventory))){rolEnable=true;$('input[name="rolStockStatus"]').val("lowStock");$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append('<span class="text-bold fnt-xsv-green">'+nsightData.rolstockDcPickupMsg+"</span>").append('<span class="">'+nsightData.rolstockStoreAddress+"</span>"));if(nsightData.rolstockDcPickupMsg.indexOf("pickupNotifyClass")==-1){$(".rol-pickup-notify").addClass("hidden-elem");}else{$(".rol-pickup-notify").removeClass("hidden-elem");}$('[rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<div>",{"class":"availability-msg nol-ui"}).append('<span class="text-bold fnt-xsv-green">'+nsightData.rolstockDcDfsMsg+"</span>"));$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",nsightData.rolstockDcPickupMsg);}else{rolEnable=false;$('input[name="rolStockStatus"]').val("0");var callStoreAvailability=nsightData.rolstockOutofstock;var callStoreAvailabilityFragment=callStoreAvailability.split(",");if(callStoreAvailabilityFragment.length&&callStoreAvailabilityFragment.length>1){callStoreAvailability='<span class="secondary-text fnt-xsv-black">'+callStoreAvailabilityFragment[0]+", </span>";callStoreAvailability+='<span class="secondary-text fnt-xsv-black"><a href="tel:'+callStoreAvailabilityFragment[1]+'">'+callStoreAvailabilityFragment[1]+"</a></span>";}$('[rel="nsight-rol-msg"],[data-rel="nsight-rol-msg"], [rel="nsight-dfs-msg"],[data-rel="nsight-dfs-msg"]').html("").append($("<span>",{"class":"availability-msg nol-ui"}).html(callStoreAvailability));$('[rel="checkNearbyStores"]').data("nearbyLocalInventory",nsightData.rolstockOutofstock);$(".rol-pickup-notify").addClass("hidden-elem");}}if(rolEnable){$("#rol-message,#dfs-message").prop("disabled",false);if(radioValue=="dfs"){$("#dfs-message").prop("checked",true);}else{$("#rol-message").prop("checked",true);}$(".pdp-panel__rolbtn").removeClass("button-disabled dark-grey").addClass("blue").removeAttr("disabled");}else{$("#rol-message,#dfs-message").prop("disabled",true).prop("checked",false);$(".pdp-panel__rolbtn").addClass("button-disabled dark-grey").removeClass("blue");}}}}displayQtyAvailabilityMsg();return false;});displayQtyAvailabilityMsg=function(){if($("#bol-message").prop("disabled")&&$("#rol-message").prop("disabled")){$(".QtNotAvailableMsg").removeClass("hidden-elem");$(".pdp-panel__qtyinput").css({"border-color":"#E4002B"});}else{$(".QtNotAvailableMsg").addClass("hidden-elem");$(".pdp-panel__qtyinput").css({"border-color":""});}};$(document).on("click",".sse-add-to-cart-nomodal",function(e){if(!$(this).hasClass("disabled")){e.preventDefault();var that=$(this);that.addClass("disabled");var addedtocartxtpdp=$(".sse-added-to-cartnomodal").text();that.text("");that.text(addedtocartxtpdp);}});$(document).on("click",".khta-add-to-cart-nomodal",function(e){if(!$(this).hasClass("disabled")){e.preventDefault();var that=$(this);that.addClass("disabled");var addedtocartxtpdp=$(".sse-added-to-cartnomodal").text();that.text("");that.text(addedtocartxtpdp);}});$(document).on("click",".btn-plp-add-to-cart",function(e){e.preventDefault();if($(this).hasClass("button-disabled")){return false;}var form=$(this).closest("form");var cartAddType=$("input[name=cartAddTypeSse]",form).val();var RecommendationSourceHP=$("input[name=recommendationSourceHP]",form).val();var RecommendationSource=ifEmptyString(RecommendationSourceHP)?$("input[name=recommendationSourceSse]",form).val():RecommendationSourceHP;var parentProductID=$("input[name=parentProductID]",form).val();var productHQID=$(this).attr("data-producthqid");var productBrand=$(this).attr("data-geo-brand");var productpartType=$(this).attr("data-geo-partType");if(productpartType===undefined||productBrand===undefined){productBrand=$("input[name=brand]",form).val();productPartType=$("input[name=partType]",form).val();}var atcBtnData=$(this).data();var ffillment=$(this).attr("data-fulfillment");if(ffillment!=undefined&&ffillment!="undefined"&&ffillment!=""){var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";var dcid=typeof atcBtnData.geoDcid!==typeof undefined?atcBtnData.geoDcid:"";try{analytics.ddQuickView.set(form,dcid,cartAddType,RecommendationSource,parentProductID,productHQID,searchPlatform,productBrand,productpartType);}catch(error){console.log("Analytics Did Not Load PLP Add to cart",error);}addToCartFunction($(this),ffillment);}else{if($(this).hasClass("sse-add-to-cart-nomodal")){var sseClass=true;var form=$(this).closest("form");if($("input[name=bolAvailable]",form).val()==="true"){_ordType="bol";}if($("input[name=dfsAvailable]",form).val()==="true"){_ordType="dfs";}if($("input[name=rolAvailable]",form).val()==="true"){_ordType="rol";}var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";var dcid=typeof atcBtnData.geoDcid!==typeof undefined?atcBtnData.geoDcid:"";try{analytics.ddQuickView.set(form,dcid,cartAddType,RecommendationSource,parentProductID,productHQID,searchPlatform,productBrand,productpartType);}catch(error){console.log("Analytics Did Not Load SSE add to cart",error);}addToCartFunction($(this),"rol",sseClass);}}}).on("dblclick",".btn-plp-add-to-cart",function(e){e.preventDefault();});$(document).on("click",".btn-atc-add-to-cart",function(e){e.preventDefault();if($(this).hasClass("button-disabled")){return false;}var form=$(this).closest("form");var cartAddType=$("input[name=cartAddTypeSse]",form).val();var RecommendationSource=$("input[name=recommendationSourceSse]",form).val();var parentProductID=$("input[name=parentProductID]",form).val();var productHQID=$(this).attr("data-producthqid");var atcBtnData=$(this).data();var ffillment=$(this).attr("data-fulfillment");if(ffillment!=undefined&&ffillment!="undefined"&&ffillment!=""){var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";var dcid=typeof atcBtnData.geoDcid!==typeof undefined?atcBtnData.geoDcid:"";try{analytics.ddQuickView.set(form,dcid,cartAddType,RecommendationSource,parentProductID,productHQID,searchPlatform);}catch(error){console.log("Analytics Did Not Load PLP Add to cart",error);}addToCartFunction($(this),ffillment,null,true);}else{if($(this).hasClass("sse-add-to-cart-nomodal")){var sseClass=true;var form=$(this).closest("form");if($("input[name=bolAvailable]",form).val()==="true"){_ordType="bol";}if($("input[name=dfsAvailable]",form).val()==="true"){_ordType="dfs";}if($("input[name=rolAvailable]",form).val()==="true"){_ordType="rol";}var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";var dcid=typeof atcBtnData.geoDcid!==typeof undefined?atcBtnData.geoDcid:"";var prodBrand=$("input[name=brand]",form).val();var productPartType=$("input[name=partType]",form).val();try{analytics.ddQuickView.set(form,dcid,cartAddType,RecommendationSource,parentProductID,productHQID,searchPlatform,prodBrand,productPartType);}catch(error){console.log("Analytics Did Not Load SSE add to cart",error);}addToCartFunction($(this),_ordType,sseClass,true);}}}).on("dblclick",".btn-atc-add-to-cart",function(e){e.preventDefault();});$(document).on("click",".rolClick, .rol-store-unavailable",function(e){addToCartFunction($(this),"");});$("body").on("click",'.continueShopping, [rel="btn-ok-close"] ',function(e){$(this).closest("div.featherlight").find(".featherlight-close").click();});$("body").on("click",".why",function(e){$(this).siblings(".why-content").toggle(200);});$(document).on("click",".add-to-cart-btn",function(e){e.preventDefault();if($(this).hasClass("button-disabled")){return false;}else{if($("#rol-message").prop("checked")){addToCartFunction($(this),"rol");}else{if($("#dfs-message").prop("checked")){addToCartFunction($(this),"dfs");}else{if($("#bol-message").prop("checked")){addToCartFunction($(this),"bol");}}}}});$(document).on("click",".khta-add-to-cart-nomodal",function(e){e.preventDefault();var form=$(this).closest("form");var dcid=typeof dcid!==typeof undefined?dcid:"";var cartAddType=$("input[name=cartAddTypeSse]",form).val();var RecommendationSource=$("input[name=recommendationSourceSse]",form).val();var parentProductID=$("input[name=parentProductID]",form).val();var productHQID=$(this).attr("data-producthqid");var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";try{analytics.ddQuickView.set(form,dcid,cartAddType,RecommendationSource,parentProductID,productHQID,searchPlatform);}catch(error){console.log("Analytics Did Not Load khta add to cart",error);}addToCartFunction($(this));});$(document).on("click",".khta-add-to-cart",function(e){if(!$(this).hasClass("disabled")){e.preventDefault();var that=$(this);var id=$(this).attr("data-erecspecs");var form=$(this).closest("form");var data=form.serialize();var _ordType;var sellingPrice=$("input[name=basePriceDisplayed]",form).val();var cartAddType=$("input[name=cartAddTypeSse]",form).val();var RecommendationSource=$("input[name=recommendationSourceSse]",form).val();var parentProductID=$("input[name=parentProductID]",form).val();var recommendationIndex=$("input[name=pindex]",form).val();var parentProductHQID=$("input[name=productHQID]",form).val();var currentProductUrl=$("input[name=productUrl]",form).val();if($("input[name=bolAvailable]",form).val()==="true"){_ordType="bol";}if($("input[name=dfsAvailable]",form).val()==="true"){_ordType="dfs";}if($("input[name=rolAvailable]",form).val()==="true"){_ordType="rol";}$.post(NAPA.config.encodedContextPath+"/cart/add",data,function(data){try{var price=$(data).find(".listing-price-value").text();var totalItems=$(data).find(".numberItems").text();var totalPrice=$(data).find(".atc-cart__price").text();var cartId=$("#nol_cart_refereance_id").val();var product_id=$(data).filter(".addToCartErrormsg").attr("data-product-id");$(".numberItems").text(totalItems);$(".atc-cart__price").text(""+totalPrice.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"));that.addClass("disabled");var addedtocartxt=$(".sse-added-to-cart").text();var imageAvailable="";var shipToHome="";var storePickupEnabled="";var isPromo="";var rank="";var cost="";that.text("");that.text(addedtocartxt);updateMiniCart();analytics.cartAdd.set(form,1,_ordType,sellingPrice,imageAvailable,shipToHome,storePickupEnabled,isPromo,cost,rank,cartAddType,cartId,RecommendationSource,parentProductID,parentProductHQID,recommendationIndex,currentProductUrl,product_id);}catch(err){console.log(err);}});}});$(document).on("click",".sse-add-to-cart",function(e){if(!$(this).hasClass("disabled")){e.preventDefault();var that=$(this);var id=$(this).attr("data-erecspecs");var form=$(this).closest("form");var data=form.serialize();var _ordType;var sellingPrice=$("input[name=basePriceDisplayed]",form).val();var cartAddType=$("input[name=cartAddTypeSse]",form).val();var RecommendationSource=$("input[name=recommendationSourceSse]",form).val();var parentProductID=$("input[name=parentProductID]",form).val();var recommendationIndex=$("input[name=pindex]",form).val();var currentProductUrl=$("input[name=productUrl]",form).val();var productHQID=$(this).attr("data-producthqid");var product_id=$(this).filter(".addToCartErrormsg").attr("data-product-id");if($("input[name=bolAvailable]",form).val()==="true"){_ordType="bol";}if($("input[name=dfsAvailable]",form).val()==="true"){_ordType="dfs";}if($("input[name=rolAvailable]",form).val()==="true"){_ordType="rol";}var atcBtnData=$(this).data();$.post(NAPA.config.encodedContextPath+"/cart/addATCRecommendation",data,function(data){try{var atcResponse=JSON.parse(data);var totalItems=atcResponse.itemsAdded;var totalPrice=atcResponse.subTotal;var cartId=$("#nol_cart_refereance_id").val();$(".numberItems").text(totalItems);$(".atc-cart__price").text("$"+totalPrice.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"));that.addClass("disabled");var addedtocartxt=$(".sse-added-to-cart").text();var imageAvailable="";var shipToHome="";var storePickupEnabled="";var isPromo="";var rank="";var cost="";that.text("");that.text(addedtocartxt);updateMiniCart();var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";var dcid=typeof atcBtnData.geoDcid!==typeof undefined?atcBtnData.geoDcid:"";analytics.ddQuickView.set(form,dcid,cartAddType,RecommendationSource,parentProductID,productHQID,searchPlatform);analytics.cartAdd.set(form,1,_ordType,sellingPrice,imageAvailable,shipToHome,storePickupEnabled,isPromo,cost,rank,cartAddType,cartId,RecommendationSource,parentProductID,productHQID,recommendationIndex,searchPlatform,dcid,currentProductUrl,product_id);}catch(err){console.log(err);}});}});function addToCartFunction(obj,_ordType,sseClass,isATC){var id=$(obj).attr("id");if(id==undefined||id=="undefined"||id==""){id=$(obj).attr("data-erecspecs");}var isProductPage=$(obj).attr("data-productpage");var productHQID=$(obj).attr("data-producthqid");var quantity="1";if($(obj).data("qty-map")!=""){if($('[rel="'+$(obj).data("qty-map")+'"]').length){quantity=$('[rel="'+$(obj).data("qty-map")+'"]').val();}}if(quantity!=undefined&&quantity!="undefined"&&quantity!=""){data=data+"&quantity="+quantity;}var formid=(isATC?"addToCartFormOnATC":"addToCartForm")+id;var cartAddType=$("#"+formid+" input[name=cartAddTypeSse]").val();var RecommendationSourceHP=$("#"+formid+" input[name=recommendationSourceHP]").val();var RecommendationSource=ifEmptyString(RecommendationSourceHP)?$("#"+formid+" input[name=recommendationSourceSse]").val():RecommendationSourceHP;var parentProductID=$("#"+formid+" input[name=parentProductID]").val();var notSee=$("#"+formid+" input[name=recommendationSourcePdp]").val();var recommendationIndex=$("#"+formid+" input[name=pindex]").val();var prod_url=$(obj).attr("data-geo-produrl");var currentProductUrl=prod_url?prod_url:window.product_response[0].response.docs[0].url;if(window.location.href.indexOf("SSE")>-1){var url=new URL(window.location.href);if(!notSee){RecommendationSource="SSE:PDP";}else{var RecommendationSource=url.searchParams.get("r-src");var parentProductID=url.searchParams.get("ppid");parentProductID=parentProductID.replace(/_|-/g,"");}}if($(".cart-fulfilment").length){if(window.location.href.indexOf("KHTA")>-1&&!sseClass){var cartAddType=$("#"+formid+" input[name=cartAddTypeKhta]").val();RecommendationSource=$("#"+formid+" input[name=recommendationSourceKhta]").val();}}else{if(!notSee){RecommendationSource=ifEmptyString(RecommendationSourceHP)?$("#"+formid+" input[name=recommendationSourceSse]").val():RecommendationSourceHP;}else{var url=new URL(window.location.href);var cartAddType=$("#"+formid+" input[name=cartAddTypeSse]").val();if(window.location.href.indexOf("KHTA")>-1){var RecommendationSource=url.searchParams.get("r-src");var parentProductID=url.searchParams.get("ppid");parentProductID=parentProductID.replace(/_|-/g,"");}}}$("form[id="+formid+"]").find('input[name="qty"]').val(quantity);var form=$("#"+formid);form.find('input[name="deliverFromStore"]').remove();if(_ordType=="dfs"){form.append($("<input>").attr({value:true,name:"deliverFromStore",type:"hidden"}));_ordType="rol";}var data=form.serialize();if(_ordType!=undefined&&_ordType!="undefined"&&_ordType!=""){data=data+"&orderType="+_ordType;}var variantclass="modal__addtocart";var objData=$(obj).data();var geoDataAvailable=false;try{geoDataAvailable=obj[0].hasAttribute("data-geo-rank");}catch(_atc_geo_error){geoDataAvailable=false;}const isModalOpen=$(".featherlight").length>0;if(isModalOpen){$(".ajax-loader").fadeIn();}$.post(NAPA.config.encodedContextPath+"/cart/add",data,function(data){$(".ajax-loader").fadeOut();var errorMsg=$(data).filter(".addToCartErrormsg").attr("data-errorMsgError");var sellingPrice=$(data).filter(".addToCartErrormsg").attr("data-sellingPrice");var imageAvailable=$(data).filter(".addToCartErrormsg").attr("data-imageAvailable");var shipToHome=$(data).filter(".addToCartErrormsg").attr("data-shipToHome");var storePickupEnabled=$(data).filter(".addToCartErrormsg").attr("data-storePickupEnabled");var isPromo=$(data).filter(".addToCartErrormsg").attr("data-isPromo");var cost=$(data).filter(".addToCartErrormsg").attr("data-cost");var rank=$(data).filter(".addToCartErrormsg").attr("data-rank");var searchPlatform=$("geo-global-searchbar").length?"bloomreach":"endeca";var dcid=typeof objData.geoDcid!==typeof undefined?objData.geoDcid:"";var p_id=$(data).filter(".addToCartErrormsg").attr("data-pid");var product_id=$(data).filter(".addToCartErrormsg").attr("data-product-id");var product_Brand=$(obj).attr("data-geo-brand");var product_PartType=$(obj).attr("data-geo-partType");var cartId="";if(errorMsg=="itemsAdded"){try{if(geoDataAvailable){sellingPrice=objData.geoSellingprice;imageAvailable=objData.geoImageavailable;shipToHome=stripHtmlTags(objData.geoShiptohome);storePickupEnabled=stripHtmlTags(objData.geoStorepickupenabled);isPromo=objData.geoIspromo;cost=objData.geoCost;rank=objData.geoRank;searchPlatform="bloomreach";dcid=objData.geoDcid;}var tempCartElement=document.createElement("div");var tempcartEle=DOMPurify.sanitize(data);tempCartElement.innerHTML=tempcartEle;var subTotalVal=$(data).filter("input").val();cartId=tempCartElement.querySelector("#nol_cart_refereance_id")?tempCartElement.querySelector("#nol_cart_refereance_id").value:"";analytics.cartAdd.set(form,$("#cart-panel").attr("data-totalItems"),_ordType,sellingPrice,imageAvailable,shipToHome,storePickupEnabled,isPromo,cost,rank,cartAddType,cartId,RecommendationSource,parentProductID,productHQID,recommendationIndex,currentProductUrl,product_id,searchPlatform,dcid,product_Brand,product_PartType,subTotalVal);}catch(error){console.log("Analytics Did Not Load ",error);}updateMiniCart();}else{variantclass="modal__atc-error";}var widget_id=window._geo_service_config.atcRecommendationsWidgetId;if(isModalOpen){var toatlQuantity=$(data).find(".numberItems").text();var subtotal=$(data).find(".atc-cart__price").text();$("#modalBOLConfirm").find(".numberItems").html(toatlQuantity);$("#modalBOLConfirm").find(".atc-cart__price").html(subtotal);}else{result='<div id="modalBOLConfirm" class="modal confirmModel">'+data+"</div>";$.featherlight(result,{variant:"nol-modal atc-modal nol-ui "+variantclass,closeIcon:"",closeOnClick:"background",contentFilters:["html"],afterContent:function(event){var first=this.$content.find(".nol-button.blue");var last=this.$content.find(".continueShopping");$("a.featherlight-close-icon.featherlight-close").attr("href","#");$("a.featherlight-close-icon.featherlight-close").attr("tabindex","0");$("span.featherlight-close-icon.featherlight-close").attr("aria-label","close");$("span.featherlight-close-icon.featherlight-close").attr("tabindex","0");setmodalfocus();this.$content.find("geo-atc-recommendation").attr("product_id",product_id);this.$content.find("geo-atc-recommendation").attr("p_id",p_id);this.$content.find("geo-atc-recommendation").attr("widget_id",widget_id);this.$content.find("geo-atc-recommendation").attr("cart_quantity",quantity);}});}},"html").error(function(){$(".ajax-loader").fadeOut();if(typeof atc_error500===typeof undefined){atc_error500="There was a problem adding your item.";}variantclass="modal__atc-error";result='<div id="modalBOLConfirm" class="modal confirmModel" aria-modal="true">\t<div class="modal-content">\n  <div class="nol-ui">\n   <div class="nol-row">\n    <div class="ncol-xs-12">\n    \n     <div class="atc-errmsg__header \n     pad-lgv-hrz-xl pad-lgv-top-md \n     pad-xsv-top-sm pad-xsv-lft-md pad-xsv-rgt-md ">\n     <span class="icon-napa-error blue"></span>\n      <span>'+atc_error500+"</span>\n     </div>\n    </div>\n    </div>\n    </div>\n    </div></div>";$.featherlight(result,{variant:"nol-modal atc-modal nol-ui "+variantclass,closeIcon:"",closeOnClick:"background",contentFilters:["html"],afterContent:function(event){$("a.featherlight-close-icon.featherlight-close").attr("href","#");$("a.featherlight-close-icon.featherlight-close").attr("tabindex","0");$("span.featherlight-close-icon.featherlight-close").attr("aria-label","close");$("span.featherlight-close-icon.featherlight-close").attr("tabindex","0");this.$content.find(".nol-button.blue").focus();setmodalfocus();}});});}function setmodalfocus(){const focusableElements='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';const modal=document.querySelector(".featherlight");modal.setAttribute("role","dialog");const firstFocusableElement=modal.querySelectorAll(focusableElements)[0];const focusableContent=modal.querySelectorAll(focusableElements);const lastFocusableElement=focusableContent[focusableContent.length-1];document.addEventListener("keydown",function(e){let isTabPressed=e.key==="Tab"||e.keyCode===9;if(!isTabPressed){return;}if(e.shiftKey){if(document.activeElement===firstFocusableElement){lastFocusableElement.focus();e.preventDefault();}}else{if(document.activeElement===lastFocusableElement){firstFocusableElement.focus();e.preventDefault();}}});firstFocusableElement.focus();}function checkIfDefined(x,def_val){var def_val=(typeof def_val==="undefined")?"":def_val;return(typeof x==="undefined")?def_val:x;}function stripHtmlTags(str){if(str===null||str===""){return"";}var div=document.createElement("div");div.innerHTML=str;var text=div.textContent||div.innerText||"";return text;}function ifEmptyString(x){return !/\S/.test(checkIfDefined(x));}$("#loginemail").keypress(function(e){if(e.which==32){e.preventDefault();return false;}});$(document).ready(function(){$('[rel="validate-and-Login"]').on("click",function(e){var $form=$(this).closest("form");if(!$form.parsley().validate()){return false;}else{e.preventDefault();}$("#checkoutSignIn").css("pointer-events","none");var formData=$form.serialize();$.ajax({type:"POST",url:NAPA.config.encodedContextPath+"/login/checkout/validate",data:formData,dataType:"json",myform:$form,success:function(response){if(response=="success"){this.myform.submit();}else{if(response=="failed"){$("#checkoutSignIn").css("pointer-events","auto");$("#checkoutloginLocked").hide();$("#checkoutloginError").show();}else{if(response=="locked"){$("#checkoutSignIn").css("pointer-events","auto");$("#checkoutloginError").hide();$("#checkoutloginLocked").show();}else{location.reload();}}}},error:function(error){location.reload();}});});$(".not-you-link").on("click",function(e){e.preventDefault();$("#accountId").remove();$("#signinemail").show();});$('a[href*="force-vehicle=true"]').on("click",function(e){e.preventDefault();var myhref=$(this).attr("href");try{sessionStorage.removeItem("fitment-redirect");}catch(e){console.log(e);}if($("#defaultVehiclePk").length){var sessForceFitment;try{sessForceFitment=sessionStorage.getItem("dont-force-fitment");sessionStorage.setItem("force-fitment-modal","true");}catch(e){console.log(e);}if($("#defaultVehiclePk").val().length||sessForceFitment=="true"){sessionStorage.removeItem("force-fitment-modal");window.location.href=myhref;}else{try{sessionStorage.setItem("fitment-redirect",myhref);}catch(e){console.log(e);}$('[rel="trigger-fitment"]').attr("data-referer",myhref).click();}}else{window.location.href=myhref;}});$("body").append($("<span>",{"data-trigger":"fitment-modal",rel:"trigger-fitment","data-vehicle-overlay-open":"/my-vehicle/mobileAddNewVehicle/N=0"}));jslog=function(str){debug?console.log(str):"";};if(typeof $fnautocomplete==="undefined"){$.fn.autocomplete=function(){};}else{$.fn.autocomplete=$fnautocomplete;}var vehSelectFields={types:{fieldid:"#input-veh-type",fetchurl:NAPA.config.encodedContextPath+"/my-vehicle/vehicleType/N=",requiredfields:[],optionalfields:["years","makes","models"],resetfields:["years","makes","models"],populatefields:"years",navigationdata:"0",defaultvalue:"59900100"},years:{fieldid:"#veh-ymm-year",fetchurl:NAPA.config.encodedContextPath+"/my-vehicle/vehicleYear/N=",requiredfields:["types"],optionalfields:["types","makes","models"],resetfields:["makes","models"],populatefields:"makes",navigationdata:"0",defaultvalue:""},makes:{fieldid:"#veh-ymm-make",fetchurl:NAPA.config.encodedContextPath+"/my-vehicle/vehicleMake/N=",requiredfields:["types","years"],optionalfields:["types","models"],resetfields:["models"],populatefields:"models",navigationdata:"0",defaultvalue:""},models:{fieldid:"#veh-ymm-model",fetchurl:NAPA.config.encodedContextPath+"/my-vehicle/vehicleModel/N=",requiredfields:["types","years","makes"],optionalfields:["types","years","makes"],resetfields:[],populatefields:"",navigationdata:"0",defaultvalue:""}};var vsmdata={config:{focusnext:true}};var pdpVehicleConditions={};var populateField=function(key,el){var N;if(typeof vehicleSelectorPresentPDP!=="undefined"&&vehicleSelectorPresentPDP){N=pdpVehSelectNavigationData(key);}else{N=vehSelectNavigationData(key);}var req=true;if(el.requiredfields.length){$.each(el.requiredfields,function(k,elemt){if($(vehSelectFields[elemt].fieldid).data("endecaid")==""){req=false;return;}});if(req===false){return;}}getYMM(el.fetchurl,key,N);};var vsPopulateFields=function(){if(preSelectedVehicle){$.each(preSelectedVehicle,function(objkey,objval){$(vehSelectFields[objkey].fieldid).val(objval.value).data("endecaid",objval.endecaid);$(vehSelectFields[objkey].fieldid).removeClass("invalid");$(vehSelectFields[objkey].fieldid).parent(".input-dropdown").next(".tymm-selected").addClass("active").text(objval.value);});}$.each(vehSelectFields,populateField);};var getYMM=function(ymm_url,ymm_selector,ymm_navdata,callback){ymm_navdata=checkIfDefined(ymm_navdata,0);var refineData=[];if($(vehSelectFields[ymm_selector].fieldid).length){$.ajax({target_list:ymm_selector,type:"GET",url:ymm_url+ymm_navdata,dataType:"json",success:function(data){if(data.status=="success"){var refinements=JSON.parse(data.resultData).Refinements;refineData=[];for(var k=0;k<refinements.length;k++){refineData.push({data:refinements[k].RefinementValue,value:refinements[k].RefinementText});}}else{refineData=[];}},complete:function(){if(refineData&&refineData.length){$(vehSelectFields[this.target_list].fieldid).removeAttr("disabled");var nextfields=vehSelectFields[this.target_list].populatefields;var autoCompleteTargetField=this.target_list;$(vehSelectFields[autoCompleteTargetField].fieldid).autocomplete({lookup:refineData,autoSelectFirst:true,triggerSelectOnValidInput:false,minChars:0,lookupFilter:function(suggestion,query,queryLowerCase){return suggestion.value.toLowerCase().indexOf(queryLowerCase)===0;},onSelect:function(suggestion){$(this).data("endecaid",suggestion.data);$(this).removeClass("invalid");$(this).parent(".input-dropdown").next(".tymm-selected").addClass("active").html(suggestion.value);if(nextfields&&nextfields!=""){$.each(vehSelectFields[autoCompleteTargetField].resetfields,function(ky,fname){resetYMMField(vehSelectFields[fname].fieldid);});fieldToPopulate=findFieldsToPopulate(nextfields);if(fieldToPopulate){var n=vehSelectNavigationData(fieldToPopulate);getYMM(vehSelectFields[fieldToPopulate].fetchurl,fieldToPopulate,n,function(){if(vsmdata.config.focusnext){$(vehSelectFields[fieldToPopulate].fieldid).focus();}vsmdata.config.focusnext=true;});}}enableDisableVsButton($(this).data("fieldid"));},onInvalidateSelection:function(){$(this).data("endecaid","");$(this).addClass("invalid");enableDisableVsButton($(this).data("fieldid"));},onBlurCustom:function(elm){if($(elm).data("endecaid")==""){$(elm).val("");}}});if(refineData.length>1){if(vehSelectFields[autoCompleteTargetField].defaultvalue!=""&&!preSelectedVehicle.hasOwnProperty(autoCompleteTargetField)){indexes=$.map(refineData,function(obj,index){if(obj.data==vehSelectFields[autoCompleteTargetField].defaultvalue){return index;}});if(indexes.length){$(vehSelectFields[autoCompleteTargetField].fieldid).val(refineData[indexes[0]].value).autocomplete("setOptions",{autoSelectFirst:true,triggerSelectOnValidInput:true}).autocomplete("onValueChange");$(vehSelectFields[autoCompleteTargetField].fieldid).autocomplete("setOptions",{autoSelectFirst:false,triggerSelectOnValidInput:false});}}var defaultSelectedEndeca="";if(preSelectedVehicle.hasOwnProperty(autoCompleteTargetField)&&preSelectedVehicle[autoCompleteTargetField]!==""){defaultSelectedEndeca=preSelectedVehicle[autoCompleteTargetField].endecaid;var pdpindexes=$.map(refineData,function(obj,index){if(obj.data===defaultSelectedEndeca){return index;}});if(pdpindexes.length){$(vehSelectFields[autoCompleteTargetField].fieldid).val(refineData[pdpindexes[0]].value);if(autoCompleteTargetField==="models"){$(vehSelectFields[autoCompleteTargetField].fieldid).autocomplete("setOptions",{autoSelectFirst:true,triggerSelectOnValidInput:true}).autocomplete("onValueChange");$(vehSelectFields[autoCompleteTargetField].fieldid).autocomplete("setOptions",{autoSelectFirst:false,triggerSelectOnValidInput:false});}}}else{}}if(refineData.length==1){$(vehSelectFields[autoCompleteTargetField].fieldid).val(refineData[0].value).autocomplete("setOptions",{autoSelectFirst:true,triggerSelectOnValidInput:true}).autocomplete("onValueChange");$(vehSelectFields[autoCompleteTargetField].fieldid).autocomplete("setOptions",{autoSelectFirst:false,triggerSelectOnValidInput:false});}else{callback=checkIfDefined(callback,function(){});callback();}}else{}}});}};var populatePDPVehConditions=function(){var getVehicleConditionsUrl=NAPA.config.encodedContextPath+"/../api/product/vehicleCondition";var postData={language:NAPA.config.currentLocale,site:$_gmRestrictions=="CA"?"napauap":"napa",yearId:$("#veh-ymm-year").data("endecaid"),makeId:$("#veh-ymm-make").data("endecaid"),modelId:$("#veh-ymm-model").data("endecaid"),userSelectedvehicleConditions:pdp_userSelectedVehicleConditions};if(vehicleConditionNotListed!=""){postData.notListed=vehicleConditionNotListed;}var vc_auto_complete_data=[];merge(postData,pdpProductPartInfo);$.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},url:getVehicleConditionsUrl,dataType:"json",data:JSON.stringify(postData)}).done(function(resp){if(resp.hasOwnProperty("vehicleConditions")){pdpVehicleConditions={};$("#vehicle-conditions-panel > .nol-row").empty();$("#vehicle-conditions-panel").removeClass().siblings("").removeClass("ncol-md-6");for(var key in resp.vehicleConditions){var rkey=key.replace(/ /g,"_");vc_auto_complete_data[rkey]=[];pdpVehicleConditions[rkey]={};var preselectedConditions={};for(var k=0;k<resp.vehicleConditions[key].length;k++){vc_auto_complete_data[rkey].push({data:resp.vehicleConditions[key][k].refinementValue,value:resp.vehicleConditions[key][k].refinementText});pdpVehicleConditions[rkey][resp.vehicleConditions[key][k].refinementValue]={idk:resp.vehicleConditions[key][k].idk,refinementText:resp.vehicleConditions[key][k].refinementText,refinementValue:resp.vehicleConditions[key][k].refinementValue,nl:resp.vehicleConditions[key][k].nl,label:key};if(resp.vehicleConditions[key][k].preSelected===true){preselectedConditions={endecaid:resp.vehicleConditions[key][k].refinementValue,value:resp.vehicleConditions[key][k].refinementText};}}var vehrkey=rkey.toString().replace(lt,"&lt;").replace(gt,"&gt;").replace(ab,"&amp;").rep;var vehkey=key.toString().replace(lt,"&lt;").replace(gt,"&gt;").replace(ab,"&amp;").rep;vehSelectFields[vehrkey]={fieldid:"#veh-ymm-"+htmlDecode(vehrkey),fetchurl:"",requiredfields:["types","years","makes","models"],optionalfields:["types","years","makes","models"],resetfields:[],populatefields:"",navigationdata:"0",defaultvalue:""};var vc_field_container=$("<div>",{"class":"ncol-xs-12 pad-xsv-vrt-sm"}).append($("<div>").append($("<label>",{"for":"veh-ymm-"+htmlDecode(vehrkey),html:htmlDecode(vehkey)})).append($("<div>",{"class":"veh-select-field veh-sel-field-no-label"}).append($("<span>",{"class":"input-dropdown",rel:"input-dropdown"}).append($("<input>",{"class":"vsautocomplete veh-ymm-vconditions",id:"veh-ymm-"+htmlDecode(vehrkey),name:"veh-ymm-"+htmlDecode(vehrkey),type:"text","data-endecaid":"","data-fieldid":htmlDecode(vehrkey),"aria-label":htmlDecode(vehkey)}).attr("placeholder",htmlDecode(vehkey)))).append($("<span>",{"class":"tymm-selected ada-dropdown-span"}))));$("#vehicle-conditions-panel").addClass("ncol-xs-12 ncol-md-6").siblings(".ncol-xs-12").addClass("ncol-md-6");$("#vehicle-conditions-panel > .nol-row").append(vc_field_container);$("#veh-ymm-"+rkey).val(preselectedConditions.value).data("endecaid",preselectedConditions.endecaid).removeClass("invalid").parent(".input-dropdown").next(".tymm-selected").addClass("active").text(preselectedConditions.value);$("#veh-ymm-"+rkey).autocomplete({lookup:vc_auto_complete_data[rkey],autoSelectFirst:true,triggerSelectOnValidInput:false,minChars:0,lookupFilter:function(suggestion,query,queryLowerCase){return suggestion.value.toLowerCase().indexOf(queryLowerCase)===0;},onSelect:function(suggestion){$(this).data("endecaid",suggestion.data);$(this).removeClass("invalid");$(this).parent(".input-dropdown").next(".tymm-selected").addClass("active").text(suggestion.value);$("#veh-ymm-submit,.pdp-veh-ymm-submit").removeClass("grey").addClass("blue").removeAttr("disabled");},onInvalidateSelection:function(){$(this).data("endecaid","");$(this).addClass("invalid");},onBlurCustom:function(elm){if($(elm).data("endecaid")==""){$(elm).val("");}}});}}}).fail(function(err){console.error(err);});};var enableDisableVsButton=function(_fieldid){var ymm_fields=["types","years","makes","models"];if($("input.vsautocomplete").filter(function(){return ymm_fields.indexOf($(this).data("fieldid"))!==-1&&$(this).data("endecaid");}).length==4){if(typeof vehicleSelectorPresentPDP!=="undefined"&&vehicleSelectorPresentPDP&&_fieldid==="models"){populatePDPVehConditions();}if(!$.isEmptyObject(preSelectedVehicle)&&typeof vehicleSelectorPresentPDP!=="undefined"&&vehicleSelectorPresentPDP){$("#veh-ymm-submit,.pdp-veh-ymm-submit").removeClass("blue").addClass("grey").attr("disabled","disabled");}else{$("#veh-ymm-submit,.pdp-veh-ymm-submit").removeClass("grey").addClass("blue").removeAttr("disabled").focus();}}else{$("#vehicle-conditions-panel > .nol-row").empty();$("#vehicle-conditions-panel").removeClass().siblings("").removeClass("ncol-md-6");$("#veh-ymm-submit,.pdp-veh-ymm-submit").removeClass("blue").addClass("grey").attr("disabled","disabled");}};var findFieldsToPopulate=function(myfields){if(myfields==""){return false;}if($(vehSelectFields[myfields].fieldid).parent(".input-dropdown").next(".tymm-selected").hasClass("inactive")){return findFieldsToPopulate(vehSelectFields[myfields].populatefields);}return myfields;};var resetYMMField=function(myselector,force){force=checkIfDefined(force,0);if($(myselector).length){if(force){$(myselector).attr("disabled","disabled");$(myselector).val("").data("endecaid","");$(myselector).parent(".input-dropdown").next(".tymm-selected").removeClass("active").removeClass("inactive");}else{if(!$(myselector).parent(".input-dropdown").next(".tymm-selected").hasClass("inactive")){$(myselector).attr("disabled","disabled");$(myselector).val("").data("endecaid","");$(myselector).parent(".input-dropdown").next(".tymm-selected.active").removeClass("active");}}enableDisableVsButton($(myselector).data("fieldid"));}};var vehSelectNavigationData=function(fieldname){var N="",requiredflag=true;$.each(vehSelectFields,function(key,el){var endecaid=$(el.fieldid).data("endecaid");if(key!=fieldname){if(endecaid){N=N?N+"+"+endecaid:endecaid;}}});if(requiredflag){N=N?N:0;}else{N=false;}return N;};var pdpVehSelectNavigationData=function(fieldname){var N="",requiredflag=true;$.each(vehSelectFields,function(key,el){var endecaid=$(el.fieldid).data("endecaid");if(key!=fieldname&&vehSelectFields[fieldname].requiredfields.indexOf(key)!==-1){if(endecaid){N=N?N+"+"+endecaid:endecaid;}}});if(requiredflag){N=N?N:0;}else{N=false;}return N;};$("#veh-ymm-submit").off("click").on("click",function(){var formdata={vehicleTypeId:$("#input-veh-type").data("endecaid"),vehicleType:$("#input-veh-type").val(),yearId:$("#veh-ymm-year").data("endecaid"),year:$("#veh-ymm-year").val(),makeId:$("#veh-ymm-make").data("endecaid"),make:$("#veh-ymm-make").val(),modelId:$("#veh-ymm-model").data("endecaid"),model:$("#veh-ymm-model").val().replace("<sup>","").replace(/\*/g,"").trim(),vehicleSelectionType:$(this).data("currentpagetype"),referer:$(this).data("currentpagetype"),CSRFToken:NAPA.config.CSRFToken};var keyword=$(this).data("searchterm");$.ajax({url:"/my-vehicle/add-vehicle/",type:"POST",data:$.param(formdata),success:function(data){var searchAppIndexDataURL=$("#search-app-index-data").attr("data-url");if(data.status=="success"){if(keyword!="null"&&keyword!="undefined"&&keyword!=""){var searchTerm=formdata.year+" "+formdata.make+" "+formdata.model+" "+keyword;var searchTextUrl=NAPA.config.encodedContextPath+"/search?text="+encodeURIComponent(searchTerm)+"&referer=semantic&completeVeh=true";window.location.href=searchTextUrl;}else{if(searchAppIndexDataURL!=undefined&&searchAppIndexDataURL!=""){if(searchAppIndexDataURL.indexOf("c/job")==-1){window.location.href=searchAppIndexDataURL+"&referer=vehicleAdd";}else{window.location.href=searchAppIndexDataURL+"?referer=vehicleAdd";}}else{var separator=getParamSeparator();var searchTextUrl=window.location.href+separator+"param=addVehicle";searchTextUrl=searchTextUrlnewhref.replace(/&?store=([^&]$|[^&]*)/i,"").replace("?&","?");window.location.href=searchTextUrl;}}}}});});if($(".pdp-veh-ymm-submit").length){$(".pdp-veh-ymm-submit").off("click").on("click",function(){var tmp_vehicleConditions={};var formdata={vehicleTypeId:$("#input-veh-type").data("endecaid"),vehicleType:$("#input-veh-type").val(),yearId:$("#veh-ymm-year").data("endecaid"),year:$("#veh-ymm-year").val(),makeId:$("#veh-ymm-make").data("endecaid"),make:$("#veh-ymm-make").val(),modelId:$("#veh-ymm-model").data("endecaid"),model:$("#veh-ymm-model").val().replace("<sup>","").replace(/\*/g,"").trim(),userSelectedVehicleRefinements:"",vehicleSelectionType:$(this).data("currentpagetype"),referer:$(this).data("currentpagetype"),CSRFToken:NAPA.config.CSRFToken};if($(".veh-ymm-vconditions").length){$(".veh-ymm-vconditions").each(function(idx,inputfield){if($(inputfield).data("endecaid")!==""){var selectedCondition=pdpVehicleConditions[$(inputfield).data("fieldid")][$(inputfield).data("endecaid")];tmp_vehicleConditions[selectedCondition.label]={idk:selectedCondition.idk,nl:selectedCondition.nl,refinementText:selectedCondition.refinementText,refinementValue:selectedCondition.refinementValue};}});}formdata.userSelectedVehicleRefinements=JSON.stringify(tmp_vehicleConditions);$.ajax({url:"/my-vehicle/add-vehicle/",type:"POST",data:$.param(formdata),success:function(data){if(data.status=="success"){window.location.href=document.location.pathname+addUrlParam(document.location.search,"vehicleAddPDP","true");return;}}});});$("#invoke-pdp-fitment").length?$("#invoke-pdp-fitment").on("click",function(e){if($("#"+$(this).data("modal-id")).is(":visible")){$(".pdp-veh-close,.pdp-veh-clear-link, .pdp-veh-view-link, .pdp-veh-goback").off("click");$("#"+$(this).data("modal-id")).hide();$(".pdp-fitment-overlay").remove();$(".fitmentArrow").removeClass("up");}else{$("<div>",{"class":"pdp-fitment-overlay",css:{background:"#000",position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0.7,"z-index":9}}).appendTo("body");$("#"+$(this).data("modal-id")).show();$(".pdp-saved-vehicles,.pdp-veh-goback").addClass("hidden-elem");$(".pdp-veh-clear,.pdp-veh-view").removeClass("hidden-elem");$(".pdp-vehicle-selector,.add-fitment-vehicle").removeClass("hidden-elem");$(".pdp-panel__fitment").addClass("pdpOpacity");if($(".fitmentArrow").length){$(".fitmentArrow").addClass("up");var arrowPosition=$(".fitmentArrow").position();var arrowPositionLeft=arrowPosition.left+5;$("head").append('<style>.fitment-modal-content:after{content: "";left:'+parseInt(arrowPositionLeft)+"px !important;}</style>");}$(".pdp-veh-close").on("click",function(e){e.stopPropagation();$(".fitment-modal-container").hide();$(".pdp-fitment-overlay").remove();$(".pdp-panel__fitment").removeClass("pdpOpacity");$(".fitmentArrow").removeClass("up");$(".pdp-veh-close,.pdp-veh-clear-link, .pdp-veh-view-link, .pdp-veh-goback").off("click");});isUserHasDefaultVehicle=$("#labelDefaultVehicle").val();if(isUserHasDefaultVehicle=="true"){$(".pdp-veh-clear-link").show();}else{$(".pdp-veh-clear-link").hide();}$(".pdp-veh-clear-link").on("click",function(e){e.stopPropagation();$.each(vehSelectFields,function(ky,elobj){vehicleConditionNotListed=false;resetYMMField(elobj.fieldid,1);});$.each(vehSelectFields,populateField);$("#vehicle-conditions-panel > .nol-row").empty();$("#vehicle-conditions-panel").removeClass().siblings("").removeClass("ncol-md-6");$(".pdp-vehicle-selector,.add-fitment-vehicle").removeClass("hidden-elem");$(".pdp-saved-vehicles,.pdp-veh-goback").addClass("hidden-elem");$(".pdp-veh-ymm-submit").html($(".pdp-veh-ymm-submit").data("addvehicletext"));});$(".pdp-veh-view-link").on("click",function(e){e.stopPropagation();$(".pdp-vehicle-selector,.add-fitment-vehicle").addClass("hidden-elem");$(".pdp-veh-clear,.pdp-veh-view").addClass("hidden-elem");$(".pdp-saved-vehicles,.pdp-veh-goback").removeClass("hidden-elem");});$(".pdp-veh-goback").on("click",function(e){e.stopPropagation();$(".pdp-saved-vehicles,.pdp-veh-goback").addClass("hidden-elem");$(".pdp-veh-clear,.pdp-veh-view").removeClass("hidden-elem");$(".pdp-vehicle-selector,.add-fitment-vehicle").removeClass("hidden-elem");});if($("#vehicle-conditions-panel > .nol-row").children().length==0){}else{$(".pdp-veh-ymm-submit").html($(".pdp-veh-ymm-submit").data("updatevehicletext"));}preSelectedVehicle={};if($(this).hasClass("add-vehicle")){$(".pdp-veh-clear-link").click();}}}):null;$(".pdp-delete-saved-vehicle").on("click",".pdp-delete-yes",function(){var actionurl=NAPA.config.encodedContextPath+"/my-vehicle/remove-vehicle/"+$(this).data("vehicleid");ajaxLoader();$(".ajax-loader.hide").css({"pointer-events":"auto"});$("body").addClass("stuck");$.ajax({url:actionurl,type:"GET",data:"pdp-fitment"}).done(function(resp){if(resp==="success"){window.location.reload(true);}}).fail(function(err){console.error(err);});}).on("click",".pdp-delete-no",function(){$(this).parent().hide(100).siblings().show(100);$(this).closest(".pdp-delete-saved-vehicle").addClass("ncol-xs-2 ncol-md-2").removeClass("ncol-xs-7 ncol-md-6").siblings().addClass("ncol-xs-10 ncol-md-10").removeClass("ncol-xs-5 ncol-md-6");}).on("click",".delete-icon",function(){$(".delete-icon").show(100).siblings().hide(100);$(".pdp-delete-saved-vehicle").addClass("ncol-xs-2 ncol-md-2").removeClass("ncol-xs-7 ncol-md-6").siblings().addClass("ncol-xs-10 ncol-md-10").removeClass("ncol-xs-5 ncol-md-6");$(this).closest(".pdp-delete-saved-vehicle").removeClass("ncol-xs-2 ncol-md-2").addClass("ncol-xs-7 ncol-md-6").siblings().removeClass("ncol-xs-10 ncol-md-10").addClass("ncol-xs-5 ncol-md-6");$(this).hide(100).siblings().show(100);});}$('[rel="input-dropdown"]').on("mousedown",function(evt){evt.preventDefault();if(!$(this).find("input.vsautocomplete,input.vcautocomplete").is(":focus")){$(this).find("input.vsautocomplete,input.vcautocomplete").focus().select();}});$(document).on("click",".tymm-selected.active",function(){var clearedField=$(this).prev(".input-dropdown").find("input.vsautocomplete");$(this).removeClass("active");if(clearedField.length){clearedField.val("").data("endecaid","").focus();}$.each(vehSelectFields[clearedField.data("fieldid")].resetfields,function(ky,el){resetYMMField(vehSelectFields[el].fieldid);});});$('[rel="nol-slide-link"]').on("click",function(e){e.preventDefault();e.stopPropagation();if($($(this).data("targetselector")).length){if($($(this).data("targetselector")).is(":visible")){$(".veh-condition-modal").show();$(this).find(".icon-napa-arrow-up").addClass("icon-napa-arrow-down").removeClass("icon-napa-arrow-up");$($(this).data("targetselector")).slideUp(200);}else{$(".veh-condition-modal").hide();$(this).find(".icon-napa-arrow-down").addClass("icon-napa-arrow-up").removeClass("icon-napa-arrow-down");if($(this).data("clearfields")==true){preSelectedVehicle={};$($(this).data("targetselector")).slideDown(200,function(){if($(this).find(".vsautocomplete").length){$.each(vehSelectFields,function(ky,elobj){resetYMMField(elobj.fieldid,1);});$.each(vehSelectFields,populateField);}});}else{$($(this).data("targetselector")).slideDown(200);}$(".nol-slide-content:not("+$(this).data("targetselector")+")").hide(200);}}});if(typeof vehicleSelectorPresent!=="undefined"&&vehicleSelectorPresent){vsmdata.config.focusnext=false;vsPopulateFields();if(preSelectedVehicle&&typeof vehicleSelectorPresentPDP==="undefined"){$.each(preSelectedVehicle,function(objkey,objval){$(vehSelectFields[objkey].fieldid).attr("disabled","disabled").data("endecaid",objval.endecaid);$(vehSelectFields[objkey].fieldid).parent(".input-dropdown").next(".tymm-selected").removeClass("active").addClass("inactive").text(objval.value);});}}$("#search_form,.search_form_btn").on("submit",function(e){e.preventDefault();var textSearch=$(this).find("#textSearch").val()||$(this).find("#textSearchNrf").val()||$(this).find("input").val()||$(this).parent().parent().parent().find("input").val();textSearchAnalytics=textSearch;textSearch=textSearch.replace(/ /g,"+");var userText=$(".tt-highlight:first").text();analytics_query="";gsbSearch="&se=1";if($(this).data("stah")){analytics_query="&stah=true";}if($("#pageType").val()=="nrf"){analytics_query+="&isNrf=1";}var searchTextUrl=NAPA.config.encodedContextPath+"/search?text="+encodeURIComponent(textSearch)+"&referer=semantic"+gsbSearch+analytics_query+"&txtUser="+encodeURIComponent(userText);if($(".tt-suggestion").hasClass("tt-cursor")){try{analytics.SuggestEvent.SuggestEventTrackEvent(userText,textSearchAnalytics);}catch(err){console.error("Analytics Did Not Load. Error:",e);}}window.location.href=searchTextUrl;return false;});if($("#textSearch, .nrf-typeahead").length&&$("#textSearch, .nrf-typeahead").data("options").enabled){var data=new Bloodhound({datumTokenizer:function(datum){return Bloodhound.tokenizers.whitespace(datum.value);},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:NAPA.config.encodedContextPath+"/search/autocomplete/NapaTypeAheadSearchBox?referer=semantic&term=",filter:function(data){var position=1;if(data.searchTermsFound!=null&&typeof data.searchTermsFound[0]!="undefined"){if(data.searchTermsFound[0].partTypes.length){if(data.searchTermsFound.length>1&&!data.searchTermsFound[1].hasOwnProperty("subcat")){$.each(data.searchTermsFound[0].partTypes,function(i,obj){if(position<=4){data.searchTermsFound.splice(position,0,{searchTermName:obj.partType,subcat:1,searchTerm:data.searchTermsFound[0].searchTermName,naviData:obj.navigationData});}position++;});}}return $.map(data.searchTermsFound,function(search){return{value:search.searchTermName,subCatItem:search.subcat,keywordInput:search.searchTerm,navData:search.naviData,txtUser:data.searchTerm};});}return[];},replace:function(url,query){return url+query;}}});data.initialize();$("#textSearch, .nrf-typeahead").typeahead({hint:true,minLength:3,highlight:true},{limit:11,name:"data",display:function(item){if(item.subCatItem==1){var typeText=$("#textSearch").attr("data-type");return item.keywordInput+" "+typeText+" "+item.value;}else{return item.value;}},source:data.ttAdapter(),templates:{suggestion:function(data){if(data.subCatItem==1){var typeText=$("#textSearch").attr("data-type");return'<div class="subCat">'+typeText+" "+data.value+"</div>";}else{return"<div>"+data.value+"</div>";}}}}).on("typeahead:selected",function(e,item){if(item.subCatItem==1){var newUrl="/search?q="+encodeURIComponent(item.navData)+"&referer=plp&partTypeName="+encodeURIComponent(item.value)+"&keywordInput="+encodeURIComponent(item.keywordInput)+"&stah=spt&se=1&txtUser="+encodeURIComponent(item.txtUser);try{analytics.SuggestEvent.SuggestEventTrackEvent(item.txtUser,item.value);}catch(err){console.error("Analytics Did Not Load. Error:",e);}window.location.href=newUrl;}else{$(this).closest("form").data("stah","true").submit();}});}if($("[data-autocompleteindex]").length){$("[data-autocompleteindex]").each(function(i,field){if($autocomplete_suggestions[$(field).data("autocompleteindex")].length){$(field).removeAttr("disabled").autocomplete({lookup:$autocomplete_suggestions[$(field).data("autocompleteindex")],autoSelectFirst:false,triggerSelectOnValidInput:false,minChars:0,onSelect:function(suggestion){$("#"+$(this).data("hiddeninput")).val(suggestion.data);$(this).removeClass("invalid");$(this).parent(".input-dropdown").next(".tymm-selected").addClass("active").html(suggestion.value);$(this).closest("form").submit();}});}});}if($('[rel="vsm-suggession"]').length){$(document).on("click",'[rel="vsm-suggession"]',function(e){e.preventDefault();e.stopPropagation();var $that=$(this);try{if(_satellite){_satellite.setVar("suggestedLink",$that.text());_satellite.track("suggestedVehicle");}}catch(e){}$($(this).data("targetselector")).slideDown(200,function(){if($(this).find(".vsautocomplete").length){$.each(vehSelectFields,function(ky,elobj){resetYMMField(elobj.fieldid,1);});preSelectedVehicle={};preSelectedVehicle.makes={endecaid:$that.data("endecaid"),value:$that.data("suggestion")};$(vehSelectFields.makes.fieldid).attr("disabled","disabled").data("endecaid",preSelectedVehicle.makes.endecaid).val(preSelectedVehicle.makes.value);$(vehSelectFields.makes.fieldid).parent(".input-dropdown").next(".tymm-selected").removeClass("active").addClass("inactive").text(preSelectedVehicle.makes.value);$.each(vehSelectFields,populateField);}});$(".nol-slide-content:not("+$(this).data("targetselector")+")").hide(200);});}if($('[data-rel="vsm-suggestedveh"]').length){$(document).on("click",'[data-rel="vsm-suggestedveh"]',function(e){e.preventDefault();e.stopPropagation();var $that=$(this);var vehicleId=$that.data("vehicleid");var _requrl=NAPA.config.encodedContextPath+"/my-vehicle/make-default-Vehicle/"+vehicleId+"?referer="+$that.data("referer");$.ajax({url:_requrl,type:"GET",success:function(data){if(data=="success"){$("#"+vehicleId).parent("li").addClass("my-vehicle-item-selected").siblings().removeClass("my-vehicle-item-selected");var newVehicleContent=$("#"+vehicleId).html();$(".my-vehicle").find(".my-menu-value").html(newVehicleContent);$(".my-vehicle").find("#defaultVehiclePk").val(vehicleId);$(".my-vehicle").removeClass("my-menu-open");handleDeselectAllButtonShowHide("show");var searchAppIndexDataURL=$("#search-app-index-data").attr("data-url");if(searchAppIndexDataURL!=undefined&&searchAppIndexDataURL!=""){if(searchAppIndexDataURL.indexOf("c/job")==-1){window.location.href=searchAppIndexDataURL+"&referer=vehicleAdd";}else{window.location.href=searchAppIndexDataURL+"?referer=vehicleAdd";}}else{location.reload(true);}}},cache:false});});}imageSliderTemplate=function(data,t_count){var cssstyle="";if(t_count==1){cssstyle=" start-xs";}var template='<div class=" item">\n<img class="findit-thumbnail" src='+data.productImage+' />\n<p class="marg-xsv-none nol-fullWidth '+cssstyle+'"> '+data.description+"</p>\n</div>";$(".product-slider-wrapper .owl-carousel").append(template);};skeletonTemplate=function(){var nearbySkeleton='<div class="skeleton-wrapper">\n    <div class="skeleton-left">\n      <p>\n        <span class="skeleton-box" style="width:80%;"></span>\n        <span class="skeleton-box" style="width:85%;"></span>\n        <span class="skeleton-box" style="width:75%;"></span>\n      </p>\n      <p>\n        <span class="skeleton-box" style="width: 50%;"></span> </p>\n    </div>\n    <div class="skeleton-right">\n      <p><span class="skeleton-box" style="width: 50%"></span></p>\n      <p><span class="skeleton-box" style="width: 100%; height: 40px;"></span></p>\n    </div>\n  </div>';$(".featherlight .available-stores-list .store-items").last().after(nearbySkeleton);};onScrollitems=function(){if($(".check-nearby-store").is(":visible")){var finditData=$('[rel="checkNearbyStores"]').data();if($(".store-items").data("erecspecs")!="0"){finditData=$('[data-nearby-erecspecs="'+$(".store-items").data("erecspecs")+'"] ').data();}var quantity="1";var productsOnScroll=new Array();if($(".page-cartPage").is(":visible")||$(".page-mobile-cartPage").is(":visible")){$(".pod-wrapper").each(function(){var part;var partArr;if($(this).find(".pod-fulfilment .rol-message-wrapper .cart-fulfilment").is(":checked")||$_gmRestrictions=="CA"){part=$(this).find(".part-no").text();partArr=(part.split(/(\s+|\(|\)|\!)/)).filter(function(n){return n.trim();});}if(partArr){var partNo=partArr[1];var lineAbbrev=partArr[0];}var productUrl=$(this).find(".pod-image>img").attr("src");var productDescription=$(this).find(".product-title>a").text();var _eRecSpec=$(this).find(".part-no").attr("data-nearby-erecspecs");var data={partNumber:partNo,lineAbbrv:lineAbbrev,eRecSpecs:_eRecSpec,quantity:$(this).find(".productQty").val(),primaryImageUrl:productUrl,description:productDescription};if(data.partNumber!=undefined){productsOnScroll.push(data);}});}else{if($('[rel="plp-qty_'+finditData.nearbyErecspecs+'"]').length){quantity=$('[rel="plp-qty_'+finditData.nearbyErecspecs+'"]').val();}else{if($("#quantity"+finditData.nearbyQtyentrynum).length){quantity=$("#quantity"+finditData.nearbyQtyentrynum).val();}}quantity=$.isNumeric(quantity)?quantity:"1";var data={partNumber:finditData.nearbyPartnumber,lineAbbrv:finditData.nearbyLineabbr,description:finditData.nearbyDescription,primaryImageUrl:finditData.nearbyImageurl,eRecSpecs:finditData.nearbyErecspecs,quantity:quantity};if(data.partNumber!=undefined){productsOnScroll.push(data);}}var totalStoreitemsonpage=$(".featherlight .available-stores-list .store-items").length;var nearByStoreRequest={nearByStores:finditData.nearbyStore,pageType:finditData.nearbyPagetype,eRecSpecs:finditData.nearbyErecspecs,products:productsOnScroll,rolProductCount:productsOnScroll.length,totalQuantity:finditData.nearbyTotalitems,loadNearByStoresUsingZipcode:isUsingZip,storeSearch:{q:changedZip,lat:finditData.nearbyLat,lang:finditData.nearbyLong,radius:""},storeNum:finditData.nearbyFullstorenumber,startPage:storeSet,rowsPerPage:FinditNoofRows};if($(".featherlight .store-container").scrollTop()+$(".featherlight .store-container").innerHeight()>=$(".featherlight .store-container")[0].scrollHeight-124){$(".skeleton-wrapper").remove();if(totalStoreitemsonpage<totalRecords){findNearByStore({qtyentrynum:finditData.nearbyQtyentrynum,oldPrice:finditData.nearbyOldprice,nearbyPagetype:finditData.nearbyPagetype,AAData:AAData,req:nearByStoreRequest});}}}};destroyOwl=function(elm){$(".product-slider-wrapper .owl-carousel").children().remove();$(".product-slider-wrapper .owl-carousel").trigger("destroy.owl.carousel").removeClass("owl-carousel owl-loaded");$(".change-store-form-container,.search-form-container").hide();$(".change-store-message").hide();$("body").removeClass("stuck");storeSet=1;changedZip="";isUsingZip=false;};$(".zip-input-field").on("input",function(){if($(this).closest("form").parsley().validate()){e.preventDefault();}else{return false;}});$(" #btn-apply-zip").on("click",function(e){if($(this).closest("form").parsley().validate()){e.preventDefault();var zipcode=$("#changeZipcode").serialize();var zipcodeInput=$(".zip-input-field").val();$.ajax({url:NAPA.config.encodedContextPath+"/cart/updateZipcode",type:"POST",data:zipcode,success:function(result){$(".show-zipcode").html(zipcodeInput);$(".zip-input-field").val("");$(".zip-input-field-container").toggleClass("hidden-elem");if(!(window.location.pathname.indexOf("cart")>-1)){window.location.href=NAPA.config.encodedContextPath+"/checkout/multi/shippingoptions";}},error:function(result){console.log("error");}});}else{return false;}});let t;function sendIdleEventForAnalytics(e){console.log("####time out is over #######-->");try{let data=localStorage.getItem("idle_session_data");if(data){data=JSON.parse(data);analytics.klaviyoTrackEvent.idleTimeForPLPPage(data);}}catch(err){console.log("Error ~",err);}}function resetTimer(e){if(t){clearTimeout(t);}var time=window._geo_service_config.enableIdleSessionTimeForPlp;if(time&&!isNaN(time)){time=parseInt(time);time=time*1000;}else{time=7000;}t=setTimeout(sendIdleEventForAnalytics,time);}function noIdlingHere(){try{if(window.addEventListener){window.addEventListener("load",resetTimer,true);window.addEventListener("click",resetTimer,true);window.addEventListener("scroll",resetTimer,true);window.addEventListener("wheel",resetTimer,true);}}catch(err){}resetTimer();}$(document).on("geo_idle_session",function(e){if(e.originalEvent.detail){localStorage.setItem("idle_session_data",JSON.stringify(e.originalEvent.detail));}noIdlingHere();});$("#rightRail, .box").on("click","#btn-aaaApply",function(e){e.preventDefault();e.stopPropagation();var aaaAPIStatus="Error";var $form=$(this).closest("form");if(!$form.parsley().validate()){return false;}var apiUrl=NAPA.config.encodedContextPath+"/cart/aaa/apply";if($_gmRestrictions=="CA"){apiUrl=NAPA.config.encodedContextPath+"/cart/caa/apply";}var formdata={membershipId:$("#aaaCode").val(),referrerPage:$(this).data("referrer-page"),CSRFToken:NAPA.config.CSRFToken};if($_gmRestrictions=="US"){formdata.zipcode=$("#aaaZip").val();}else{if($_gmRestrictions=="CA"){formdata.zipcode="";}}var systemError=$(this).data("system-error");$.ajax({url:apiUrl,type:"POST",data:$.param(formdata),success:function(data){if(data.status=="success"||data.status=="A"){aaaAPIStatus="Active";if($_gmRestrictions=="US"){sendAAAStatusToAnalytics(aaaAPIStatus);}else{if($_gmRestrictions=="CA"){sendCAAStatusToAnalytics(aaaAPIStatus);}}window.location.reload(true);}else{if(data.status=="fail"){if(data.statusCode=="cancelled"){aaaAPIStatus="Cancelled";}var t_msg=data.messages;$(".aaaerrors").text(t_msg.toString());if($_gmRestrictions=="US"){sendAAAStatusToAnalytics(aaaAPIStatus);}else{if($_gmRestrictions=="CA"){sendCAAStatusToAnalytics(aaaAPIStatus);}}}else{$(".aaaerrors").text(systemError);if($_gmRestrictions=="US"){sendAAAStatusToAnalytics(aaaAPIStatus);}else{if($_gmRestrictions=="CA"){sendCAAStatusToAnalytics(aaaAPIStatus);}}}}},error:function(request,textStatus,error){$(".aaaerrors").text(systemError);if($_gmRestrictions=="US"){sendAAAStatusToAnalytics(aaaAPIStatus);}else{if($_gmRestrictions=="CA"){sendCAAStatusToAnalytics(aaaAPIStatus);}}}});});function sendAAAStatusToAnalytics(aaaAPIStatus){_satellite.setVar("aaaAPIStatus",aaaAPIStatus);_satellite.track("aaa_membership_applied");}function sendCAAStatusToAnalytics(aaaAPIStatus){_satellite.setVar("caaAPIStatus",aaaAPIStatus);_satellite.track("caa_membership_applied");}$("#rightRail, .box").on("click","#removeAAA",function(e){e.preventDefault();e.stopPropagation();var formdata={referrerPage:$(this).data("referrer-page"),CSRFToken:NAPA.config.CSRFToken};var systemError=$(this).data("system-error");$.ajax({url:NAPA.config.encodedContextPath+"/cart/aaa/remove",type:"POST",data:$.param(formdata),success:function(data){if(data.status=="success"){window.location.reload(true);}else{if(data.status=="fail"){var t_msg=data.messages;$(".aaaerrors").text(t_msg.toString());}else{$(".aaaerrors").text(systemError);}}},error:function(request,textStatus,error){$(".aaaerrors").text(systemError);}});});$("#aaaCode,#aaaZip").on("focus",function(){$(".aaaerrors").html("");});try{if(NAPA.config.clpSeoDesc.truncateDesc==1&&$(".category-description p").length){var catSeoDesc=Array();$.each($(".category-description p"),function(c_index,c_value){catSeoDesc.push(c_value);});var paragraph1=catSeoDesc[0].innerHTML;var seoDescMaxLen=NAPA.config.clpSeoDesc.maxLength;if(paragraph1.length>seoDescMaxLen){paragraph1=paragraph1.slice(0,seoDescMaxLen);}var possibleSelectors=".category-description p,.category-description h1:not(:first-child),.category-description h2:not(:first-child),.category-description h3:not(:first-child),.category-description h4:not(:first-child),.category-description h5:not(:first-child),.category-description h6:not(:first-child),.category-description strong:not(:first-child),.category-description ul";$(".category-description>.nol-ui p:last").append(" ").append($("<a>",{id:"js-seeLess","class":"link-blue",text:NAPA.config.clpSeoDesc.seeLess}).css({cursor:"pointer","text-transform":"lowercase"}));$(".category-description>.nol-ui").append($("<p>",{"class":"hidden-elem",html:paragraph1+"... <a id='js-seeMore' class='link-blue' style='cursor:pointer;text-transform:lowercase'>"+NAPA.config.clpSeoDesc.seeMore+"</a>"}));$(possibleSelectors).toggleClass("hidden-elem");$(document).on("click","#js-seeLess,#js-seeMore",function(event){event.preventDefault();$(possibleSelectors).toggleClass("hidden-elem");});}}catch(e){console.log(e);}});function updateCcpaStyling(){setTimeout(function(){var $stickyCartButtons=$(".sticky-checkout-mobile").first();if($(".CCPA.nol-ui").is(":visible")&&$stickyCartButtons.length){$stickyCartButtons.addClass("ccpa-visible");$("a#feedback_btn").attr("data-case","ccpa-visible");}else{$(".sticky-checkout-mobile").removeClass("ccpa-visible");$("a#feedback_btn").removeAttr("data-case");}},2000);}function updateEmptyCartContent(){var cookieRef;const cookieName="; sc2=";const aagCookieName=document.cookie.split(cookieName);if(aagCookieName.length===2){cookieRef=aagCookieName.pop().split(";").shift();}if(cookieRef){var prodCount;var prodCountCookie=decodeURIComponent(cookieRef);if(prodCountCookie){prodCount=prodCountCookie.split("/")[1];var button=$('button:contains("Continue Shopping")');if(prodCount&&prodCount>0){if(button){$(button).removeClass("button-primary blue");$(button).addClass("nol-button continueShopping");$(button).parent().addClass("cs-cart__buttons");}$(".aag-cart-count").text(prodCount);$(".aag-count-info-wrapper").html($(".nol-universal-cart-wrapper").html()).removeClass("hidden-elem");}else{if(button){$(button).addClass("button-primary blue");$(button).removeClass("nol-button continueShopping");$(button).parent().removeClass("cs-cart__buttons");}}}}}function populateAccessoriesCartData(){const napaDefaultDomain=$("#aag-path-link").val();window.scrollTo(0,0);var cookieId;var redirectUrl;const cookieName="; sc2=";const docCookie=document.cookie;const aagCookieRef=docCookie.split(cookieName);if(aagCookieRef.length===2){cookieId=aagCookieRef.pop().split(";").shift();}if(cookieId){cookieId=cookieId.split("%")[0];redirectUrl=napaDefaultDomain+"/accessories/cart/"+cookieId;aagCartRedirectUrl=redirectUrl;var dataUrl=redirectUrl+".json";$.ajax({url:dataUrl,success:function(response){if(response&&response.shopping_cart){const cartData=response.shopping_cart;if(cartData.cart_items.length>0){$(".napa-custom-cart").show();$(".nol-aag-container").show();if($(".empty-cart-continue-shop-wrapper")){$(".empty-cart-continue-shop-wrapper").hide();}if($("#nol-cart-section-title")){$("#nol-cart-section-title").addClass("skinnier");}$("#aag-cart-total").text(cartData.cart_items.length);$(".aag-item-total").text(cartData.cart_items.length);$(".aag-cart-amt").text("$"+cartData.regular_subtotal/100);cartData.cart_items.forEach(function(item,index){if(index<=3){var imgWrapper="<div class='aag-prod-image'>";const imgurl=napaDefaultDomain+item.small_image;imgWrapper+="<img src="+imgurl+"></div>";var result=DOMPurify.sanitize(imgWrapper);$(".aag-prod-image-container").append(result);}});var extraProdlength=cartData.cart_items.length-4;var extraProdlengthMob=cartData.cart_items.length-2;var extrProdWrapper='<div class="aag-prod-count">+ '+extraProdlength+"</div>";$(".aag-prod-image-container").append(extrProdWrapper);const customCartContent=$(".napa-custom-cart").html();$(".mobile-napa-custom-cart").html(customCartContent);var mobileCustomCart=document.querySelector("#mobile-custom-cart");if(mobileCustomCart){const mobileCheckoutbtn=mobileCustomCart.querySelector(".btn-aag-checkout");if(mobileCheckoutbtn){mobileCheckoutbtn.addEventListener("click",function(){var a=document.createElement("a");a.target="_self";a.href=aagCartRedirectUrl;a.click();triggerAagCartAnalytics();});}var aagProdEle=mobileCustomCart.querySelector(".aag-prod-count");if(aagProdEle){aagProdEle.innerText="+ "+extraProdlengthMob;}}if(extraProdlength<=0){var desktopCart=document.querySelector(".napa-custom-cart");if(desktopCart){var countContainer=desktopCart.querySelector(".aag-prod-count");countContainer.style.display="none";}}if(extraProdlengthMob<=0){var mobileCart=document.querySelector("#mobile-custom-cart");if(mobileCart){var countContainerMob=mobileCart.querySelector(".aag-prod-count");countContainerMob.style.display="none";}}if($("#nol-empty-cart").val()){updateEmptyCartContent();}AAData.cartButtonAvailable="Yes";}}},error:function(jqXHR,exception){console.log("Unable to fetch AAG Cart Data",jqXHR,exception);}});}}$("#aag-router").click(function(e){if($("#mobile-custom-cart").is(":visible")){$(window).scrollTop($("#mobile-custom-cart").position().top);}});$(".btn-aag-checkout").click(function(e){var a=document.createElement("a");a.target="_self";a.href=aagCartRedirectUrl;a.click();triggerAagCartAnalytics();});function triggerAagCartAnalytics(){var ddcartClick={eventInfo:{eventName:"cartClickEvent",type:"cart",timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(ddcartClick);try{analytics.sendCustomEvent("cartClickEvent");}catch(error){console.error("Analytics Did Not Load ",error);}}function setCartItemsMessages(){var classList=$(".item_availability_msg");var cartItemsObj=[];$.each(classList,function(index,value){var item=new Object();item.productId=value.id;item.deliveryMsg=value.innerText.trim();if(value.attributes["data-abbr"]!=undefined&&value.attributes["data-name"]!=undefined){item.abbr=value.attributes["data-abbr"].value;item.name=value.attributes["data-name"].value;}cartItemsObj.push(item);console.log(value.id+" msg "+value.innerText);});return cartItemsObj;}function compareCartItemMessages(){var oldArray=[];var cartItemMsg=$("#cartItemsMessageRequestsOld").text();if(cartItemMsg==null||cartItemMsg.trim().length==0){return;}else{oldArray=JSON.parse($("#cartItemsMessageRequestsOld").text());var newMsg=$(".item_availability_msg");var newArray=[];$.each(newMsg,function(index,item){var product=new Object();product.productId=item.id;product.deliveryMsg=item.innerText.trim();newArray.push(product);});var msgArray=[];var countOutOfStock=0;var countChangedPickupDates=0;var outOfStockMsg=$("#cartOutOfStockMsg").text().trim();for(var i=0;i<oldArray.length;i++){for(var j=0;j<newArray.length;j++){if(oldArray[i].productId==newArray[j].productId){if(((oldArray[i].deliveryMsg==outOfStockMsg)&&(newArray[j].deliveryMsg==outOfStockMsg))||(newArray[j].deliveryMsg==outOfStockMsg)){countOutOfStock++;}else{if(oldArray[i].deliveryMsg!=newArray[j].deliveryMsg){if(oldArray[i].deliveryMsg.indexOf("Call")!=-1&&newArray[i].deliveryMsg.indexOf("Call")!=-1){continue;}$("#"+newArray[j].productId+"_product").text(oldArray[i].abbr+" "+newArray[j].productId+" "+oldArray[i].name);$("#"+newArray[j].productId+"_oldDeliveryMsg").text(oldArray[i].deliveryMsg);$("#"+newArray[j].productId+"_newDeliveryMsg").text(newArray[j].deliveryMsg);$("#"+newArray[j].productId+"_changedPickupDate").removeClass("hidden-elem");countChangedPickupDates++;}}}}}if(countOutOfStock>0){$("#countNotAvailableItems").text(countOutOfStock);$("#itemNotAvailable").removeClass("hidden-elem");}if(countChangedPickupDates>0){$("#countItemChangedPickupDate").text(countChangedPickupDates);$("#noOfItemChangedPickupDate").removeClass("hidden-elem");}}}var getParamSeparator=function(){return window.location.href.indexOf("?")<0?"?":"&";};var addUrlParam=function(search,key,val){var newParam=key+"="+val,params="?"+newParam;if(search){params=search.replace(new RegExp("([?&])"+key+"[^&]*"),"$1"+newParam);if(params===search&&search.indexOf(key)==-1){params+="&"+newParam;}}return params;};var getUrlParam=function(name,url){if(!url){url=window.location.href;}name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results){return null;}if(!results[2]){return"";}return decodeURIComponent(results[2].replace(/\+/g," "));};$(".navigation-item").each(function(i,obj){$(this).on("click",function(){$(".navigation-item").find(".navigation-link").attr("aria-expanded","false");if($(this).hasClass("navigation-open")){$(this).find(".navigation-link").attr("aria-expanded","true");}});});$("a.order-view").on("click",function(){var expand=$("a.order-view").attr("aria-expanded");if(expand=="false"){$("a.order-view").attr("aria-expanded","true");}else{$("a.order-view").attr("aria-expanded","false");}});$(".ptlp-cat-pod").on("click",function(){$(".ajax-loader").fadeIn();$(".ajax-loader").attr("aria-busy","true");setTimeout(function(){$(".ajax-loader").fadeOut();},4000);});function adaAlertError(element){$(element).attr("aria-live","assertive");$(element).attr("role","log");var errorMessage=$(element).html();$(element).html("");setTimeout(function(){$(element).html(errorMessage);},50);}$(document).ready(function(){function documentOffsetTop(elem){var $window=$(window),$element=$(elem),elementTop=$element.offset().top,viewportHeight=$window.height(),scrollIt=elementTop-(viewportHeight/2);$window.scrollTop(scrollIt);}function checkForVisibility(elem){var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();var fullyVisible=(elemBottom<=docViewBottom)&&(elemTop>=docViewTop);if(!fullyVisible){documentOffsetTop(elem);}}$(".nol-article-detail .filter-panel-title, .fa-questions .filter-drop-toggle").click(function(e){var el=$(this).parent();var active=$(el).hasClass("filter-panel-open")||$(el).hasClass("filter-drop-open");if(!active){setTimeout(function(){checkForVisibility(el);},100);}});var searchHintElement=$(".dark.navigation-search-input.tt-hint,.dark.nav-search-input.tt-hint,.search_form_btn .nrf-typeahead.tt-hint");var searchElement=$(".dark.navigation-search-input.tt-input, .dark.nav-search-input.primary-search-input.tt-input,.search_form_btn .nrf-typeahead.tt-input");searchHintElement.css("visibility","hidden").attr("aria-hidden","true");searchElement.on("focus",function(){searchHintElement.css("visibility","visible").attr("aria-hidden","false");});searchElement.on("blur",function(){searchHintElement.css("visibility","hidden").attr("aria-hidden","true");});var targetNode=document.querySelector(".talk-to-expert-link");if(targetNode){var MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var boldChatObserver=new MutationObserver(mutationHandler);var obsConfig={childList:true,subtree:true};boldChatObserver.observe(targetNode,obsConfig);function mutationHandler(mutationRecords){mutationRecords.forEach(function(mutation){if(typeof mutation.addedNodes=="object"){if($(mutation.addedNodes).text()==""){$(mutation.addedNodes).css("display","none");}boldChatObserver.disconnect();}});}}$("#cc-number").blur(function(){setTimeout(function(){var errMsg=$("#cc-number+.error-messages").text().trim();if(errMsg){$("#cc-number").attr("aria-label",errMsg).attr("aria-invalid","true");}else{$("#cc-number").attr("aria-label",errMsg).attr("aria-invalid","false");}},100);});$(".checkout-btn[href], .nol-block-shipping-options button.checkout-btn").click(function(){console.log("Checkout Now Clicked start");$(".ajax-loader").show();$(".ajax-loader.hide").css({"pointer-events":"auto"});$("body").addClass("stuck");console.log("Checkout Now Clicked end");});});function ariaHideAllElements(ariaClass){var identifierClass="aria-identifier-class";if(ariaClass){identifierClass=ariaClass;}var focusableElements=$("body").find("*").not("script, style, [aria-hidden=true]");focusableElements.each(function(idx,li){$(li).attr("aria-hidden",true);$(li).addClass(identifierClass);});}function ariaShowElements(modal,ariaClass){var element="body";var identifierClass="aria-identifier-class";if(ariaClass){identifierClass=ariaClass;}if(modal){element=modal;$(modal).removeAttr("aria-hidden");$(modal).removeClass(identifierClass);}var focusableElements=$(element).find("."+identifierClass);focusableElements.each(function(idx,li){$(li).removeAttr("aria-hidden");$(li).removeClass(identifierClass);});}function carouselImageFullyVisible(elem,parent){var win=$(parent);var viewport=$(win).offset();if(typeof viewport!==typeof undefined){viewport.right=viewport.left+$(win).outerWidth();viewport.bottom=viewport.top+$(win).outerHeight();}var bounds=$(elem).offset();if(typeof bounds!==typeof undefined){bounds.right=bounds.left+$(elem).outerWidth();bounds.bottom=bounds.top+$(elem).outerHeight();}if(typeof bounds!==typeof undefined&&typeof viewport!==typeof undefined){return{visible:((bounds.left>=viewport.left&&bounds.left<=viewport.right)&&(bounds.right>=viewport.left&&bounds.right<=viewport.right)),translate:bounds.left>=viewport.left&&bounds.left<=viewport.right?"right":"left"};}}function replaceDuplicateIds(id){var attribute='[id^="'+id+'"]:not(:first)';$(attribute).each(function(index){$(this).attr("id",id+"-"+index);$(this).siblings('[for="'+id+'"]').attr("for",id+"-"+index);});}$(document).ready(function(){$(".CCPA").slideDown("slow");$(".CCPA-btn").on("click",function(){try{$(".CCPA").slideUp("slow");var exDate=$(".ccpaEpireDate").val();var CCPACookie=new Date;CCPACookie.setTime(CCPACookie.getTime()+(parseInt(exDate)*24*60*60*1000));document.cookie="CCPA=yes; path=/; expires="+CCPACookie.toGMTString()+",Secure;SameSite=Strict";updateCcpaStyling();}catch(err){console.log(err);}});function getCookie(c_name){try{var c_value=document.cookie,c_start=c_value.indexOf(" "+c_name+"=");if(c_start==-1){c_start=c_value.indexOf(c_name+"=");}if(c_start==-1){c_value=null;}else{c_start=c_value.indexOf("=",c_start)+1;var c_end=c_value.indexOf(";",c_start);if(c_end==-1){c_end=c_value.length;}c_value=unescape(c_value.substring(c_start,c_end));}return c_value;}catch(err){console.log(err);}}try{var acookie=getCookie("CCPA");if(acookie){$(".CCPA").remove();}if($("form#addNewAddressForm").length&&$("form.edit-po-shipping").length){$("form#addNewAddressForm").parsley().validate();}}catch(err){console.log(err);}var accesoriescookie=getCookie("sc2");if(accesoriescookie){var getaccessoriesvalue=accesoriescookie.split("%")[0];var getaccesorieslink=getaccessoriesvalue.split("/")[0];var noofaccesoriesitem=getaccessoriesvalue.split("/")[1];var accesoriescartElement=$(".accesories-cart-messages");var redirectPath=$("#napa-domain-order-confirmation").val();if(accesoriescartElement&&noofaccesoriesitem&&noofaccesoriesitem>0){$(".accesories-cart-messages").find(".accesories-notification-content").append("<p>Order placed succesfully-we are reminding you there are still "+noofaccesoriesitem+' item in your  <a href="'+redirectPath+getaccesorieslink+'" class="link-blue">accessories cart.</a></p>');$(".aag-cart-container-order-submission").show();}else{$(".aag-cart-container-order-submission").hide();}}$(document).on("geo_attribution_token_changed",function(){const attributionToken=getCookie("attribution_token");if(window._geo_service_config.enableGoogleRetailAttributionToken==="true"&&attributionToken){window.AAData.attributionToken=attributionToken;}else{if(window.AAData.attributionToken){delete window.AAData.attributionToken;}}});$(document).on("change","#autocare-type-select,.searchby2miles_select",function(){autocare_validate_submit();});$(document).on("submit",".form_autocare",function(e){e.preventDefault();$(this).find("#autocare-search-button").click();});$(document).on("click","#autocare-search-button",function(e){e.stopPropagation();$("#autocare-search-input").data("initial-query","");if($("#autocare-search-input").parsley().validate()==true){autocare_form_submit();}else{$(this).focus();}});$(document).on("input","#autocare-search-input",function(){$("#autocare-search-input").data("initial-query","");});function autocare_validate_submit(){if($("#autocare-search-input").data("initial-query")!=""||$("#autocare-search-input").parsley().validate()==true){autocare_form_submit();}else{$("#autocare-search-input").focus();}}function autocare_form_submit(){var storetype=$("#autocare-type-select").val(),location=$("#autocare-search-input").val()?$("#autocare-search-input").val():$("#autocare-search-input").data("initial-query");var sortby=$(".sortby_checkbox:checked").val();var distance=$(".searchby2miles_select:not([disabled])").length?$(".searchby2miles_select:not([disabled])").val():null;$("#geo_storelist").attr({storetype:storetype,location:location,sortby:sortby,distance:distance});}$(document).on("nol_search_popuplar_category_analytics_menu_item_clicked",function(e,txt){const data=e.originalEvent.detail;if(!data.title){return;}var vClicksTrackEvent={eventInfo:{eventName:"menuItemClicked",tab:"searchPopout",section:"Popular",text:data.title,timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(vClicksTrackEvent);localStorage.setItem("navigationSearchEvent",JSON.stringify(window.AAData.event));console.log("window.AAData ~~~>",window.AAData.event);try{analytics.sendCustomEvent("menuItemClicked");}catch(error){console.error("Analytics Did Not Load ",error);}});$(document).on("click",".image-link-flyout",function(e,txt){const name=$(this).text();const text=e.target.dataset.category||e.target.innerText||"";var vClicksTrackEvent={eventInfo:{eventName:"menuItemClicked",tab:"searchPopout",section:"categories",text:text,timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(vClicksTrackEvent);localStorage.setItem("navigationSearchEvent",JSON.stringify(window.AAData.event));try{analytics.sendCustomEvent("menuItemClicked");}catch(error){console.error("Analytics Did Not Load ",error);}});$(document).on("nol_search_analytics_menu_item_clicked",function(e){const data=e.originalEvent.detail;if(!(data)){return;}var vClicksTrackEvent={eventInfo:{eventName:"menuItemClicked",tab:data.tab,section:data.section,text:data.text,timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(vClicksTrackEvent);window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event=data;localStorage.removeItem("navigationSearchEvent");console.log("window.AAData ~~~>",window.AAData.event);try{analytics.sendCustomEvent("menuItemClicked");}catch(error){console.error("Analytics Did Not Load ",error);}});$(document).on("click",".geo-global-search-most-popular-catergory-link",function(e,txt){const name=$(this).attr("name");var vClicksTrackEvent={eventInfo:{eventName:"menuItemClicked",tab:"searchPopout",section:"Trending",text:name,timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(vClicksTrackEvent);localStorage.setItem("navigationSearchEvent",JSON.stringify(window.AAData.event));console.log("window.AAData ~~~>",window.AAData.event);try{analytics.sendCustomEvent("menuItemClicked");}catch(error){console.error("Analytics Did Not Load ",error);}});$(document).on("click","#see_more",function(e){e.stopPropagation();if($(this).hasClass("loading")){return false;}var scrolllist=$(this).closest("#__store_container").find(".store-list-modal");var scroll_h=scrolllist.length?scrolllist[0].scrollHeight:0;$("#see_more").addClass("loading");var event=new CustomEvent("e_seemore",{detail:{pagenumber:$(this).attr("data-pagenumber"),scroll_h:scroll_h}});document.getElementById("geo_storelist").dispatchEvent(event);});$(document).on("geo_analyticsseemore",function(e){try{analytics.autocareFinder.autocareSeemoreShopsTrackEvent(e.originalEvent.detail);}catch(err){console.error("Analytics Did Not Load - See more Stores",err);}});function break_address(str,newline){var t=0;return str.replace(/,/g,function(match){t++;return(t==2)?newline?newline:"<br>":match;});}function format_phone_number(phoneNumberString){var cleaned=(""+phoneNumberString).replace(/\D/g,"");var match=cleaned.match(/^(\d{3})(\d{3})(\d{4})$/);if(match){return"("+match[1]+") "+match[2]+"-"+match[3];}return null;}function generateMarkerIcon(index,fillColor,textColor){try{fillColor=fillColor||"#0D2A8A";textColor=textColor||"#FFFFFF";if(fillColor&&fillColor.indexOf("#")==-1){fillColor="#"+fillColor;}if(textColor&&textColor.indexOf("#")==-1){textColor="#"+textColor;}const svg='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="32" viewBox="0 0 24 36"><path d="M12 0C5.37 0 0 5.37 0 12c0 7.5 12 24 12 24s12-16.5 12-24c0-6.63-5.37-12-12-12z" fill="'+fillColor+'"/><text x="12" y="16" text-anchor="middle" font-size="12" fill="'+textColor+'" font-family="Arial, sans-serif" font-weight="bold" dy=".3em">'+index+"</text></svg>";return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(svg);}catch(error){return"";}}$(document).on("geo_initmaps",function(evt){if(evt.originalEvent.detail.hasOwnProperty("error")){document.getElementById("geo-maps").innerHTML="";return;}var myLatLng=evt.originalEvent.detail.center;var map=new google.maps.Map(document.getElementById("geo-maps"),{zoom:10,streetViewControl:false,center:myLatLng});var infowindow;for(var i=0;i<evt.originalEvent.detail.markers.length;i++){index=1+i;(function(){var g_url=evt.originalEvent.detail.markers[i].url,g_name=evt.originalEvent.detail.markers[i].title,g_address=evt.originalEvent.detail.markers[i].address,g_phonenumber=evt.originalEvent.detail.markers[i].phonenumber,g_facilityid=evt.originalEvent.detail.markers[i].facilityId;var g_aadata={};g_aadata.facilityId=evt.originalEvent.detail.aaData[i].facilityId;g_aadata.positionNumber=evt.originalEvent.detail.aaData[i].positionNumber;g_aadata.facilityName=evt.originalEvent.detail.aaData[i].facilityName;g_aadata.yelpRating=evt.originalEvent.detail.aaData[i].yelpRating;g_aadata.googleRating=evt.originalEvent.detail.aaData[i].googleRating;g_aadata.badgesDisplayed=evt.originalEvent.detail.aaData[i].badgesDisplayed;var marker=new google.maps.Marker({position:evt.originalEvent.detail.markers[i].position,map:map,title:evt.originalEvent.detail.markers[i].title+"\n"+break_address(evt.originalEvent.detail.markers[i].address,"\n")+"\n"+format_phone_number(g_phonenumber),id:i,icon:generateMarkerIcon(index,evt.originalEvent.detail.markers[i].pincolor,evt.originalEvent.detail.markers[i].fontcolor)});google.maps.event.addListener(marker,"click",function(){if(infowindow){infowindow.close();}infowindow=new google.maps.InfoWindow({content:'<div style="overflow: hidden;" class="aadata-autocare-item"><a data-aadata-autocare-click="Click to Store Page from Map" href='+g_url+' style="font-weight:bold">'+g_name+"</a><br/>"+break_address(g_address)+"<br/>"+format_phone_number(g_phonenumber)+'<br/><a href="#"  class="blue getDirectionsLink" style="font-weight:bold" data-aadata-autocare-click="Get Directions from Map" data-facilityId="'+g_facilityid+'">Get Directions </a> <span class="aadata-trackinginfo"  data-facilityId="'+g_aadata.facilityId+'" data-positionNumber="'+g_aadata.positionNumber+'" data-facilityName="'+g_aadata.facilityName+'" data-yelpRating="'+g_aadata.yelpRating+'" data-googleRating="'+g_aadata.googleRating+'" data-badgesDisplayed="'+g_aadata.badgesDisplayed+'"></span></div>',disableAutoPan:true});infowindow.open(map,marker);});})();}gmPlacesSelector="autocare-search-input";initAutocomplete();});$(document).on("geo_updatepagenumber",function(et){if(et.originalEvent.detail.pagenumber>0){$("#see_more").css({display:"block"}).attr("data-pagenumber",et.originalEvent.detail.pagenumber);setTimeout(function(){$("#see_more").removeClass("loading");$("#see_more>span").removeClass();},2000);}else{$("#see_more").css({display:"none"});}if(et.originalEvent.detail.scroll_h!=null){var sc_H=et.originalEvent.detail.scroll_h;setTimeout(function(){scroll_ac_storelist(sc_H);},200);}});function scroll_ac_storelist(h){var storelist=$("#see_more").closest("#__store_container").find(".store-list-modal");if(storelist.length&&h<storelist[0].scrollHeight){$("#see_more").closest("#__store_container").find(".store-list-modal").animate({scrollTop:h},100);}if(window.innerWidth<980){$("#geo_storelist").find(".store-list-modal").css("max-height","calc(100vh - 330px)");}}$(document).on("change",".sortby_checkbox",function(){if(this.checked){$(".sortby_checkbox").not(this).prop("checked",false);if(!$("#searchby2miles").val()&&$(this).val()==2){$("#searchby2miles").val("50");}autocare_validate_submit();}else{this.checked=true;}});$(document).on("geo_tabcallback",function(et){if(et.originalEvent.detail.callback=="redrawmap"){redrawmap();}});function redrawmap(){ACC.storefinder.drawMap("map_canvas");}if($("[data-dfs-cartpage]").length){var $this=$("[data-dfs-cartpage]"),newcartObj;var localcart=localStorage.getItem("dfs-cart");if(localcart!=null){var retrievedCart=JSON.parse(localcart);if(retrievedCart.cartid==$this.data("dfs-cartid")){if(retrievedCart.storeid!=$this.data("dfs-storeid")){if(retrievedCart.dfsitems&&!$this.data("dfs-items")){$this.removeClass("hidden-elem");}}}}newcartObj={cartid:$this.data("dfs-cartid"),storeid:$this.data("dfs-storeid"),dfsitems:$this.data("dfs-items")?true:false};localStorage.setItem("dfs-cart",JSON.stringify(newcartObj));}StorePageTrackLinks=function(linkdata){var href=window.location.href;var store_id=href.substring(href.lastIndexOf("/store/")+7,(href.lastIndexOf("?")===-1?href.length:href.lastIndexOf("?")));var ddStoreClicksTrackEvent={eventInfo:{eventName:"StorePageClickTracks",type:"NOL store",timeStamp:new Date(),processed:{adobeAnalytics:false}},clickTrackInfo:{StoreID:store_id,clickedFor:linkdata.clickedFor.trim()}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(ddStoreClicksTrackEvent);try{analytics.sendCustomEvent("StorePageClickTracks");}catch(error){console.error("Analytics Did Not Load ",error);}};$(".nol-store-detail-margin-rebates").on("click","a",function(e){if($(this).attr("target")!="_blank"){e.preventDefault();}var href=window.location.href;var this_href=$(this).attr("href");var this_type=$(this).find("img").attr("alt");var store_id=href.substring(href.lastIndexOf("/store/")+7,(href.lastIndexOf("?")===-1?href.length:href.lastIndexOf("?")));var ddClicksTrackEvent={eventInfo:{eventName:"NOLStoreClickTracks",type:"NOL store",timeStamp:new Date(),processed:{adobeAnalytics:false}},clickTrackInfo:{StoreID:store_id,linkURl:this_href,linkType:this_type}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(ddClicksTrackEvent);try{analytics.sendCustomEvent("NOLStoreClickTracks");}catch(error){console.error("Analytics Did Not Load ",error);}if($(this).attr("target")!="_blank"){window.location.href=this_href;}});$(document).on("click","#store-dtls-make-my-store,#store-dtls-deselect-store",function(){StorePageTrackLinks({clickedFor:$(this).text()});});$("body.page-mobile-storefinderPage").on("click",".store-detail .store-listing-address a",function(){var clickedFor="Address";if($(this).attr("href").indexOf("tel:")!==-1){clickedFor="Phone Numbers";}StorePageTrackLinks({clickedFor:clickedFor});});$("body").on("click",".notification-remove",function(){$(this).closest(".notification").detach();});$("body").on("click",".aadata-store-item a,.aadata-store-item button",function(){var storeID,clickedFor=null,positionNumber,searchTerm,searchCategory="Other",this_parent_data=$(this).closest(".aadata-store-item").data();storeID=this_parent_data.storeid;positionNumber=this_parent_data.storeposition;searchTerm=globalSearchValue==""?"Not Entered":$("#store-search-input").data("initial-query");if(searchTerm=="Not Entered"){searchCategory="Not Entered";}else{if(/^[0-9]{5}$|^[a-zA-Z][0-9][a-zA-Z] ?[0-9][a-zA-Z][0-9]$/g.test(searchTerm)){searchCategory="Zipcode";}else{if(/^[a-zA-Z ]*$/g.test(searchTerm)){searchCategory="City/State";}}}if($(this).data("aadata-store-click")!=null){clickedFor=$(this).data("aadata-store-click");}else{if($(this).attr("href").indexOf("tel:")!==-1){clickedFor="Phone Numbers";}}if(clickedFor!==null){try{analytics.storeFinder.storeSpecificClickTracks(storeID,clickedFor,positionNumber,searchTerm,searchCategory);}catch(err){console.error("Analytics Did Not Load ",err);}}});$("body").on("click",".aadata-mappopup",function(){var storeID=$(this).data("aadata-storeid"),searchTerm,searchCategory="Other",clickedFor=$(this).data("aadata-store-click"),positionNumber=$(this).data("aadata-storeposition");searchTerm=globalSearchValue==""?"Not Entered":$("#store-search-input").data("initial-query");if(searchTerm=="Not Entered"){searchCategory="Not Entered";}else{if(/^[0-9]{5}$|^[a-zA-Z][0-9][a-zA-Z] ?[0-9][a-zA-Z][0-9]$/g.test(searchTerm)){searchCategory="Zipcode";}else{if(/^[a-zA-Z ]*$/g.test(searchTerm)){searchCategory="City/State";}}}try{analytics.storeFinder.storeSpecificClickTracks(storeID,clickedFor,positionNumber,searchTerm,searchCategory);}catch(err){console.error("Analytics Did Not Load ",err);}});removeURLParameter=function(url,parameter){var urlparts=url?url.split("?"):[];if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+"=";var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-->0;){if(pars[i].lastIndexOf(prefix,0)!==-1){pars.splice(i,1);}}if(pars.join("&")!=""){url=urlparts[0]+"?"+pars.join("&");}else{url=urlparts[0];}return url;}else{return url;}};var querystr=window.location.search.substr(1);if(querystr!=""&&querystr.indexOf("storelocator-modal")!=-1){var virtualLink=document.createElement("a");virtualLink.setAttribute("class","change-my-store-link hidden-elem");if(querystr.indexOf("storelocator-modal=autocare")!=-1){virtualLink.setAttribute("data-facilitytype","autocare");virtualLink.setAttribute("href","/store-finder?q=&facilitytype=autocare");}else{virtualLink.setAttribute("href","/store-finder?q=");}document.querySelector("body").append(virtualLink);virtualLink.click();}var aaDataPreviousTab=null;$(document).on("geo_tabopened",function(){if(($("#napaStoreLocator").find('[data-tab-header="tab_napastore"]').length||$("body.page-mobile-storefinderPage").find('[data-tab-header="tab_napastore"]').length)&&($("#napaStoreLocator").find('[data-tab-header="tab_napastore"]').hasClass("active")||$("body.page-mobile-storefinderPage").find('[data-tab-header="tab_napastore"]').hasClass("active"))&&aaDataPreviousTab!=="store"){try{aaDataPreviousTab="store";analytics.storeFinder.modalOpen("STORE",AAData.page.pageName,aaSearchInfo);}catch(err){console.error("Analytics Did Not Load ",err);}}else{if($('[data-tab-header="tab_napaautocare"]').hasClass("active")){aaDataPreviousTab="autocare";}}});if($('form[name="makeMyStoreForm"]').length){$('input[name="storeReferer"]').val(removeURLParameter($('input[name="storeReferer"]').val(),"store"));}$("body").on("click",".aadata-autocare-item a,.aadata-autocare-item button",function(){if($(this).attr("data-aadata-track-analytics")=="notrack"){return false;}var this_autocare_data=$(this).closest(".aadata-autocare-item").find(".aadata-trackinginfo").data();var trackinginfo={};trackinginfo.facilityID=this_autocare_data.facilityid;trackinginfo.facilityName=this_autocare_data.facilityname;trackinginfo.positionNumber=this_autocare_data.positionnumber;trackinginfo.yelpRating=this_autocare_data.yelprating!==undefined?this_autocare_data.yelprating:0;trackinginfo.googleRating=this_autocare_data.googlerating!==undefined?this_autocare_data.googlerating:0;trackinginfo.badgesDisplayed=null;trackinginfo.badgeName=null;trackinginfo.badgesDisplayed=this_autocare_data.badgesdisplayed;trackinginfo.searchCategory="Other";trackinginfo.searchTerm=$("#autocare-search-input").val()!=""?$("#autocare-search-input").val().trim():"Not Entered";if(trackinginfo.searchTerm=="Not Entered"){trackinginfo.searchCategory="Not Entered";}else{if(/^[0-9]{5}$|^[a-zA-Z][0-9][a-zA-Z] ?[0-9][a-zA-Z][0-9]$/g.test(trackinginfo.searchTerm)){trackinginfo.searchCategory="Zipcode";}else{if(/^[a-zA-Z ]*$/g.test(trackinginfo.searchTerm)){trackinginfo.searchCategory="City/State";}}}if($(this).data("aadata-autocare-click")!=null){trackinginfo.clickedFor=$(this).data("aadata-autocare-click");if($(this).data("aadata-autocare-badge")!==undefined){trackinginfo.badgeName=$(this).data("aadata-autocare-badge");}}else{if($(this).attr("href").indexOf("tel:")!==-1){trackinginfo.clickedFor="Get Phone Number";}else{if($(this).attr("href").indexOf("emailto:")!==-1){trackinginfo.clickedFor="Get Email";}}}if($(this).closest(".aadata-autocare-item").find(".aadata-trackinginfo").hasClass("aadata-autocare-details")){try{analytics.autocareFinder.autocareStoreDetailClicksTrackEvent(trackinginfo);}catch(err){console.error("Analytics Did Not Load -- Autocare details clicktrack",err);}}else{try{analytics.autocareFinder.autocareSpecificClicksEvent(trackinginfo);}catch(err){console.error("Analytics Did Not Load -- Autocare Modal clicktrack",err);}}});$(document).on("geo_analyticssearch",function(evt){if(evt.originalEvent.detail.propertychanged==="isvisible"){var popupinfo={tabSelected:"Auto Care",pageName:AAData.page.channel,totalFacilityCount:evt.originalEvent.detail.searchInfo.searchResultCount,searchResults:evt.originalEvent.detail.searchInfo.storeDetails,searchedBy:evt.originalEvent.detail.searchInfo.searchedBy,autocareType:evt.originalEvent.detail.searchInfo.searchedFor,SelectedMiles:evt.originalEvent.detail.searchInfo.selectedMiles};try{analytics.autocareFinder.autocareLocatorPopupOpens(popupinfo);}catch(err){console.error("Analytics Did Not Load - Autocare Tab opened",err);}}else{evt.originalEvent.detail.searchInfo.searchCategory="Other";if(/^[0-9]{5}$|^[a-zA-Z][0-9][a-zA-Z] ?[0-9][a-zA-Z][0-9]$/g.test(evt.originalEvent.detail.searchInfo.searchTerm)){evt.originalEvent.detail.searchInfo.searchCategory="Zipcode";}else{if(/^[a-zA-Z ]*$/g.test(evt.originalEvent.detail.searchInfo.searchTerm)){evt.originalEvent.detail.searchInfo.searchCategory="City/State";}}try{analytics.autocareFinder.autocareLocatorSearch(evt.originalEvent.detail.searchInfo);}catch(err){console.error("Analytics Did Not Load - Autocare Search",err);}}});$(document).on("geo_analyticsdetail",function(evt){try{analytics.autocareFinder.autocareDetailPageTrackEvent(evt.originalEvent.detail);}catch(err){console.error("Analytics Did Not Load - Autocare Detail - Pageload",err);}});$("#minicart").on("click",function(){if(navigator.userAgent.match(/iPad/i)&&$("#cart-panel").css("display")=="none"){var cartUrl=$(this).find(".miniCart").attr("attr-link");window.location.replace(cartUrl);}});$(document).on("click touchstart",".s7thumboverlay",function(){var productId=$("#pdp-image-container").attr("attr-productid");var imageType=$(this).attr("type");if(imageType=="spinset"){try{analytics.ClickedImage360.threeSixtyImageTrackEvent(productId);}catch(err){console.error("Analytics Did Not Load - image 360",err);}}});$(".ptlp-cat-pod").on("click",function(){var impressionrank=$(this).attr("impressionrank");var partTypeBucket=$(this).attr("partTypeBucket");var partTypeName=$(this).find(".nol-product-title").text();var productId=$("#pdp-image-container").attr("attr-productid");try{analytics.partType.partTypeTrackEvent(partTypeName,impressionrank,partTypeBucket);}catch(err){console.error("Analytics Did Not Load",err);}});$("body").off("click",".add-new-vehicle, .add-new-vehicle_");$("body").on("click",".add-new-vehicle, .add-new-vehicle_",function(event){event.preventDefault();$(".add-vehicleinfo-wrapper:first, .geo-hdr-addv-wrapper:first").trigger("click");});function getMeataDataForSearch(searchResults){const cognitiveSearcher={};if(searchResults.contents.metadata){cognitiveSearcher.searchAlgorithm=searchResults.contents.metadata.searchAlgorithm||"";cognitiveSearcher.searchEngine=searchResults.contents.metadata.searchEngine||"";cognitiveSearcher.queryClassification=searchResults.contents.metadata.queryClassification||{};cognitiveSearcher.appliedActions=searchResults.contents.metadata.firedActions||[];if(searchResults.contents.metadata.searchEvent){cognitiveSearcher.entity=searchResults.contents.metadata.searchEvent.entity||"";cognitiveSearcher.pageCategories=searchResults.contents.metadata.searchEvent.pageCategories||[];cognitiveSearcher.searchQuery=searchResults.contents.metadata.searchEvent.searchQuery||"";}else{cognitiveSearcher.entity="";cognitiveSearcher.pageCategories=[];cognitiveSearcher.searchQuery="";}return cognitiveSearcher;}else{cognitiveSearcher.searchAlgorithm="";cognitiveSearcher.searchEngine="";cognitiveSearcher.queryClassification={};cognitiveSearcher.appliedActions=[];cognitiveSearcher.entity="";cognitiveSearcher.pageCategories=[];cognitiveSearcher.searchQuery="";return cognitiveSearcher;}}$(document).on("geo_aaDataBrSearchController",function(e){const attributionToken=getCookie("attribution_token");if(typeof frontEndRenderedPage!==typeof undefined&&frontEndRenderedPage===true&&e.originalEvent.detail.hasOwnProperty("searchResults")){var searchResults=e.originalEvent.detail.searchResults;var aaDataTask="";var tmp_aaData={};var productImpression=[],vType="",vYear="",vMake="",vModel="",isFullVehicle="none";var search_part_type="",aaDataPageName="";var aaPageType="";if(typeof searchResults.raw.partTypeInfo!==typeof undefined&&searchResults.raw.partTypeInfo!==null){search_part_type=searchResults.raw.partTypeInfo.partTypeTitle;}if(e.originalEvent.detail.hasOwnProperty("pageType")){aaPageType=e.originalEvent.detail.pageType;}if(e.originalEvent.detail.hasOwnProperty("task")){aaDataTask=e.originalEvent.detail.task;}else{console.error("unable to set AAData, `task` not found in event `geo_aaDataBrSearchController`");}for(var prod in searchResults.products){var _tmp_prod_price="";if(typeof searchResults.products[prod].basePrice!==typeof undefined){_tmp_prod_price=searchResults.products[prod].basePrice;}else{_tmp_prod_price="Price Not Available";tmp_aaData.priceUnavailable="1";}var productImpressionObject={productId:searchResults.products[prod].line_abbreviation.split(" ").join("")+" "+searchResults.products[prod].part_number,impressionRank:searchResults.products[prod].impressionRank,productHQID:searchResults.products[prod].pid.replace(/ /g,"_"),pageNumber:searchResults.products[prod]["pageNumber"],imageAvailable:(searchResults.products[prod].primary_image!==""&&searchResults.products[prod].primary_image!==null&&typeof searchResults.products[prod].primary_image!==typeof undefined)?"Yes":"No",sellingPrice:typeof searchResults.products[prod].basePrice!==typeof undefined?searchResults.products[prod].basePrice:"Price Not Available",shipToHome:typeof searchResults.products[prod].shipToHome!==typeof undefined?stripHtmlTags(searchResults.products[prod].shipToHome):null,storePickupEnabled:typeof searchResults.products[prod].storePickupEnabled!==typeof undefined?stripHtmlTags(searchResults.products[prod].storePickupEnabled):null,addToCartButtonDisabled:!(searchResults.products[prod].inventoryAvailable&&searchResults.products[prod].priceAvailable)?"Yes":"No",isPromo:typeof searchResults.products[prod].promo!==typeof undefined?searchResults.products[prod].promo:"No"};if(productImpressionObject.sellingPrice!=="Price Not Available"&&searchResults.products[prod].outOfStock){productImpressionObject.shipToHome=searchResults.products[prod].outOfStock;productImpressionObject.storePickupEnabled=searchResults.products[prod].outOfStock;productImpressionObject.addToCartButtonDisabled="Yes";}if(searchResults.products[prod]["retail_redirect"]==="ACC NOLA"&&searchResults.products[prod]["retail_url"]){productImpressionObject.isNOLAProduct="Yes";}else{productImpressionObject.isNOLAProduct="No";}productImpression.push(productImpressionObject);}var searchFilters={defalutFilterUsed:"No",appliedFiltersUsed:"",defaultFilters:[],appliedFilters:[]};var universal=true,exact=false;if(searchResults.raw.facet_data.length){searchFilters.appliedFilters=searchResults.raw.facet_data.filter(function(item){var filter=item.split(":");var filtered=filter[1].replace(/[()\"]/g,"");var lang=window.NAPA.config.currentLocale;if(filtered.includes("Exact Fit")){exact=true;}if(lang==="fr"&&filtered.includes("Compatibilité exacte")){exact=true;}universal=filtered.includes("Universal")?true:false;if(lang==="fr"){return !filtered.includes("Compatibilité exacte")&&!filtered.includes("Universal");}else{return !filtered.includes("Exact Fit")&&!filtered.includes("Universal");}}).map(function(item){var filter=item.split(":");return{filtertype:filter[0],filterValue:filter[1].replace(/[()\"]/g,"")};});searchFilters.appliedFiltersUsed=searchFilters.appliedFilters.length>0?"Yes":"";}var filterKey=searchFilters.appliedFiltersUsed==="Yes"?"appliedFilters":"defaultFilters";if(typeof searchResults.raw.fitment_facet_data.exact_fit!==typeof undefined){searchFilters.defalutFilterUsed=searchFilters.appliedFiltersUsed==="Yes"?"no":"Yes";searchFilters[filterKey].push({filtertype:"exact_fit",filterValue:searchResults.raw.fitment_facet_data.exact_fit&&exact?"Yes":"no"});}if(typeof searchResults.raw.fitment_facet_data.universal_fit!==typeof undefined){searchFilters.defalutFilterUsed=searchFilters.appliedFilters.length==0?"Yes":"no";searchFilters[filterKey].push({filtertype:"universal_fit",filterValue:searchResults.raw.fitment_facet_data.universal_fit&&universal?"Yes":"no"});}if(localStorage.getItem("actualText")&&localStorage.getItem("actualText").trim()!=""){tmp_aaData.actualText=localStorage.getItem("actualText").trim();localStorage.removeItem("actualText");}tmp_aaData.partSearchTerm=searchResults.searchTerm;tmp_aaData.searchExecuted="yes";tmp_aaData.searchIndexPath="universal";tmp_aaData.searchLocation="Global Header";if(searchResults.breadcrumbs){tmp_aaData.breadcrumbs=searchResults.breadcrumbs;}if(searchResults.category_level){tmp_aaData.category_level=searchResults.category_level;localStorage.removeItem("aa_category_click");}tmp_aaData.searchResultCount=searchResults.contents.response.numFound;if(typeof searchResults.contents.metadata!==undefined){let metaData=searchResults.contents&&searchResults.contents.metadata||"";let query=metaData!==""&&metaData.query||"";if(query!==""){let queryRelaxed=query.modification&&query.modification.value||"";let algoRelaxedConfig=query.precision&&query.precision.configured&&query.precision.configured.value||"";let algoRelaxedApplied=query.precision&&query.precision.applied&&query.precision.applied.value||"";if(queryRelaxed!==""&&algoRelaxedConfig!==""&&algoRelaxedApplied!==""&&algoRelaxedConfig!==algoRelaxedApplied){tmp_aaData.searchalgorithm="Query & Algorithm";}else{if(queryRelaxed!==""&&algoRelaxedConfig!==""&&algoRelaxedApplied!==""&&algoRelaxedConfig===algoRelaxedApplied){tmp_aaData.searchalgorithm="Query";}else{if(window._geo_service_config.isAlgoRelaxationEnabled==="true"&&queryRelaxed===""&&algoRelaxedConfig!==""&&algoRelaxedApplied!==""&&algoRelaxedConfig!==algoRelaxedApplied){tmp_aaData.searchalgorithm="Algorithm";}else{tmp_aaData.searchalgorithm="NA";}}}}else{tmp_aaData.searchalgorithm="NA";}}else{productDetails.searchalgorithm="NA";}tmp_aaData.applicatedID=searchResults.applicatedId;tmp_aaData.productCount=searchResults.contents.response.numFound;tmp_aaData.dcID=searchResults.raw.dcID;if(searchResults.contents.response.numFound>0){tmp_aaData.partSearchType="Part Search: universal";}else{analytics.SearchEvent.SearchNRFsearchevent();tmp_aaData.partSearchType="No results found";tmp_aaData.failedPartSearchTerm=searchResults.searchTerm;}tmp_aaData.searchCategory="Universal: Non Vehicle Applicated Search";if(!$.isEmptyObject(searchResults.raw.fitment_facet_data.ymm)){vType=checkIfDefined(searchResults.raw.fitment_facet_data.ymm.vehicleType,"");vYear=checkIfDefined(searchResults.raw.fitment_facet_data.ymm.year,"");vMake=checkIfDefined(searchResults.raw.fitment_facet_data.ymm.make,"");vModel=checkIfDefined(searchResults.raw.fitment_facet_data.ymm.model,"");if(!ifEmptyString(vType)&&!ifEmptyString(vYear)&&!ifEmptyString(vMake)&&!ifEmptyString(vModel)){isFullVehicle="full";}tmp_aaData.searchCategory="Universal: Vehicle Applicated Search";if(!searchResults.contents.response.numFound){tmp_aaData.failedPartSearchTerm=searchResults.searchTerm+" ** "+vYear+" "+vMake+" "+vModel;}}tmp_aaData.searchFilters=searchFilters;if(vType!=""){tmp_aaData.vehicleYear=vYear;tmp_aaData.vehicleMake=vMake;tmp_aaData.vehicleModel=vModel;tmp_aaData.vehicleType=vType;}if(search_part_type!==""){delete tmp_aaData.searchExecuted;delete tmp_aaData.searchCategory;delete tmp_aaData.searchLocation;delete tmp_aaData.partSearchTerm;delete tmp_aaData.searchVehicleYear;delete tmp_aaData.searchVehicleMake;delete tmp_aaData.searchVehicleModel;delete tmp_aaData.searchTypeAhead;}if(searchResults.contents.response.numFound>0){delete AAData.failedPartSearchTerm;}if(aaDataTask==="pageload"){AAData=AAData||{};var result=null;if(tmp_aaData){result=getMeataDataForSearch(searchResults);tmp_aaData.cognitiveSearcher=result;}else{result=getMeataDataForSearch(searchResults);AAData.cognitiveSearcher=result;}merge(AAData,tmp_aaData);if(search_part_type!==""){var partInfo=searchResults.raw.partTypeInfo.partInfo,categorymap="";if(partInfo.length){for(var _ki=0;_ki<partInfo.length;_ki++){categorymap=": "+partInfo[_ki]["title"]+categorymap;}if(AAData.categoryName!==""&&AAData.categoryName!==null){categorymap=": "+(AAData.categoryName).replace(/\|/g,":");}}if(searchResults.raw.partTypeInfo.plpFlow==="vptlp"){categorymap+=": vehicle: "+vMake+": "+vModel+": "+vYear;}aaDataPageName="plp:catalog:all products"+categorymap;}else{aaDataPageName="plp:search:"+isFullVehicle+":"+search_part_type+":"+vYear+":"+vMake+":"+vModel;}var pageTemplate="product listing page";if(AAData.page.template==="product listing page_new"){pageTemplate=AAData.page.template;}if(aaPageType&&aaPageType==="curated_product_page"){if(window._geo_service_config.enableGoogleRetailAttributionToken==="true"&&attributionToken){merge(AAData,{productImpression:productImpression,page:{pagetype:"Curated pages",template:pageTemplate,channel:"search",pageName:"Curated pages: Best-Selling Milwaukee Tools"},attributionToken:attributionToken});}else{merge(AAData,{productImpression:productImpression,page:{pagetype:"Curated pages",template:pageTemplate,channel:"search",pageName:"Curated pages: Best-Selling Milwaukee Tools"}});}}else{if(aaPageType&&aaPageType==="clearance_product_page"){if(window._geo_service_config.enableGoogleRetailAttributionToken==="true"&&attributionToken){merge(AAData,{productImpression:productImpression,page:{pagetype:"Curated pages",template:pageTemplate,channel:"search",pageName:"deals:curated"},attributionToken:attributionToken});}else{merge(AAData,{productImpression:productImpression,page:{pagetype:"Curated pages",template:pageTemplate,channel:"search",pageName:"deals:curated"}});}}else{if(window._geo_service_config.enableGoogleRetailAttributionToken==="true"&&attributionToken){merge(AAData,{productImpression:productImpression,page:{template:pageTemplate,channel:"search",pageName:aaDataPageName},attributionToken:attributionToken});}else{merge(AAData,{productImpression:productImpression,page:{template:pageTemplate,channel:"search",pageName:aaDataPageName}});}}}try{$.getScript(adobeAnalyticsScriptPath,function(){if(_satellite){_satellite.pageBottom();}});}catch(err){console.error("Analytics Did Not Load - Search Page Load",err);}}else{if(aaDataTask==="pagination"){try{delete tmp_aaData.dcID;var productDetails={productCount:searchResults.contents.response.numFound,searchPlatform:"bloomreach",productImpression:productImpression,searchFilters:searchFilters};productDetails.sortByApplied=sortByApplied;merge(productDetails,tmp_aaData);var resultPG=getMeataDataForSearch(searchResults);analytics.SearchEvent.SearchBRPaginationEvent(productDetails,resultPG);}catch(err){console.error("Analytics Did Not Load - SearchBRPaginationEvent",err);}}else{if(aaDataTask==="newsearch"){try{delete tmp_aaData.dcID;var productDetails={productCount:searchResults.contents.response.numFound,searchPlatform:"bloomreach",productImpression:productImpression,searchFilters:searchFilters};if(typeof searchResults.contents.metadata!==undefined){let metaData=searchResults.contents&&searchResults.contents.metadata||"";let query=metaData!==""&&metaData.query||"";if(query!==""){let queryRelaxed=query.modification&&query.modification.value||"";let algoRelaxedConfig=query.precision&&query.precision.configured&&query.precision.configured.value||"";let algoRelaxedApplied=query.precision&&query.precision.applied&&query.precision.applied.value||"";if(queryRelaxed!==""&&algoRelaxedConfig!==""&&algoRelaxedApplied!==""&&algoRelaxedConfig!==algoRelaxedApplied){productDetails.searchalgorithm="Query & Algorithm";}else{if(queryRelaxed!==""&&algoRelaxedConfig!==""&&algoRelaxedApplied!==""&&algoRelaxedConfig===algoRelaxedApplied){productDetails.searchalgorithm="Query";}else{if(window._geo_service_config.isAlgoRelaxationEnabled==="true"&&queryRelaxed===""&&algoRelaxedConfig!==""&&algoRelaxedApplied!==""&&algoRelaxedConfig!==algoRelaxedApplied){productDetails.searchalgorithm="Algorithm";}else{productDetails.searchalgorithm="NA";}}}}else{productDetails.searchalgorithm="NA";}}else{productDetails.searchalgorithm="NA";}merge(productDetails,tmp_aaData);productDetails.searchPlatform="bloomreach";if(window._geo_service_config.enableGoogleRetailAttributionToken==="true"&&attributionToken){productDetails.attributionToken=attributionToken;}if(e.originalEvent.detail.hasOwnProperty("semanticAnalytics")&&e.originalEvent.detail.semanticAnalytics!==null){Object.assign(productDetails,e.originalEvent.detail.semanticAnalytics);}var result=getMeataDataForSearch(searchResults);analytics.SearchEvent.SearchBRSubsequentSearchEvent(productDetails,result);}catch(err){console.error("Analytics Did Not Load - SearchBRPaginationEvent",err);}}}}}else{try{}catch(err){console.error("Analytics Did Not Load - Search bar",err);}}});$(document).on("geo_searchKeypressEvent",function(e){e.stopPropagation();var searchTerm=e.originalEvent.detail.searchTerm;var dcID=e.originalEvent.detail.dcID;var actualText=e.originalEvent.detail.actualText;var suggestTermPosition=e.originalEvent.detail.suggestTermPosition;try{window.AAData=window.AAData||{};if(!window.AAData.hasOwnProperty("suggestTermPosition")){window.AAData.suggestTermPosition=suggestTermPosition;sessionStorage.setItem("suggestTermPosition",suggestTermPosition);analytics.SearchEvent.SearchEventTrackEvent(searchTerm,dcID,true,actualText,null);}else{analytics.SearchEvent.SearchEventTrackEvent(searchTerm,dcID,true,actualText,suggestTermPosition);}}catch(err){console.error("Analytics Did Not Load - Search bar",err);}});$(document).on("geo_semantic_analytics",function(e){var semanticAnalyticsData=e.originalEvent.detail;try{window.AAData=window.AAData||{};Object.assign(window.AAData,semanticAnalyticsData);}catch(err){console.log("Unable to append the semantic data",err);}});$(document).on("geo_frequently_bought_analytics",function(e){var fbtAnalyticsData=e.originalEvent.detail;try{analytics.recommendationImpressions.RecommendationEvent(fbtAnalyticsData.totalProducts,fbtAnalyticsData.parentProductID,fbtAnalyticsData.type,fbtAnalyticsData.productImpressions);}catch(err){console.log("Unable to append the fbt data",err);}});$(document).on("geo_homepage_bestseller_analytics",function(e){var hpbsAnalyticsData=e.originalEvent.detail;try{analytics.bestSellersImpressions.RecommendationEvent(hpbsAnalyticsData.totalProducts,hpbsAnalyticsData.parentProductID,hpbsAnalyticsData.type,hpbsAnalyticsData.productImpressions);}catch(err){console.log("Unable to append the homepage data",err);}});$(document).on("geo_homepage_bestseller_click_analytics",function(e){try{var analyticsData=e.originalEvent.detail;if(!analyticsData&&!analyticsData.data){return;}analytics.homepageCarousel.carouselClickEvent(analyticsData.item_id,analyticsData.rcomIndex,analyticsData.recommendationSource);}catch(err){console.error("Analytics Did Not Load - geo similar recommendation click",err);}});if(sessionStorage.getItem("suggestTermPosition")){window.AAData=window.AAData||{};window.AAData.suggestTermPosition=sessionStorage.getItem("suggestTermPosition")==="-1"?"":sessionStorage.getItem("suggestTermPosition");sessionStorage.removeItem("suggestTermPosition");}$(document).on("geo_typeAheadAnalytics",function(e){var userText=e.originalEvent.detail.userText;var suggestedText=e.originalEvent.detail.suggestedText;var suggestTermPosition=e.originalEvent.detail.suggestTermPosition;try{window.AAData=window.AAData||{};if(!window.AAData.hasOwnProperty("suggestTermPosition")){window.AAData.suggestTermPosition=suggestTermPosition;sessionStorage.setItem("suggestTermPosition",suggestTermPosition);analytics.SuggestEvent.SuggestEventTrackEvent(userText,suggestedText,null);}else{analytics.SuggestEvent.SuggestEventTrackEvent(userText,suggestedText,suggestTermPosition);}}catch(err){console.error("Analytics Did Not Load - Search bar",err);}});$(document).on("geo_aaDataAddToCart",function(e){e.stopPropagation();try{var searchTerm=e.originalEvent.detail.searchTerm;analytics.SearchEvent.SearchEventTrackEvent(searchTerm,true);}catch(err){console.error("Analytics Did Not Load - Search bar",err);}});$(document).on("popular_parts_listAAData",function(e){try{var AADataParentCategory=e.originalEvent.detail.AADataParentCategory,AADataCategoryList=e.originalEvent.detail.AADataCategoryList,popular_parttypes=e.originalEvent.detail.popular_parttypes;var categoryPageInfo={categorySelected:AADataParentCategory.title,popularCategoryInfo:{categoryId:AADataParentCategory.pid.split(" ").join(""),PopularCategoryAvailable:AADataCategoryList.length>0?"Yes":"No",totalCount:AADataCategoryList.length,categoryDetails:AADataCategoryList.map(function(item,idx){return{CategoryName:item.title,impressionRank:"1:"+(parseInt(idx)+1)};})},popularPartTypeInfo:{categoryID:AADataParentCategory.pid.split(" ").join(""),partTypeAvailable:popular_parttypes.length>0?"Yes":"No",totalPartTypeCount:popular_parttypes.length,partTypeDetails:AADataCategoryList.map(function(item,idx){return{partTypeName:item.title,impressionRank:"2:"+(parseInt(idx)+1)};})}};analytics.categoryLandingPages.categoryPageTrackEvent(categoryPageInfo);}catch(err){console.error("Analytics Did Not Load - Category Page",err);}});$(document).on("click",".geo-parttype-list-links",function(e){var partTypeInfo={partTypeName:$(this).attr("title"),impressionRank:$(this).attr("data-index"),searchPlatform:"bloomreach"};try{analytics.categoryLandingPages.partTypeInfoTrackEvent(partTypeInfo);}catch(error){console.error("Analytics Did Not Load - Part Type link click",err);}});$(document).on("geo_vehicle_added_successfull",function(){try{analytics.vehicleSuccessfullClick.vehicleApplicationClickEvent();setTimeout(function(){try{if(_satellite){_satellite.track("vehicleapplication");}}catch(e){console.log("satellite could not be found",e);}},3000);}catch(err){console.error("Analytics Did Not Load - vehicle application",err);}});$(document).on("geo_seach_suggestion_successfull",function(){try{setTimeout(function(){try{if(_satellite){_satellite.track("search_suggestion_start");}}catch(e){console.log("satellite could not be found",e);}},10);}catch(err){console.error("Analytics Did Not Load - vehicle application",err);}});$(document).on("geo_vehicle_search_by_vin",function(e){try{analytics.vehicleSearchByVinClick.vehicleSearchByVinEvent(e.originalEvent.detail);setTimeout(function(){try{if(_satellite){_satellite.track("searchByVinDecoder");}}catch(e){console.log("satellite could not be found",e);}},3000);}catch(err){console.error("Analytics Did Not Load - search by vin",err);}});$(document).on("geo_pdpPriceInventory",function(e){try{analytics.productDetailPage.priceInventoryUpdateEvent(e.originalEvent.detail);}catch(err){console.error("Analytics Did Not Load - Product Detail Page",err);}});$(document).on("geo_partTypePageLoad",function(e){try{var partTypeInfo=e.originalEvent.detail;partTypeInfo.searchPlatform="bloomreach";analytics.categoryLandingPages.partTypeLoadEvent(partTypeInfo);}catch(err){console.error("Analytics Did Not Load - PartType PageLoad",err);}});$(document).on("geo_analytics_recommendation_view",function(e){try{var analyticsData=e.originalEvent.detail;var brPixel={};if(!analyticsData&&!analyticsData.data){return;}analytics.widgetView.widgetViewEvent(analyticsData.data.rid,analyticsData.data.id,analyticsData.data.name,analyticsData.data.type);}catch(err){console.error("Analytics Did Not Load - geo recommendation",err);}});$(document).on("geo_analytics_recommendation_click",function(e){try{var analyticsData=e.originalEvent.detail;var brPixel={};if(!analyticsData&&!analyticsData.data){return;}analytics.widgetClick.WdigetClickEvent(analyticsData.data.rid,analyticsData.data.id,analyticsData.data.name,analyticsData.data.type,analyticsData.productHQSKU);}catch(err){console.error("Analytics Did Not Load - geo recommendation click",err);}});$(document).on("geo_analytics_similar_product_click",function(e){try{var analyticsData=e.originalEvent.detail;if(!analyticsData&&!analyticsData.data){return;}analytics.carouselClick.carouselClickEvent(analyticsData.item_id,analyticsData.parentProductID,analyticsData.sellingPrice,analyticsData.rcomIndex,analyticsData.recommendationSource);}catch(err){console.error("Analytics Did Not Load - geo similar recommendation click",err);}});$(document).on("geo_sorting_changed",function(e){try{var analyticsData=e.originalEvent.detail;var sortSelectedKey=analyticsData.sortType+","+analyticsData.sortOrder;var defaultFilter="relevance ,asc";var sortValues={"price,asc":"Sort By Price - Low to High","price,desc":"Sort By Price - High to Low","relevance ,asc":"Sort By Relevance","title,asc":"Sort By Product Description","line_abbreviation,asc":"Sort By Product Line Abbreviation","part_number,asc":"Sort By Part Number"};var sortSelectedKeyTxt=sortValues[sortSelectedKey];if(sortSelectedKey!==null&&sortSelectedKey!==undefined&&sortSelectedKey!==defaultFilter){sortByApplied={defalutSortBy:"No",appliedSortBy:"Yes",sortByValue:sortSelectedKeyTxt};}else{sortByApplied={defalutSortBy:"Yes",appliedSortBy:"No",sortByValue:"Sort By Relevance"};}}catch(err){console.error("Analytics Did Not Load - geo sorting changed",err);}});$(document).on("geo_analytics_atc_modal_recommendation",function(e){var atcAnalyticsData=e.originalEvent.detail;try{analytics.AddToCartModal.AddToCartModalTrackEvent(atcAnalyticsData.totalProducts,atcAnalyticsData.parentProductID,atcAnalyticsData.type,atcAnalyticsData.productImpressions);}catch(err){console.log("Unable to append the atc recommendation data",err);}});});$(document).on("sameProduct_analytics_recommendation",function(e){try{var analyticsData=e.originalEvent.detail;if(!analyticsData&&!analyticsData.data&&analyticsData.data.length==0){return;}analytics.BRrecommendationImpressions.RecommendationEvent(analyticsData.data.length,analyticsData.parentProductID,analyticsData.resType,analyticsData.data);}catch(err){console.error("Analytics Did Not Load - geo sameProduct recommendation",err);}});$(document).on("geo_categorySubSequentSearch_analytics",function(e){try{const isSuggestionSearch=e.originalEvent.detail.isSuggestionSearch;if(!isSuggestionSearch&&(window.AAData.page.pageName==="productsearch-landing"||window.AAData.page.pageName==="plp:catalog:all products")){var categorySubSequentSearchEvent={eventInfo:{eventName:"AutoCatSubsequentSearch"}};window.AAData.event=window.AAData.event||[];window.AAData.event.push(categorySubSequentSearchEvent);}else{if(AAData.event&&AAData.event[0].eventInfo.eventName==="AutoCatSubsequentSearch"){AAData.event.splice(0,1);}}}catch(err){console.error("Analytics Did Not Load - geo category subsequent search",err);}});$(document).ready(function(){$("input[name='choose-fulfilment']:not(:checked)").attr("tabindex","-1");$("input[name='choose-fulfilment']:not(:checked)").attr("aria-checked","false");$("input[name='choose-fulfilment']:checked").attr("aria-checked","true");$("input[name='choose-fulfilment']").on("click",function(){$(this).attr("tabindex","0");$(this).attr("aria-checked","true");$("input[name='choose-fulfilment']:not(:checked)").attr("tabindex","-1");$("input[name='choose-fulfilment']:not(:checked)").attr("aria-checked","false");});$(".owl-carousel").owlCarousel({items:10,loop:true,margin:10,autoplay:true,autoplayTimeout:5000,autoplayHoverPause:true});$("div.js-homepage-carousel").on("mouseleave",function(){$(".owl-next").click();});$(".owl-carousel").on("click",".item, .fill-div",function(e){e.preventDefault();let myhref=window.location.origin+$(this).attr("href");if(regex.test(myhref)){window.location.href=myhref;}else{console.log("Enter valid URL");}});if($("#checkoutPageLoaded").length==0){sessionStorage.removeItem("gcSessionData");}});$(document).ready(function(){function AddReadMore(){var lang=window.NAPA.config.currentLocale;if(lang==="en"){var readMoreTxt="...Read more";var readLessTxt=" Show less";}if(lang==="fr"){var readMoreTxt="...En savoir plus";var readLessTxt=" Afficher moins";}$(".add-read-more").each(function(){var charCount=$(this).attr("att-legth");if($(this).find(".first-section").length){return;}var allstr=$(this).text();if(allstr.length>charCount){var firstSet=allstr.substring(0,charCount);var secdHalf=allstr.substring(charCount,allstr.length);var strtoadd=firstSet+"<span class='second-section'>"+secdHalf+"</span><a><span class='read-more'  title='Click to Show More'>"+readMoreTxt+"</span></a><a><span class='read-less' title='Click to Show Less'>"+readLessTxt+"</span></a>";$(this).html(strtoadd);}});$(document).on("click",".read-more,.read-less",function(){$(this).closest(".add-read-more").toggleClass("show-less show-more");});}AddReadMore();function populateNolaEventInfo(sku){var nolaClickEvent={eventInfo:{eventName:"NOLACTR",type:"plp",timeStamp:new Date(),processed:{adobeAnalytics:false}},productDetails:{productId:sku}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(nolaClickEvent);}$(document).on("click",".geo-nola-item-wrapper a",function(){var nolaProductId=$(this).closest("geo-product-list-item").attr("id");if(nolaProductId){nolaProductId=nolaProductId.replace("_","");populateNolaEventInfo(nolaProductId);}});if((window.location.href.indexOf("BR:PDP:SP:Belowproductdescription")!==-1)&&window.location.href.indexOf("ppid")!==-1){if(AAData||AAData.parentProductID){var url=new URL(window.location.href);var parentProductID=url.searchParams.get("ppid")?url.searchParams.get("ppid"):"";AAData.parentProductID=parentProductID;let recommSource=url.searchParams.get("r-src")?url.searchParams.get("r-src"):"";let responseDownStream=localStorage.getItem("gpcDownstreamsystem");if(recommSource!==""&&responseDownStream!==""&&responseDownStream!=="Bloomreach"){AAData.recommendationSource=recommSource.replace("BR","Accio");}}}if(AAData&&AAData.page&&AAData.page.channel==="productdetails"){var localProductImpressionData=localStorage.getItem("plpProductImpressionData");if(localProductImpressionData){localProductImpressionData=JSON.parse(localProductImpressionData);var currentPid=AAData.productID;AAData.plpImpressionRank=""+localProductImpressionData[currentPid];}}if($("#storePageType").length){var storePageTypeValue=$("#storePageType").val();analytics.storePageDetail.pageDetailLoadEvent(storePageTypeValue);}});function openMorePanelMouseIn(){try{if($(".geo-nav-bar:first").length>0){$(".geo-nav-bar:first").removeClass("geo-nav-bar-scroll");}setTimeout(function(){document.getElementById("showMoreOption").setAttribute("style","display:block !important");$("#moremenu").click();},400);}catch(err){console.error("openMorePanelMouseIn",err);}}function openMorePanelMouseOut(){try{if($(".geo-nav-bar:first").length>0){$(".geo-nav-bar:first").removeClass("geo-nav-bar-scroll");}setTimeout(function(){document.getElementById("showMoreOption").setAttribute("style","display:none !important");$("li.active").removeClass("active");return closeMorePanel();},400);}catch(err){console.error("openMorePanelMouseOut",err);}}function openMorePanel(){try{let gob=document.getElementsByClassName("geo-overly-background ")[1];let moreFont=document.getElementsByClassName("moremenuFont")[0];let moreFontTextPos=document.getElementsByClassName("moremenu")[0];if(moreFont.classList.contains("fontBlue")){if($("li.active").length>0){$("li.active").removeClass("active");}return closeMorePanel();}moreFont.classList.add("fontBlue");moreFontTextPos.classList.add("nav-more-menutext-position");gob.classList.add("open");addOpacity(gob,0.5);}catch(err){console.error("openMorePanel",err);}}function closeMorePanel(){try{let gob=document.getElementsByClassName("geo-overly-background ")[1];let moreFont=document.getElementsByClassName("moremenuFont")[0];let moreFontTextPos=document.getElementsByClassName("moremenu")[0];if(gob&&moreFont&&moreFontTextPos){moreFont.classList.remove("fontBlue");moreFontTextPos.classList.remove("nav-more-menutext-position");gob.classList.remove("open");}}catch(err){console.error("closeMorePanel",err);}}function addOpacity(obj,topacity,start){try{if(start===undefined){start=0;}if(start>=topacity){return;}else{var box=obj;box.style.opacity=(start+0.1>topacity)?topacity:start+0.1;setTimeout(function(){addOpacity(obj,topacity,start+0.1);},25);}}catch(err){console.error("addOpacity",err);}}$(document).ready(function(){let updateNavTabsFunctionality=(window._geo_service_config.updateNavTabsFunctionality==="true");function openNavTabMenu(clickedTab,e){try{if(!clickedTab){return;}if(clickedTab.classList.contains("active")){if(!e.target.closest(".nav-tab-menu")){closeNavTabMenu(clickedTab);}return;}let geoBottomOverlay=document.querySelectorAll(".geo-overly-background")[1];let navTabMenu=clickedTab.querySelector(".nav-tab-menu");if(!(geoBottomOverlay&&navTabMenu)){return;}setTimeout(function(){if(document.querySelector(".geo-nav-bar")){document.querySelector(".geo-nav-bar").classList.remove("geo-nav-bar-scroll");}navTabMenu.style.setProperty("display","block","important");clickedTab.classList.add("active");geoBottomOverlay.classList.add("open");addOpacity(geoBottomOverlay,0.5);},400);}catch(err){console.error("openNavTabMenu",err);}}function closeNavTabMenu(clickedTab,closingDelay){try{if(!closingDelay){closingDelay=0;}if(!clickedTab){return;}let geoBottomOverlay=document.querySelectorAll(".geo-overly-background")[1];let navTabMenu=clickedTab.querySelector(".nav-tab-menu");if(!(geoBottomOverlay&&navTabMenu)){return;}setTimeout(function(){if(document.querySelector(".geo-nav-bar")){document.querySelector(".geo-nav-bar").classList.add("geo-nav-bar-scroll");}navTabMenu.style.setProperty("display","none","important");clickedTab.classList.remove("active");geoBottomOverlay.classList.remove("open");},closingDelay);}catch(err){console.error("closeNavTabMenu",err);}}if(!updateNavTabsFunctionality){$(".more-close-icon").click(function(){document.getElementById("showMoreOption").setAttribute("style","display:none !important");$("#moremenu").click();});$("#moremenu").click(function(){openMorePanel();});$("#moremenu").on("mouseenter",openMorePanelMouseIn).on("mouseleave",openMorePanelMouseOut);}else{document.querySelectorAll(".moremenu").forEach(function(ele){ele.addEventListener("click",function(e){openNavTabMenu(this,e);});ele.addEventListener("mouseleave",function(e){closeNavTabMenu(this,350);});});document.querySelectorAll(".more-close-icon").forEach(function(ele){ele.addEventListener("click",function(e){let clickedTab=e.target.closest(".moremenu");if(clickedTab){closeNavTabMenu(clickedTab);}});});}});function setNavigationShadow(isClick){let navShadow=document.getElementsByClassName("geo-overly-background")[1];try{if(navShadow){navShadow.classList.add("open");addOpacity(navShadow,0.5);}}catch(err){console.log("setNavigationShadow",err);}}function removeNavigationShadow(){let navShadow=document.getElementsByClassName("geo-overly-background")[1];try{if(navShadow){navShadow.style.opacity=0;navShadow.classList.remove("open");}}catch(err){console.log("removeNavigationShadow",err);}}$(document).ready(function(){let isDropdownOpen=false;let menuHoverOut=false;let that;let updateNavFlyoutsFunctionality=(window._geo_service_config.updateNavFlyoutsFunctionality==="true");let delayToUpdateTab=25;let openDelay=350;let closeDelay=350;let hoverTimeoutId=null;let hoverTimeoutDelay=200;if(updateNavFlyoutsFunctionality&&document.querySelector("#nav-ribbon")){document.querySelector("#nav-ribbon").addEventListener("mouseleave",navRibbonHoverHandler);}function navRibbonHoverHandler(e){setTimeout(function(){closeAllActiveNavTabs(true);},closeDelay);}function openRibbonOnHoverRibbon(hoveredEl){hoveredEl.classList.add("hovered","hoveredTab");hoverTimeoutId=setTimeout(function(){hoverTimeoutId=null;let cntHovered=document.querySelectorAll(".nav-ribbon-header.hovered").length;let openingDelay=openDelay-hoverTimeoutDelay;if(cntHovered>1){openingDelay-=delayToUpdateTab;}setTimeout(function(){if(hoveredEl.classList.contains("hoveredTab")){closeAllActiveNavTabs();hoveredEl.classList.remove("hoveredTab");hoveredEl.classList.add("active","current");setNavigationShadow();}},openingDelay);},hoverTimeoutDelay);}function closeRibbonOnMovingOutsideRibbon(hoveredEl){setTimeout(function(){let cntHovered=document.querySelectorAll(".nav-ribbon-header.hovered").length;let closingDelay=closeDelay-delayToUpdateTab;if(cntHovered>1){closingDelay=0;}if(closingDelay==0){closeAllActiveNavTabs(true);}else{if(hoverTimeoutId){clearTimeout(hoverTimeoutId);hoveredEl.classList.remove("hoveredTab","hovered");}setTimeout(function(){closeAllActiveNavTabs(true);},closingDelay);}},delayToUpdateTab);}function closeAllActiveNavTabs(removeShadow){document.querySelectorAll(".nav-ribbon-header.active.current").forEach(function(ele){if(!ele.classList.contains("hoveredTab")){ele.classList.remove("active","current","hovered");}});if(removeShadow&&removeShadow===true){removeNavigationShadow();}}$(".geo-sub-menu").hover(function(){},function(){if(updateNavFlyoutsFunctionality){return;}if($(".nav-ribbon-header").length>0){menuHoverOut=true;setTimeout(function(){$(".nav-ribbon-header").each(function(index){let isActivemenu=$(".nav-ribbon-header")[index].classList.value.indexOf("active");if(isActivemenu>0){$(this).removeClass("active");}});const navflyout=$(this).find("ul");removeNavigationShadow();navflyout.css({opacity:"0",visibility:"hidden",transition:""});$(".geo-nav-bar:first").addClass("geo-nav-bar-scroll");},350);}});$(".nav-ribbon-header").hover(function(){if(updateNavFlyoutsFunctionality){openRibbonOnHoverRibbon(this);return;}if(!isDropdownOpen){$(".geo-nav-bar:first").removeClass("geo-nav-bar-scroll");if($(".nav-ribbon-header",this)){that=$(this);}const navflyout=$(this).find("ul");navflyout.css({opacity:"1",visibility:"visible",transition:""});setTimeout(function(){if(navflyout.length>0&&navflyout[0].style.visibility==="visible"){if(that!==null&&that!==undefined){that.addClass("active");setNavigationShadow();}}},350);}},function(){if(updateNavFlyoutsFunctionality){closeRibbonOnMovingOutsideRibbon(this);return;}if(!isDropdownOpen){const navflyout=$(this).find("ul");if(navflyout.length>0&&navflyout[0].style.visibility==="visible"&&!menuHoverOut){removeNavigationShadow();if($(".nav-ribbon-header",this)){$(this).removeClass("active");}navflyout.css({opacity:"0",visibility:"hidden",transition:""});$(".geo-nav-bar:first").addClass("geo-nav-bar-scroll");}menuHoverOut=false;}});});$(document).on("nol_analytics_menu_item_clicked",function(e){const data=e.originalEvent.detail;if(!(data.tab&&data.section&&data.text)){return;}var vClicksTrackEvent={eventInfo:{eventName:"menuItemClicked",tab:data.tab,section:data.section,text:data.text,timeStamp:new Date(),processed:{adobeAnalytics:false}}};window.AAData=window.AAData||{};window.AAData.event=window.AAData.event||[];window.AAData.event.push(vClicksTrackEvent);try{analytics.sendCustomEvent("menuItemClicked");}catch(error){console.error("Analytics Did Not Load ",error);}});$(document).ready(function(){document.querySelectorAll(".toggle-list-btn").forEach(function(toggleBtn){toggleBtn.addEventListener("click",function(){let toggleListId=toggleBtn.getAttribute("toggle-list-id");let cntVisible=parseInt(toggleBtn.getAttribute("initial-visible"))||4;let isExpanded=toggleBtn.getAttribute("aria-expanded")=="false";if(!(toggleListId&&document.getElementById(toggleListId))){return;}let toggleList=document.getElementById(toggleListId);let toggleListItems=toggleList.querySelectorAll(".toggle-item");toggleListItems.forEach(function(li,ind){if(isExpanded||ind<cntVisible){li.classList.add("toggle-item-visible");}else{li.classList.remove("toggle-item-visible");}});toggleBtn.textContent=(isExpanded?"See Less":"See All");toggleBtn.setAttribute("aria-expanded",(isExpanded?"true":"false"));toggleList.setAttribute("aria-expanded",(isExpanded?"true":"false"));});});});