function setDefaultDeliveryMethod(){var e=$(".addressType option:selected").val();console.log(e);var t=$("#myAddressUrls").attr("data-deliveryMethod-url")+"?addressType="+e;$.get(t,function(e){console.log(e),$(".floatright").html(e)})}function getAddressBook(){var e=$("#myAddressUrls").attr("data-address-book-url")+"?isAjax=true";$.ajax({url:e,type:"GET",cache:!1,success:function(e){$(".grid-13").html(e)}})}function changeStates(e){var t=$(".addressType option:selected").val();if(""==t||"R"==t||"C"==t)$(".townCity").attr("placeholder",$("#cityParsley").attr("data-city-placeholder")),$(".townCity").attr("data-parsley-required-message",$("#cityParsley").attr("data-city-default-message")),$(".townCity").attr("data-parsley-maxlength-message",$("#cityParsley").attr("data-city-maxlength-message")),"APO"!=$("#cityValue").val()&&"FPO"!=$("#cityValue").val()&&$("#city").val($("#cityValue").val()),"true"==e&&populateStates();else{var a='<select name="townCity" class="pure-input-1" id="city" title="City" data-parsley-required="true" data-parsley-required-message='+$("#cityParsley").attr("data-city-default-message")+">";$("#cityValues > option").each(function(){a=a+"<option value="+$(this).val()+">"+$(this).text()+"</option>"}),a+="</select>",$(".townCity").html(a),("APO"==$("#cityValue").val()||"FPO"==$("#cityValue").val())&&$("#city").val($("#cityValue").val()),"true"==e&&populateStates()}$("#city").placeholder()}function findAStore(){var e=$("#store-finder-url").val(),t=$("#my-account-find-store-query").val();return($("#my-account-find-store-query").parsley().reset(),$("#my-account-find-store-query").parsley(),""!==t&&$.isNumeric(t)&&5!=t.length)?($("#my-account-find-store-query").removeClass("success").addClass("error").prev(".error-wrap").find(".error-messages").addClass("filled").html('<p class="error-message">'+$(".invalidZipCodeDiv").html()+" </p>"),!1):!0!=$("#my-account-find-store-query").parsley().validate()?($("#my-account-find-store-query").siblings(".error-wrap").find(".error-message").attr("id","storeSearchError"),$("#storeSearchError").attr("role","alert"),$("#my-account-find-store-query").attr("aria-invalid","true"),$("#my-account-find-store-query").focus(),!1):void($("#my-account-find-store-query").attr("aria-invalid","false").removeAttr("aria-describedby"),$.ajax({url:e,type:"GET",data:{q:t,sort:"true"},dataType:"html",success:function(e){result='<div id="napaStoreLocator" class="modal">'+e+"</div>",$.featherlight(result,{variant:"nol-modal store-locator",contentFilters:["html"],afterContent:function(){$("input#store-search-input").focus(),setTimeout(function(){$("div[title|='Show satellite imagery']").attr("id","GMsatelliteButton"),adaModal2("input#store-search-input","div#GMsatelliteButton","span.featherlight-close-icon.featherlight-close")},3500)}}),$("#facility-type-select").length>0||$("#country-type-select").length>0?$(".store-information").find(".store-listing").css("max-height","210px"):$(".store-information").find(".store-listing").css("max-height","348px"),initializeMapAPI("mapCanvasInitialize")}}))}function getProfilePage(e){var t=$("#myProfileUrls").attr("data-profile-url");window.location.href=t+"?globalMessage="+e}function setDeliveryMethod(){var e=$(".addressType option:selected").val(),t=$("#myAddressUrls").attr("data-deliveryMethod-url")+"?addressType="+e;$.get(t,function(e){$(".floatright").html(e)})}function populateStates(){$("#stateDiv").val();var e="",t=$(".shippingAddress").val(),a=$(".addressType option:selected").val(),r=$("#myAddressUrls").attr("data-get-regions-url")+"/"+$("#country").val()+"/"+t+"?addressType="+a;$.get(r,function(t){var r=$("#regionIso"),s=r.val();r.find("option").remove(),"R"==a||"C"==a||""==a?$("<option>").val("").text($("#stateDiv").val()).appendTo(r):$("<option>").val("").text("APO*").appendTo(r),0==t.length?$("<option>").val(""):$.each(t,function(t,a){a.isocode==s&&(e="selected"),$("<option "+e+">").val(a.isocode).text(a.name).appendTo(r),e=""})})}function changeStatesForBillingAddress(e){var t=$(".billingAddressType option:selected").val();if(""==t||"R"==t||"C"==t)$(".billingTownCity").attr("placeholder",$("#cityParsley").attr("data-city-placeholder")),$(".billingTownCity").attr("data-parsley-required-message",$("#cityParsley").attr("data-city-default-message")),$(".billingTownCity").attr("data-parsley-maxlength-message",$("#cityParsley").attr("data-city-maxlength-message")),"APO"!=$("#billing_cityValue").val()&&"FPO"!=$("#billing_cityValue").val()&&$("#billing_townCity").val($("#billing_cityValue").val()),"true"==e&&populateStatesForBillingAdddress();else{var a='<select name="billing_townCity" class="pure-input-1" id="billing_townCity" data-parsley-required="true" data-parsley-required-message='+$("#cityParsley").attr("data-city-default-message")+">";$("#billing_cityValues > option").each(function(){a=a+"<option value="+$(this).val()+">"+$(this).text()+"</option>"}),a+="</select>",$(".billingTownCity").html(a),("APO"==$("#billing_cityValue").val()||"FPO"==$("#billing_cityValue").val())&&$("#billing_townCity").val($("#billing_cityValue").val()),"true"==e&&populateStatesForBillingAdddress()}}function populateStatesForBillingAdddress(){var e=$(".billing_shippingAddress").val(),t=$(".billingAddressType option:selected").val(),a=$("#myAddressUrls").attr("data-get-regions-url")+"/"+$("#billing_countryIso").val()+"/"+e+"?addressType="+t;$.get(a,function(e){var a=$("#billing_regionIso");a.find("option").remove(),"R"==t||"C"==t||""==t?$("<option>").val("").text($("#stateDiv").val()).appendTo(a):$("<option>").val("").text("APO").appendTo(a),0==e.length?$("<option>").val(""):$.each(e,function(e,t){$("<option>").val(t.isocode).text(t.name).appendTo(a)})})}function ajaxLoader(){$(".ajax-loader").fadeIn(),$(".ajax-loader").attr("aria-busy","true")}$(document).ready(function(){$("#edit-phone-number .modal-close").on("click",function(){$('#edit-phone-number input[name="phone"]').val($("#current-phone-num").text()),$("#edit-rewards-error-message").text(""),$("#rewardsPhoneInput").attr("aria-labelledby","edit-rewards-error-message")}),$('[data-modal="edit-phone-number"]').on("click",function(){$('#edit-phone-number input[name="phone"]').val($("#current-phone-num").text()),$("#edit-rewards-error-message").text(""),setTimeout(function(){$("#rewardsPhoneInput").focus().select()},150)}),$('[data-modal="rewards-opt-out"]').on("click",function(){setTimeout(function(){$("#ada_RewardsModalHeader_content").focus()},150)}),$("#CreateAccountPassword").on("input",function(){checkPassword("#CreateAccountPassword",".password-length-check",".password-reqs-check")}),$("#btn-edit-rewards-number").click(function(e){if(e.preventDefault(),!$(this).closest("form").parsley().validate())return $("#rewardsPhoneInput").attr("aria-labelledby","parsley-id-"+$("#rewardsPhoneInput").data("parsley-id")),!1;formdata=$(this).closest('form[name="form-edit-rewards-number"]'),$("#edit-rewards-error-message").html(""),$.ajax({url:NAPA.config.encodedContextPath+"/my-account/napa-rewards/edit",type:"POST",data:formdata.serialize(),timeout:NAPA.config.rewardsTimeout,success:function(e){""==e?($phone=$(formdata).find('input[name="phone"]').val(),$("#current-phone-num").html($phone),$("#edit-phone-number").removeClass("open"),$("body").removeClass("modal-fixed")):($("#edit-rewards-error-message").html(e),$("#rewardsPhoneInput").attr("aria-labelledby","edit-rewards-error-message").focus())},error:function(e,t,a){"timeout"===t?console.log("Call has timed out"):$("#edit-rewards-error-message").html("error")}})}),$("body").on("click",".myaccount-addressbook-delete",function(){var e=$(this).attr("address-id"),t=$("#myAddressUrls").attr("data-remove-address-url")+"/"+e,a=$(this);$(this).closest(".address-container"),$(this).closest("ul"),$.ajax({url:t,type:"GET",beforeSend:function(){},success:function(e){"success"==e.status&&a.closest("li").remove()}})}),$("body").on("click",".myaccount-addressbook-edit",function(){var e=$(this).attr("address-id"),t=$("#myAddressUrls").attr("data-edit-address-url")+"/"+e;$(this);var a=$(this);$.ajax({url:t,type:"GET",cache:!1,beforeSend:function(){},success:function(e){e='<div id="napaAddAddress" class="modal" >'+e+"</div>",$.featherlight(e,{variant:"nol-modal add-address",contentFilters:["html"],afterContent:function(){adaModal("a.address-type.billing","button.button-primary.blue.addAddress"),$("button.addressform-cancelbtn").css({"margin-bottom":"5px","margin-right":"5px"})},afterClose:function(){$(a).focus()}}),"true"==$(".shippingAddress").val()?($(".billing").removeClass("active"),$(".shipping").addClass("active")):"true"==$(".billingAddress").val()&&($(".shipping").removeClass("active"),$(".billing").addClass("active")),$(".billing").on("click",function(){$(this).addClass("active"),$(".shipping").removeClass("active"),$(".shippingAddress").val(!1),$(".billingAddress").val(!0),populateStates()}),$(".shipping").on("click",function(){$(this).addClass("active"),$(".billing").removeClass("active"),$(".shippingAddress").val(!0),$(".billingAddress").val(!1),populateStates()}),changeStates("false")}})}),$("body").on("click",".addressbook-add-address",function(){var e=$("#myAddressUrls").attr("data-add-address-url");$.ajax({url:e,type:"GET",success:function(e){e='<div id="napaAddAddress" class="modal" >'+e+"</div>",$.featherlight(e,{variant:"nol-modal add-address",contentFilters:["html"],afterContent:function(){adaModal("a.address-type.billing","button.button-primary.blue.addAddress")}}),$("#addNewAddressForm").parsley(),$(".billing").removeClass("active"),$(".shipping").addClass("active"),$(".shippingAddress").val(!0),$(".billingAddress").val(!1),$(".billing").on("click",function(){$(this).addClass("active"),$(".shipping").removeClass("active"),$(".shippingAddress").val(!1),$(".billingAddress").val(!0),populateStates()}),$(".shipping").on("click",function(){$(this).addClass("active"),$(".billing").removeClass("active"),$(".shippingAddress").val(!0),$(".billingAddress").val(!1),populateStates()}),changeStates("false")}})}),$("body").on("click",".addAddress",function(e){if($("#errors").html(""),$(this).parents("form").find(".pure-input-1"),$(".pure-input-1.error").prev(".error-wrap").find("p.error-message").html(""),!1===$("#addNewAddressForm").parsley().validate())return!1;var t=$("#addNewAddressForm").serialize(),a=$(this),r="";return r="false"==$("#editAddress").val()?$("#myAddressUrls").attr("data-add-address-url"):$("#myAddressUrls").attr("data-edit-address-url"),$.post(r,t,function(e){if("errors"==e.status){if(e.errorMessageList.length>0){$("#errors").append("<ul>");for(var t=0;t<e.errorMessageList.length;t++){var r=e.errorMessageList[t];$("."+r.fieldName).removeClass("success").addClass("error").prev(".error-wrap").find(".error-messages").addClass("filled").innerText('<p class="error-message">'+r.message+"</p>"),"global"==r.fieldName&&$("#errors ul").append("<li>"+r.message+"</li>")}$("#errors").append("</ul>")}}else getAddressBook(),a.closest("div.featherlight").find(".featherlight-close").click()},"json"),e.preventDefault(),!1}),$("body").on("change",".addressType",function(){changeStates("true")}),$("body").on("change",".shippingAddressType",function(){setDeliveryMethod()}),$("body").on("click",".addressform-cancelbtn",function(e){e.preventDefault(),$(this).closest("div.featherlight").find(".featherlight-close").click()}),$("body").on("click","#modalForgotPasswordNewX",function(t){e(),t.preventDefault()}),$("body").on("keyup","#forgot-password .input-change",function(t){t.preventDefault(),13==t.keyCode&&(t.preventDefault(),e())});var e=function(){if(!0!=$("#forgot-password").parsley().validate())return!1;var e=$("#modalForgotPassword").find(".modal-content"),t=ACC.config.encodedContextPath+"/login/pw/requestValidate",a=$("#emailid").val();$.ajax({url:t,type:"GET",data:{q:a},dataType:"html",success:function(t){$(e).html(t),$(e).find(".modal-text").attr("tabindex","0"),adaModal($(e).find(".modal-text"),$(e).find(".modal-text"))}})};$("body").on("submit","#forgot-password",function(e){return e.preventDefault(),!1}),$("body").on("click","#orderConfirmEmailList",function(e){var t=$("#orderDataEmail").serialize();$.ajax({type:"POST",url:"/checkout/multi/orderSummary/sendOrderConfirmationEmail",data:t,dataType:"html",success:function(e){$(".notification-success").css("display","block")}})}),$("#guestRegisterForm").on("submit",function(e){if(e.preventDefault(),$("#guestRegisterForm").parsley().validate()){var t=$("#guestRegisterForm").serialize();$.ajax({type:"POST",url:"/checkout/multi/orderSummary/registerGuest",data:t,dataType:"html",success:function(e){try{_satellite&&_satellite.track("account_signup")}catch(t){}$(".guestUserRegistrationDiv").hide(),$(".guestUserRegistration-success").show()}})}}),$("#rewards-enroll-agree").on("click",function(){var e;e=!!$(this).is(":checked"),showHideElement($(".rewards-enrollment-block"),null,null,e)}),$("#show-phone-rewards-input").on("click",function(e){showHideElement($("#phone-rewards-input"),e),showHideElement($(".show-phone-rewards-input-wrap"))}),$("#show-enroll-rewards").on("click",function(e){showHideElement($("#phone-rewards-input"),e);var t=$('input[id="rewardsPhoneNumber"][name="rewardsPhoneNumber"]');void 0!=t&&(t.val(""),$("#rewards-enroll-available").html(""),$("#rewards-enroll-error").html("")),showHideElement($(".show-phone-rewards-input-wrap"))})}),$(document).on("click",".select-store",function(){$(this).parent('form[name="makeMyStoreForm"]').submit()}),$(document).on("click",".remove-button",function(){$(this).parent('form[name="removeMyStoreForm"]').submit()}),$(document).on("click",".deselect-store",function(){$(this).parent('form[name="deselectMyStoreForm"]').submit()}),$(document).on("keypress","#my-account-find-store-query",function(e){13==e.keyCode&&findAStore()}),$(document).on("click","#my-account-find-store",function(){findAStore()}),$("#updateContactForm button").click(function(){!1==$("#updateContactForm").parsley().validate()&&($("#updateContactForm input.error").each(function(){$(this).attr("aria-describedby","parsley-id-"+$(this).data("parsley-id"))}),$("#updateContactForm input.error").first().focus())}),$("body").on("click","#updateEmailSubmit",function(e){if($("#errors").html(""),$(this).parents("form").find(".pure-input-1"),$(".pure-input-1.error").prev(".error-wrap").find("p.error-message").html(""),!1==$("#updateEmailForm").parsley().validate())return $("#updateEmailForm input").each(function(){$(this).attr("aria-describedby","parsely-id-"+$(this).data("parsley-id"))}),$("#updateEmailForm input").each(function(){$(this).attr("aria-invalid","true")}),$("#updateEmailForm input.error").first().focus(),!1;var t=$("#updateEmailForm").serialize();$(this);var a=$("#myProfileUrls").attr("data-edit-profile-url");return $.post(a,t,function(e){if("errors"==e.status){if(e.errorMessageList.length>0){$("#errors").append('<div class="error-message">');for(var t=0;t<e.errorMessageList.length;t++){var a=e.errorMessageList[t];"global"==a.fieldName?$("#errors div").append("<span>"+a.message+"</span>"):$("#"+a.fieldName).removeClass("success").addClass("error").prev(".error-wrap").find(".error-messages").addClass("filled").innerText('<p class="error-message">'+a.message+"</p>")}$("#errors").append("</div>")}}else getProfilePage(e.resultData)},"json"),e.preventDefault(),!1}),$("body").on("click","#updatePasswordSubmit",function(e){if($("#errors").html(""),$(this).parents("form").find(".pure-input-1"),$(".pure-input-1.error").prev(".error-wrap").find("p.error-message").html(""),!1==$("#updatePasswordForm").parsley().validate())return $("#updatePasswordForm input").each(function(){$(this).attr("aria-describedby","parsely-id-"+$(this).data("parsley-id"))}),$("#updatePasswordForm input.error").first().focus(),!1;var t=$("#updatePasswordForm").serialize();$(this);var a="";return a=$("#myProfileUrls").attr("data-edit-password-url"),$.post(a,t,function(e){if("errors"==e.status){if(e.errorMessageList.length>0){$("#errors").append('<div class="error-message">');for(var t=0;t<e.errorMessageList.length;t++){var a=e.errorMessageList[t];"global"==a.fieldName?$("#errors div").append("<span>"+a.message+"</span>"):$("."+a.fieldName).removeClass("success").addClass("error").prev(".error-wrap").find(".error-messages").addClass("filled").innerText('<p class="error-message">'+a.message+"</p>")}$("#errors").append("</div>")}}else getProfilePage(e.resultData)},"json"),e.preventDefault(),!1}),$("body").on("change",".billingAddressType",function(){changeStatesForBillingAddress("true")}),$("body").on("click","#backtoCart",function(){window.location.href=$("#myAddressUrls").attr("data-cart-url")}),$("body").on("click",".homePage",function(){window.location.href=$("#myOrderUrls").attr("data-home-Page-url")}),$("body").on("click",".cartpage",function(){window.location.href=$("#myOrderUrls").attr("data-cart-Page-url")}),$("body").on("click","#myAccountAddress .icon-napa-delete",function(){var e=$(this),t=$(this).attr("address-id"),a=$(this).parents("li").find("div.address").html(),r=$(this).parents("li").find("div.personal-info").text(),s=$("#modalMyAddressDelete"),i=$(s).find(".my-address-delete-details"),o=$(s).find(".my-address-delete-list-item");addressPK=$(s).find("#myAccountAddressCode"),$(i).text(r),$(o).html(a),$(addressPK).val(t),$.featherlight(s.html(),{variant:"nol-modal nol-modal-simple grey-modal deleteAddress",closeOnClick:"background",contentFilters:["html"],afterContent:function(e){var t=this.$content.find(".clear"),a=this.$content.find(".grey");console.log("This delete event finished "+e),$("a.featherlight-close-icon.featherlight-close").attr("id","adaModalCloseAddress"),$("a.clear.button-primary").css({"margin-bottom":"5px","margin-right":"5px"}),adaModal(t,a,"a.featherlight-close-icon.featherlight-close")},afterClose:function(){$(e).focus()}})}),$("body").on("click","#btnDeleteAddressOnAccountPage",function(e){e.preventDefault(),$(this).parents("form").submit()});