$(".my-vehicle-delete").click(function(){var selectedVehicle=$(this).prev().text();var selectedPK=$(this).prev().attr("id");var deleteVehicleModal=$("#modalMyVehicleDelete");var vehicle=$(deleteVehicleModal).find(".my-vehical-delete-list-item");var vehiclePK=$(deleteVehicleModal).find("#myVehicleId");$(vehicle).text(selectedVehicle);$(vehiclePK).val(selectedPK);});$("#btnDeleteVehicle").click(function(e){e.preventDefault();var form=$(this).parents("form");var vehiclePK=$(form).find("#myVehicleId").val();var defaultVehiclePk=$(".my-vehicle").find("#defaultVehiclePk").val();var formurl=$(form).attr("action");var posturl=formurl+"/"+vehiclePK;var secondaryParams={};if($("#veh-ymm-submit").length){if($("#veh-ymm-submit").data("currentpagetype")=="plp"){var secondaryParams={referer:"plp"};}}$.ajax({url:posturl,type:"GET",data:secondaryParams,success:function(data){if(data=="success"){if(vehiclePK==defaultVehiclePk){var redirecturl=$("#vehicle-deselect-data").attr("data-url");var keyword=$("#keywordInput").val();var fqv=$("#fqv").val();var ptlp=$("#partTypePage").val();var searchAppIndexDataURL=$("#search-app-index-data").attr("data-url");if(keyword!=undefined&&keyword!=""&&fqv=="true"){var searchTextUrl=ACC.config.encodedContextPath+"/search?text="+encodeURIComponent(keyword)+"&referer=semantic";window.location.href=searchTextUrl;}else{if(searchAppIndexDataURL!=undefined&&searchAppIndexDataURL!=""){if(searchAppIndexDataURL.indexOf("c/job")==-1){window.location.href=searchAppIndexDataURL+"&referer=vehicleAdd";}else{window.location.href=searchAppIndexDataURL+"?referer=vehicleAdd";}}else{if(redirecturl!=undefined&&redirecturl!=""){window.location.href=redirecturl;}else{location.reload(true);}}}}else{location.reload(true);}}}});});var handleDeselectAllButtonShowHide=function(action){if(action=="show"){$("#deselectallvehicles").show();}else{$("#deselectallvehicles").hide();}};$(document).ready(function(){isUserHasDefaultVehicle=$("#labelDefaultVehicle").val();if(isUserHasDefaultVehicle=="true"){handleDeselectAllButtonShowHide("show");}else{handleDeselectAllButtonShowHide("hide");}});$(".my-vehicle .my-menu-panel-list-link").click(function(e){e.preventDefault();var vehicleId=$(this).attr("id");var form=$(this).parents("form");var formurl=$(form).attr("action");var posturl=formurl+"/"+vehicleId;var redirectToPtlp=false;var secondaryParams={vehicleSelectionType:"header-ymm"};if($("#veh-ymm-submit").length){if($("#veh-ymm-submit").data("currentpagetype")=="plp"){var secondaryParams={vehicleSelectionType:"header-ymm",referer:"plp"};}if($("#veh-ymm-submit").data("currentpagetype")=="ptlp"){redirectToPtlp=ACC.config.encodedContextPath+"/search?referer=semantic&headerVehChange=true&text="+encodeURIComponent($(this).data("vehicledata")+" "+$("#veh-ymm-submit").data("searchterm"));}}if($("#pageType").val()=="nrf"){redirectToPtlp=ACC.config.encodedContextPath+"/search?referer=semantic&text="+encodeURIComponent($(this).data("vehicledata")+" "+$("#keywordInput").val());}$.ajax({url:posturl,type:"GET",data:secondaryParams,success:function(data){if(data=="success"){$("#"+vehicleId).parent("li").addClass("my-vehicle-item-selected").siblings().removeClass("my-vehicle-item-selected");var newVehicleContent=$("#"+vehicleId).html();$(".my-vehicle").find(".my-menu-value").html(newVehicleContent);$(".my-vehicle").find("#defaultVehiclePk").val(vehicleId);$(".my-vehicle").removeClass("my-menu-open");handleDeselectAllButtonShowHide("show");if(redirectToPtlp!=false){window.location.href=redirectToPtlp;return;}var searchAppIndexDataURL=$("#search-app-index-data").attr("data-url");if(searchAppIndexDataURL!=undefined&&searchAppIndexDataURL!=""){if(searchAppIndexDataURL.indexOf("c/job")==-1){window.location.href=searchAppIndexDataURL+"&referer=vehicleAdd";}else{window.location.href=searchAppIndexDataURL+"?referer=vehicleAdd";}}else{if($("#pageType").val()=="productDetails"){window.location.href=document.location.pathname+addUrlParam(document.location.search,"vehicleAddPDP","true");return;}else{location.reload(true);}}}},cache:false});});$("#deselectallvehicles, #deselectallvehiclesCat, .deselectVeh").click(function(e){e.preventDefault();var targeturl=$("#urlpath").val();var noVehicleText=$("#noVehicleSpecifiedText").text();var secondaryParams={};if($("#veh-ymm-submit").length){if($("#veh-ymm-submit").data("currentpagetype")=="plp"){var secondaryParams={referer:"plp"};}}$.ajax({url:targeturl,type:"GET",data:secondaryParams,success:function(data){if(data=="success"){$(".my-menu-panel-list-item ").removeClass("my-vehicle-item-selected");$(".my-vehicle").find(".my-menu-value").text(noVehicleText);$(".my-vehicle").find("#defaultVehiclePk").val("");$(".my-vehicle").removeClass("my-menu-open");handleDeselectAllButtonShowHide("hide");var redirecturl=$("#vehicle-deselect-data").attr("data-url");var keyword=$("#keywordInput").val();var fqv=$("#fqv").val();var ptlp=$("#partTypePage").val();var searchAppIndexDataURL=$("#search-app-index-data").attr("data-url");if(keyword!=undefined&&keyword!=""&&fqv=="true"){var searchTextUrl=ACC.config.encodedContextPath+"/search?text="+encodeURIComponent(keyword)+"&referer=semantic";window.location.href=searchTextUrl;}else{if(searchAppIndexDataURL!=undefined&&searchAppIndexDataURL!=""){if(searchAppIndexDataURL.indexOf("c/job")==-1){window.location.href=searchAppIndexDataURL+"&referer=vehicleAdd";}else{window.location.href=searchAppIndexDataURL+"?referer=vehicleAdd";}}else{if($("#pageType").val()=="productDetails"){window.location.href=document.location.pathname+addUrlParam(document.location.search,"vehicleAddPDP","true");return;}else{if(redirecturl!=undefined&&redirecturl!=""){window.location.href=redirecturl;}else{location.reload(true);}}}}}},cache:false});});$("#myAccountVehicle .icon-napa-delete").click(function(){var selectedVehicle=$(this).parent().prev().text();var selectedPK=$(this).attr("vehicleid");var deleteVehicleModal=$("#modalMyAccountVehicleDelete");var vehicle=$(deleteVehicleModal).find(".my-vehical-delete-list-item");vehiclePK=$(deleteVehicleModal).find("#myAccountVehicleId");$(vehicle).text(selectedVehicle);$(vehiclePK).val(selectedPK);});$("#btnDeleteVehicleOnAccountPage").click(function(e){e.preventDefault();$(this).parents("form").submit();});var vehicleRedirectUrl=$("#inputVehicleHiddenRedirectUrl").val();$(".vehicle-panel-inline .add-new-vehicleinline-complete").on("click",".button-primary",function(e){e.preventDefault();formAction=$(this).attr("data-ajax-url");var form=$(this).parents("form");$.ajax({url:formAction,type:"POST",data:form.serialize(),success:function(data){if(data.status=="success"){var searchAppIndexDataURL=$("#search-app-index-data").attr("data-url");if(searchAppIndexDataURL!=undefined&&searchAppIndexDataURL!=""){window.location.href=searchAppIndexDataURL;}else{location.reload();}}else{if(data.status=="error"){$(".add-new-vehicle-selected-panel").find(".notification").removeClass("notification-error").children("p").remove();$(".add-new-vehicle-selected-panel").find(".notification").show().addClass("notification-error").append('<p class="notification-text">'+data.errorMessageList[0]+"</p>");return false;}else{location.reload();}}}});});var scrolled=0;$(document).ready(function(){$("#add-new-vehicle-make-viewmore-button").on("click",function(){scrolled=scrolled+10000;$(".add-new-vehicle-show-make .add-new-vehicle-make").animate({scrollTop:scrolled});$("#modalMyVehicleAdd.featherlight-inner").find("#add-new-vehicle-make-viewmore-button").css("display","none");});});