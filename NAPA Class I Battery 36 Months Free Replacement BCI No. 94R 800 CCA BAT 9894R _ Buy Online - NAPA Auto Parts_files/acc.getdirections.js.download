var directionsDisplay;var directionsService;function initializeGetDirections(){directionsService=new google.maps.DirectionsService();directionsDisplay=new google.maps.DirectionsRenderer();var latitude=document.getElementById("map-canvas-getdirections").getAttribute("data-latitude");var longitude=document.getElementById("map-canvas-getdirections").getAttribute("data-longitude");var mapOptions={zoom:7,center:new google.maps.LatLng(latitude,longitude)};var map=new google.maps.Map(document.getElementById("map-canvas-getdirections"),mapOptions);directionsDisplay.setMap(map);google.maps.event.addListenerOnce(map,"tilesloaded",function(){$(document).trigger("mapLoaded");});}function calcRoute(){initializeGetDirections();var start=document.getElementById("fromAddress").value;var end=document.getElementById("toAddress").value;var request={origin:start,destination:end,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(request,function(response,status){var errorMsg=$("#getdirection-notification-warning");errorMsg.css("display","none");var summaryPanelHeading=$(".summary-block h4 .distance-direction");var summaryBlock=$("#getdirection-summary-block");summaryBlock.css("display","none");$(summaryPanelHeading).html("");$(".summary-items ul li").remove("");if(status==google.maps.DirectionsStatus.OK){summaryBlock.css("display","block");directionsDisplay.setDirections(response);for(var i=0;i<response.routes.length;i++){var route=response.routes[i];for(var x=0;x<route.legs.length;x++){summaryPanelHeading.html(route.legs[x].distance.text+"("+route.legs[x].duration.text+")");var steps=route.legs[x].steps;for(y=0;y<steps.length;y++){var listPanel=$(".summary-items ul");var summaryNumber=y+1;$(listPanel).append('<li><div class="summary-no"><span>'+summaryNumber+'</span></div><div class="summary-text"><p>'+steps[y].instructions+'</p></div><div class="summary-mesearument"><p>'+steps[y].distance.text+"</p></div>");}}}}else{errorMsg.css("display","block");}});}